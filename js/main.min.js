function J(f) {
  var h = 0;
  return function () {
    return h < f.length ? { done: !1, value: f[h++] } : { done: !0 };
  };
}
function K(f) {
  var h = "undefined" != typeof Symbol && Symbol.iterator && f[Symbol.iterator];
  return h ? h.call(f) : { next: J(f) };
}
function L(f, h, m) {
  f instanceof String && (f = String(f));
  for (var r = f.length, p = 0; p < r; p++) {
    var y = f[p];
    if (h.call(m, y, p, f)) return { h: p, i: y };
  }
  return { h: -1, i: void 0 };
}
var O =
  "function" == typeof Object.defineProperties
    ? Object.defineProperty
    : function (f, h, m) {
        if (f == Array.prototype || f == Object.prototype) return f;
        f[h] = m.value;
        return f;
      };
function P(f) {
  f = [
    "object" == typeof globalThis && globalThis,
    f,
    "object" == typeof window && window,
    "object" == typeof self && self,
    "object" == typeof global && global,
  ];
  for (var h = 0; h < f.length; ++h) {
    var m = f[h];
    if (m && m.Math == Math) return m;
  }
  throw Error("Cannot find global object");
}
var Q = P(this);
function R(f, h) {
  if (h)
    a: {
      var m = Q;
      f = f.split(".");
      for (var r = 0; r < f.length - 1; r++) {
        var p = f[r];
        if (!(p in m)) break a;
        m = m[p];
      }
      f = f[f.length - 1];
      r = m[f];
      h = h(r);
      h != r && null != h && O(m, f, { configurable: !0, writable: !0, value: h });
    }
}
R("Array.prototype.find", function (f) {
  return f
    ? f
    : function (h, m) {
        return L(this, h, m).i;
      };
});
R("Array.prototype.findIndex", function (f) {
  return f
    ? f
    : function (h, m) {
        return L(this, h, m).h;
      };
});
$(function () {
  function f(a) {
    a = void 0 === a ? "" : a;
    var d = $("." + a + ".tab-body"),
      c = d.children("label").length;
    d.append(
      $("<label>")
        .addClass(a + " tab-children invisible_Control")
        .append(
          $("<input>").attr("type", "button").addClass(a),
          $("<div>").addClass("tab-number").text(c),
          $("<div>").addClass("tab-underBar")
        )
    );
    d.children("li:last-child").hide().show(150);
    a = $("." + a + ".tab-content-list");
    a.append(a.children("div:first-child").clone().removeClass("selected-tab-content"));
  }
  function h(a) {
    a = void 0 === a ? "" : a;
    $("div.authors_list").append(
      $("<label>")
        .addClass("author-name")
        .append(
          $("<div>").addClass("author_num").text($(".author-name").length),
          $("<input>").attr({ type: "text", j: "metadata_author", value: a })
        )
    );
  }
  function m() {
    F = !1;
    "number" === typeof G && window.clearTimeout(G);
    G = window.setTimeout(function () {
      F = !0;
      M();
    }, 500);
  }
  function r() {
    for (var a = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""), d = 0, c = a.length; d < c; d++)
      switch (a[d]) {
        case "x":
          a[d] = Math.floor(16 * Math.random()).toString(16);
          break;
        case "y":
          a[d] = (Math.floor(4 * Math.random()) + 8).toString(16);
      }
    return a.join("");
  }
  function p() {
    var a = $("#input-file").prop("files")[0],
      d = new FileReader();
    d.onload = function () {
      a: {
        var c = d.result;
        c = void 0 === c ? "" : c;
        var b = {};
        try {
          b = JSON.parse(c);
        } catch (z) {
          window.alert(
            N(c, z.message) +
              "\n\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u9664\u53bb\u3057\u3066\u518d\u5ea6\u8a66\u307f\u307e\u3059\u3002\n"
          );
          try {
            var e = c.replace(/\/\*[\s\S]*?\*\/ | \/\/(?=.*)(?!.*(",|")).*/g, "");
            b = JSON.parse(e);
          } catch (C) {
            window.alert(N(e, C.message));
            console.error("error:" + C);
            break a;
          }
        }
        if (null != b.format_version) $("#format_version").val(b.format_version);
        else if (null != b.header.modules) {
          null != b.header.pack_id && $("#header_uuid").val(b.header.pack_id);
          null != b.header.name && $("#header_pack_name").val(b.header.name);
          null != b.header.packs_version &&
            ((c = b.header.packs_version.split(".")),
            null != c[0] && $("#header_version_major").val(c[0]),
            null != c[1] && $("#header_version_minor").val(c[1]),
            null != c[2] && $("#header_version_patch").val(c[2]));
          null != b.header.description && $("#header_description").val(b.header.description);
          if (null != b.header.modules)
            for (c = 0; c < b.header.modules.length; c++) {
              e = c + 1;
              0 < c && f("modules");
              null != b.header.modules[c].type &&
                $(".modules.tab-content-list > div:nth-child(" + e + ") #modules_type").val(
                  b.header.modules[c].type
                );
              null != b.header.modules[c].description &&
                $(".modules.tab-content-list > div:nth-child(" + e + ") #modules_description").val(
                  b.header.modules[c].description
                );
              if (null != b.header.modules[c].version) {
                var g = b.header.modules[c].version.split(".");
                null != g[0] &&
                  $(
                    ".modules.tab-content-list > div:nth-child(" + e + ") #modules_version_major"
                  ).val(g[0]);
                null != g[1] &&
                  $(
                    ".modules.tab-content-list > div:nth-child(" + e + ") #modules_version_minor"
                  ).val(g[1]);
                null != g[2] &&
                  $(
                    ".modules.tab-content-list > div:nth-child(" + e + ") #modules_version_patch"
                  ).val(g[2]);
              }
              null != b.header.modules[c].uuid &&
                $(".modules.tab-content-list > div:nth-child(" + e + ") #modules_uuid").val(
                  b.header.modules[c].uuid
                );
            }
          if (null != b.header.dependencies)
            for (
              $("#dependencies_enable").prop("checked", !0), c = 0;
              c < b.header.dependencies.length;
              c++
            )
              (e = c + 1),
                0 < c && f("dependencies"),
                (e = $("div.dependencies.tab-content-list > div:nth-child(" + e + ")")),
                null != b.header.dependencies[c].uuid &&
                  e.find("#dependencies_uuid").val(b.header.dependencies[c].uuid),
                null != b.header.dependencies[c].version &&
                  ((g = b.header.dependencies[c].version.split(".")),
                  null != g[0] && e.find("#dependencies_version_major").val(g[0]),
                  null != g[1] && e.find("#dependencies_version_minor").val(g[1]),
                  null != g[2] && e.find("#dependencies_version_patch").val(g[2]));
          window.alert(
            "\u53e4\u3044\u5f62\u5f0f(pack_manifest.json)\u304b\u3089\u5909\u63db\u3057\u307e\u3059\u3002"
          );
          t();
          break a;
        }
        null != b.header.name && $("#header_pack_name").val(b.header.name);
        null != b.header.description && $("#header_description").val(b.header.description);
        null != b.header.version &&
          (null != b.header.version[0] && $("#header_version_major").val(b.header.version[0]),
          null != b.header.version[1] && $("#header_version_minor").val(b.header.version[1]),
          null != b.header.version[2] && $("#header_version_patch").val(b.header.version[2]));
        null != b.header.min_engine_version &&
          (null != b.header.min_engine_version[0] &&
            $("#header_min_engine_version_major").val(b.header.min_engine_version[0]),
          null != b.header.min_engine_version[1] &&
            $("#header_min_engine_version_minor").val(b.header.min_engine_version[1]),
          null != b.header.min_engine_version[2] &&
            $("#header_min_engine_version_patch").val(b.header.min_engine_version[2]));
        null != b.header.uuid && $("#header_uuid").val(b.header.uuid);
        null != b.header.platform_locked &&
          b.header.platform_locked &&
          $("#header_platform_locked").prop("checked", !0);
        null != b.header.base_game_version &&
          (null != b.header.base_game_version[0] &&
            $("#header_base_game_version_major").val(b.header.base_game_version[0]),
          null != b.header.base_game_version[1] &&
            $("#header_base_game_version_minor").val(b.header.base_game_version[1]),
          null != b.header.base_game_version[2] &&
            $("#header_base_game_version_patch").val(b.header.base_game_version[2]));
        $("#header_lock_template_options").prop(
          "checked",
          null != (g = b.header.lock_template_options) ? g : !1
        );
        var l;
        $("#header_pack_scope").val(null != (l = b.header.pack_scope) ? l : "none");
        if (null != b.modules)
          for (c = 0; c < b.modules.length; c++)
            (e = c + 1),
              0 < c && f("modules"),
              null != b.modules[c].type &&
                $(".modules.tab-content-list > div:nth-child(" + e + ") #modules_type").val(
                  b.modules[c].type
                ),
              null != b.modules[c].description &&
                $(".modules.tab-content-list > div:nth-child(" + e + ") #modules_description").val(
                  b.modules[c].description
                ),
              null != b.modules[c].version &&
                (null != b.modules[c].version[0] &&
                  $(
                    ".modules.tab-content-list > div:nth-child(" + e + ") #modules_version_major"
                  ).val(b.modules[c].version[0]),
                null != b.modules[c].version[1] &&
                  $(
                    ".modules.tab-content-list > div:nth-child(" + e + ") #modules_version_minor"
                  ).val(b.modules[c].version[1]),
                null != b.modules[c].version[2] &&
                  $(
                    ".modules.tab-content-list > div:nth-child(" + e + ") #modules_version_patch"
                  ).val(b.modules[c].version[2])),
              null != b.modules[c].uuid &&
                $(".modules.tab-content-list > div:nth-child(" + e + ") #modules_uuid").val(
                  b.modules[c].uuid
                ),
              (g = void 0),
              $(".modules.tab-content-list > div:nth-child(" + e + ") #modules_entry").val(
                null == (g = b.modules[c]) ? void 0 : g.entry
              );
        if (null != b.dependencies)
          for ($("#dependencies_enable").prop("checked", !0), c = 0; c < b.dependencies.length; c++)
            (e = c + 1),
              0 < c && f("dependencies"),
              (e = $("div.dependencies.tab-content-list > div:nth-child(" + e + ")")),
              null != b.dependencies[c].uuid &&
                e.find("#dependencies_uuid").val(b.dependencies[c].uuid),
              null != b.dependencies[c].version &&
                (null != b.dependencies[c].version[0] &&
                  e.find("#dependencies_version_major").val(b.dependencies[c].version[0]),
                null != b.dependencies[c].version[1] &&
                  e.find("#dependencies_version_minor").val(b.dependencies[c].version[1]),
                null != b.dependencies[c].version[2] &&
                  e.find("#dependencies_version_patch").val(b.dependencies[c].version[2]));
        if (null != b.capabilities)
          for (
            $("#capabilities_enable").prop("checked", !0), c = K(b.capabilities), e = c.next();
            !e.done;
            e = c.next()
          )
            switch (e.value) {
              case "experimental_custom_ui":
                $("#experimental_custom_ui").prop("checked", !0);
                break;
              case "chemistry":
                $("#chemistry").prop("checked", !0);
                break;
              case "raytracing":
                $("#raytracing").prop("checked", !0);
            }
        if (null != b.metadata) {
          $("#metadata_enable").prop("checked", !0);
          if (null != b.metadata.authors)
            for (c = K(b.metadata.authors), e = c.next(); !e.done; e = c.next()) h(e.value);
          null != b.metadata.url && $("#metadata_url").val(b.metadata.url);
          null != b.metadata.license && $("#metadata_license").val(b.metadata.license);
        }
        if (null != b.subpacks)
          for ($("#subpacks_enable").prop("checked", !0), c = 0; c < b.subpacks.length; c++)
            (e = c + 1),
              0 < c && f("subpacks"),
              (e = $("div.subpacks.tab-content-list > div:nth-child(" + e + ")")),
              null != b.subpacks[c].folder_name &&
                e.find("#subpacks_folder_name").val(b.subpacks[c].folder_name),
              null != b.subpacks[c].name && e.find("#subpacks_name").val(b.subpacks[c].name),
              null != b.subpacks[c].memory_tier &&
                e.find("#subpacks_memory_tier").val(b.subpacks[c].memory_tier);
        t();
      }
    };
    try {
      d.readAsText(a);
    } catch (c) {
      console.error("error:" + c);
    }
  }
  function y() {
    switch (v) {
      case 1:
        $("#help-content-1").fadeOut("fast");
        $("#help-content_2").slideToggle("fast");
        v++;
        break;
      case 2:
        $("#help-content_2").slideToggle("fast");
        $("#help-content-3").fadeIn("fast");
        v++;
        break;
      case 3:
        $("#help-content-3").fadeOut("fast");
        $("#page-help").hide();
        v = 0;
        break;
      case 5:
        $("#help-content-1").hide();
        $("#help-content_2").hide();
        $("#help-content-3").hide();
        $("#page-help").hide();
        v = 0;
        break;
      default:
        $("#help-content-1").fadeIn("fast"), v++;
    }
  }
  function t() {
    S();
    T();
    U();
    F && M();
    m();
    var a = V();
    $("pre.language-json code.language-json").remove();
    $("pre.language-json").append($("<code>").addClass("language-json").text(a));
    $("textarea#code-buffer").val(a);
    a = $("#header_pack_name").val().toString();
    if ("" == a) a = "\u540d\u524d\u304c\u3042\u308a\u307e\u305b\u3093";
    else if (null != a.match(/\\/g)) {
      a = a.split("\\\\");
      var d = "",
        c;
      for (c in a) {
        var b = a[c].indexOf("\\n");
        1 <= c && (d += "\\\\");
        if (-1 != b) {
          d += a[c].slice(0, a[c].indexOf("\\n") - a[c].length) + "\u2026";
          break;
        } else d += "" + a[c];
      }
      a = d;
    }
    $("#card-title").html(MinecraftText.toHTML(a));
    b = $("#header_description").val().toString();
    if ("" == b) b = "\u00a7c\u4e0d\u660e\u306a\u30d1\u30c3\u30af\u306e\u8aac\u660e";
    else if (null != b.match(/\\/g)) {
      a = c = 0;
      d = "";
      b = b.split("\\\\");
      for (var e in b) {
        do if ((a++, (c = b[e].indexOf("\\n", c + 1)), -1 == c)) break;
        while (3 > a);
        1 <= e && (d += "\\\\");
        if (-1 != c) {
          d += b[e].slice(0, c + 1 - b[e].length) + "\u2026";
          break;
        } else d += "" + b[e];
      }
      b = d;
    }
    $("#card-description").html(MinecraftText.toHTML(b));
    MinecraftText.refeashObfuscate();
    Prism.highlightAll();
  }
  function T() {
    [".dependencies", ".subpacks"].forEach(function (a, d) {
      H(a, [[q, u][d], [q, u][d], [q, u][d] && 1 < $(a + ".tab-children").length]);
    });
    1 < $(".author-name").length
      ? $(".remove_author").removeClass("disabled").find("input").prop("disabled", !1)
      : $(".remove_author").addClass("disabled").find("input").prop("disabled", !0);
  }
  function H(a, d) {
    a = void 0 === a ? "" : a;
    d = void 0 === d ? [0, 0, 0] : d;
    [".tab-body", ".add-tab", ".remove-tab"].forEach(function (c, b) {
      c = $(a + c);
      1 == d[b]
        ? c.removeClass("disabled").find("input").prop("disabled", !1)
        : 0 == d[b] && c.addClass("disabled").find("input").prop("disabled", !0);
    });
  }
  function S() {
    q = $("#dependencies_enable").is(":checked") || $("#dependencies_enable").is(":indeterminate");
    D = $("#capabilities_enable").is(":checked") || $("#capabilities_enable").is(":indeterminate");
    B = $("#metadata_enable").is(":checked") || $("#metadata_enable").is(":indeterminate");
    u = $("#subpacks_enable").is(":checked") || $("#subpacks_enable").is(":indeterminate");
    var a = $(".dependencies.tab-content-list div.value-element");
    q
      ? (a.find("div.value-label").removeClass("disabled"),
        a.find("input").prop("disabled", !1),
        "" == $("#dependencies_uuid").val()
          ? $("#dependencies_enable").prop("indeterminate", !0)
          : $("#dependencies_enable").prop("indeterminate", !1))
      : (a.find("div.value-label").addClass("disabled"), a.find("input").prop("disabled", !0));
    a = $(".capabilities_list .value-element");
    D
      ? (a.removeClass("disabled"),
        a.find("input").prop("disabled", !1),
        $("div.capabilities_list div input").is(":checked")
          ? $("#capabilities_enable").prop("indeterminate", !1)
          : $("#capabilities_enable").prop("indeterminate", !0))
      : (a.addClass("disabled"), a.find("input").prop("disabled", !0));
    a = $(".metadata_list .value-element");
    B
      ? (a.removeClass("disabled"),
        a.find("input").prop("disabled", !1),
        [
          0 < $(".metadata_author").length ? "" != $(".metadata_author").val() : !1,
          "" != $("#metadata_url").val(),
          "" != $("#metadata_license").val(),
        ].some(function (d) {
          return d;
        })
          ? $("#metadata_enable").prop("indeterminate", !1)
          : $("#metadata_enable").prop("indeterminate", !0))
      : (a.addClass("disabled"), a.find("input").prop("disabled", !0));
    a = $(".subpacks.tab-content-list div.value-element");
    u
      ? (a.find("div.value-label").removeClass("disabled"),
        a.find("input").prop("disabled", !1),
        "" == $("#subpacks_folder_name").val() && "" == $("#subpacks_name").val()
          ? $("#subpacks_enable").prop("indeterminate", !0)
          : $("#subpacks_enable").prop("indeterminate", !1))
      : (a.find("div.value-label").addClass("disabled"), a.find("input").prop("disabled", !0));
  }
  function U() {
    var a = Array.prototype.map.call(
      $(".modules.tab-content-list > div #modules_type"),
      function (l) {
        return l.value;
      }
    );
    n = a.some(function (l) {
      return "world_template" == l;
    });
    w = a.some(function (l) {
      return "skin_pack" == l;
    });
    $("#header_min_engine_version").toggleClass("disabled", n || w);
    $("#header_min_engine_version_input input").prop("disabled", n || w);
    $("#header_base_game_version").toggleClass("disabled", 2 <= x && !n);
    $("#header_base_game_version_input input").prop("disabled", 2 <= x && !n);
    $("#header_lock_template_options").prop("disabled", !n).parent().toggleClass("disabled", !n);
    $("#header_pack_scope_label").toggleClass("disabled", n || w);
    $("#header_pack_scope").prop("disabled", n || w);
    if (
      n ||
      w ||
      a.some(function (l) {
        return "resources" == l;
      })
    )
      return H(".modules", [!0, 0, 0]);
    for (
      var d = [!1, !1, !1, !1, !1, !1, !1],
        c = { data: 0, resources: 1, l: 2, o: 3, m: 4, u: 5, s: 6 },
        b = { g: 0 };
      b.g < a.length;
      b = { g: b.g }, b.g++
    ) {
      d.forEach(
        (function (l) {
          return function (z, C) {
            $(
              ".modules.tab-content-list > div:nth-child(" +
                (l.g + 1) +
                ") #modules_type option:nth-child(" +
                (C + 1) +
                ")"
            ).prop("disabled", z);
          };
        })(b)
      );
      if (d[c[a[b.g]]]) {
        var e = d.indexOf(!1),
          g = $(".modules.tab-content-list > div:nth-child(" + (b.g + 1) + ") #modules_type").prop(
            "selectedIndex",
            e
          );
        d[e] = !0;
        a[b.g] = g.val();
      }
      d[c[a[b.g]]] = !0;
      b.g ||
        ["resources", "world_template", "skin_pack"].forEach(function (l) {
          d[c[l]] = !0;
        });
      $(
        ".modules.tab-content-list > div:nth-child(" + (b.g + 1) + ") #modules_entry_label"
      ).toggleClass("disabled", "javascript" != a[b.g]);
      $(".modules.tab-content-list > div:nth-child(" + (b.g + 1) + ") #modules_entry").prop(
        "disabled",
        "javascript" != a[b.g]
      );
    }
    return H(".modules", [
      !0,
      d.some(function (l) {
        return 0 == l;
      }),
      1,
    ]);
  }
  function M() {
    $("ul.issue-list li").remove();
    $(".stat-warning, .stat-error").removeClass("stat-warning stat-error");
    var a = 0;
    var d = $("#header_pack_name").val().toString().replace(/\\\\/g, "");
    "\\" == d.slice(-1) &&
      (k(
        "error",
        '[Header:name] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',
        $("#header_pack_name")
      ),
      a++);
    d = $("#header_description").val().toString().replace(/\\\\/g, "");
    "\\" == d.slice(-1) &&
      (k(
        "error",
        '[Header:description] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',
        $("#header_description")
      ),
      a++);
    switch (x) {
      case 2:
        1 >= Number($("#header_min_engine_version_major").val()) &&
          13 > Number($("#header_min_engine_version_minor").val()) &&
          (k(
            "error",
            "[Header:min engine version] version1.12\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002",
            $("#header_min_engine_version_major").parent().find("input")
          ),
          a++),
          1 >= Number($("#header_base_game_version_major").val()) &&
            13 > Number($("#header_base_game_version_minor").val()) &&
            (k(
              "error",
              "[Header:base game version] version1.12\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002",
              $("#header_base_game_version_major").parent().find("input")
            ),
            a++);
    }
    I($("#header_uuid").val()) ||
      (k(
        "error",
        "[Header:uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",
        $("#header_uuid")
      ),
      a++);
    for (var c = $(".modules.tab-children").length, b = 0; b < c; b++) {
      var e = b + 1;
      d = $(".modules.tab-content-list > div:nth-child(" + e + ") #modules_type");
      null == d.val() &&
        (k(
          "error",
          "[Modules:" +
            b +
            ":type] type\u304cnull\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002type\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002",
          d
        ),
        a++);
      var g = $(".modules.tab-content-list > div:nth-child(" + e + ") #modules_description");
      d = g.val().replace(/\\\\/g, "");
      "\\" == d.slice(-1) &&
        (k(
          "error",
          "[Modules:" +
            b +
            ':description] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',
          g
        ),
        a++);
      d = $(".modules.tab-content-list > div:nth-child(" + e + ") #modules_uuid");
      I(d.val()) ||
        (k(
          "error",
          "[Modules:" +
            b +
            ":uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",
          d
        ),
        a++);
    }
    if (q)
      for (d = $(".dependencies.tab-children").length, c = 0; c < d; c++)
        (b = $(
          "div.dependencies.tab-content-list > div:nth-child(" + (c + 1) + ") #dependencies_uuid"
        )),
          I(b.val()) ||
            (k(
              "error",
              "[Dependencies:" +
                c +
                ":uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",
              b
            ),
            a++);
    if (B) {
      c = $("label.author-name").length;
      for (b = 0; b < c; b++)
        (e = $("input.metadata_author").eq(b)),
          (d = e.val().replace(/\\\\/g, "")),
          "\\" == d.slice(-1) &&
            (k(
              "error",
              "[Metadata:author:" +
                b +
                '] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u6d88\u53bb\u3059\u308b\u304b\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3057\u3066\u518d\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002',
              e
            ),
            a++);
      d = $("#metadata_url").val().replace(/\\\\/g, "");
      "\\" == d.slice(-1) &&
        (k(
          "error",
          '[Metadata:url] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',
          $("#metadata_url")
        ),
        a++);
      d = $("#metadata_license").val().toString().replace(/\\\\/g, "");
      "\\" == d.slice(-1) &&
        (k(
          "error",
          '[Metadata:license] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',
          $("#metadata_license")
        ),
        a++);
    }
    if (u)
      for (c = $(".subpacks.tab-children").length, b = 0; b < c; b++) {
        d = $("div.subpacks.tab-content-list > div:nth-child(" + (b + 1) + ")");
        e = d.find("#subpacks_folder_name");
        if (null == e.val() || "" == e.val())
          k(
            "error",
            "[Subpacks:" +
              b +
              ":folder_name] \u30d5\u30a9\u30eb\u30c0\u30fc\u540d\u304c\u7a7a\u3067\u3059\u3002",
            e
          ),
            a++;
        e = d.find("#subpacks_name");
        d = e.val().toString();
        if (null == d || "" == d)
          k("error", "[Subpacks:" + b + ":name] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002", e),
            a++;
        d = d.replace(/\\\\/g, "");
        "\\" == d.slice(-1) &&
          (k(
            "error",
            "[Subpacks:" +
              b +
              ':name] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',
            e
          ),
          a++);
      }
    d = 0;
    switch (x) {
      case 1:
        if (
          1 < Number($("#header_min_engine_version_major").val()) ||
          13 <= Number($("#header_min_engine_version_minor").val())
        )
          k(
            "warning",
            "[Header:min engine version] \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f31\u3067\u306f1.13\u3088\u308a\u4f4e\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3088\u308a\u9ad8\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f32\u3067\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002",
            $("#header_min_engine_version_major").parent().find("input")
          ),
            d++;
    }
    "" == $("#header_pack_name").val() &&
      (k(
        "warning",
        '[Header:name] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002\u540d\u524d\u304c\u7a7a\u306e\u5834\u5408\u3001"\u540d\u524d\u304c\u3042\u308a\u307e\u305b\u3093"\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002',
        $("#header_pack_name")
      ),
      d++);
    "" == $("#header_description").val() &&
      (k(
        "warning",
        '[Header:description] \u8aac\u660e\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u8aac\u660e\u304c\u7a7a\u306e\u5834\u5408\u3001"\u4e0d\u660e\u306a\u30d1\u30c3\u30af\u306e\u8aac\u660e"\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002',
        $("#header_description")
      ),
      d++);
    c = $(".modules.tab-children").length;
    for (b = 0; b < c; b++)
      (e = $(".modules.tab-content-list > div:nth-child(" + (b + 1) + ") #modules_description")),
        "" == e.val() &&
          (k(
            "warning",
            "[Modules:" +
              b +
              ":description] \u8aac\u660e\u304c\u3042\u308a\u307e\u305b\u3093\u3002",
            e
          ),
          d++);
    !D ||
      $("#experimental_custom_ui").is(":checked") ||
      $("#chemistry").is(":checked") ||
      $("#raytracing").is(":checked") ||
      (k(
        "warning",
        "[Capabilities] \u9805\u76ee\u304c\u4e00\u3064\u3082\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",
        $(".capabilities_list>input")
      ),
      d++);
    if (B) {
      if ((c = $("label.author-name").length))
        for (b = 0; b < c; b++)
          (e = $("input.metadata_author").eq(b)),
            "" == e.val() &&
              (k(
                "warning",
                "[Metadata:author:" + b + "] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002",
                e
              ),
              d++);
      else
        k(
          "warning",
          "[Metadata:author] \u540d\u524d\u304c\u4e00\u3064\u3082\u3042\u308a\u307e\u305b\u3093\u3002",
          $("div.add_author")
        ),
          d++;
      "" == $("#metadata_url").val() &&
        (k(
          "warning",
          "[Metadata:url] URL\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",
          $("#metadata_url")
        ),
        d++);
      "" == $("#metadata_license").val() &&
        (k(
          "warning",
          "[Metadata:license] \u30e9\u30a4\u30bb\u30f3\u30b9\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",
          $("#metadata_license")
        ),
        d++);
    }
    $("span.issue-warning-num").text("\u8b66\u544a:" + d);
    $("span.issue-error-num").text("\u30a8\u30e9\u30fc:" + a);
    0 >= d &&
      0 >= a &&
      $("ul.issue-list").append("<li>\u554f\u984c\u306f\u3042\u308a\u307e\u305b\u3093</li>");
  }
  function k(a, d, c) {
    var b = $("<li>");
    "warning" == a
      ? (b.append(
          $("<img>").attr({ src: "img/warning.svg", alt: "", width: "19px", height: "19px" }),
          $("<p>").text(d)
        ),
        c.addClass("stat-warning"))
      : "error" == a &&
        (b.append(
          $("<img>").attr({ src: "img/error.svg", alt: "", width: "19px", height: "19px" }),
          $("<p>").text(d)
        ),
        c.addClass("stat-error"));
    $("ul.issue-list").append(b);
  }
  function I(a) {
    return null ===
      (void 0 === a ? "" : a).match(
        "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
      )
      ? !1
      : !0;
  }
  function N(a, d) {
    a = void 0 === a ? "" : a;
    d = void 0 === d ? "" : d;
    var c = "\u6709\u52b9\u306ajson\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002";
    if ("" == a || "" == d) return c;
    d = d.split(" ");
    var b = d.findIndex(function (g) {
        return "line" == g;
      }),
      e = d.findIndex(function (g) {
        return "position" == g;
      });
    -1 != b
      ? ((d = parseInt(d[b + 1], 10)),
        (e = function (g) {
          for (var l = 0, z = 1; z < g; z++) l = a.indexOf("\n", l) + 1;
          return l;
        }),
        (b = e(d - 1)),
        (e = e(d + 1) - 1),
        (c +=
          "\n" +
          (d - 1) +
          "~" +
          d +
          "\u884c\u3067\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n" +
          a.substring(b, e)))
      : -1 != e &&
        ((d = d[e + 1]),
        (b = a.lastIndexOf("\n", a.lastIndexOf("\n", d) - 1) + 1),
        (e = a.substr(0, b).match(/\n/g).length + 1),
        (c +=
          "\n" +
          e +
          "~" +
          (e + 1) +
          "\u884c\u3067\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n" +
          a.substring(b, a.indexOf("\n", d - 1))));
    return c;
  }
  function V() {
    var a = {};
    a.format_version = x;
    a.header = {};
    a.header.name = "replace_header_pack_name";
    a.header.description = "replace_header_description";
    a.header.version = "replace_header_version";
    a.header.uuid = $("#header_uuid").val();
    a.header.platform_locked = $("#header_platform_locked").is(":checked") ? !0 : void 0;
    n
      ? (2 <= x && (a.header.base_game_version = "replace_base_game_version"),
        (a.header.lock_template_options = $("#header_lock_template_options").is(":checked")))
      : w ||
        ((a.header.min_engine_version = "replace_header_min_engine_version"),
        (a.header.pack_scope =
          "none" != $("#header_pack_scope").val() ? $("#header_pack_scope").val() : void 0));
    a.modules = [];
    for (var d = $(".modules.tab-children").length, c = 0; c < d; c++) {
      var b = c + 1;
      a.modules[c] = {};
      a.modules[c].type = $(
        ".modules.tab-content-list > div:nth-child(" + b + ") #modules_type"
      ).val();
      a.modules[c].description = "replace_modules_" + c + "_description";
      a.modules[c].version = "replace_modules_" + c + "_version";
      a.modules[c].uuid = $(
        ".modules.tab-content-list > div:nth-child(" + b + ") #modules_uuid"
      ).val();
      a.modules[c].entry =
        "javascript" == a.modules[c].type
          ? $(".modules.tab-content-list > div:nth-child(" + b + ") #modules_entry").val()
          : void 0;
    }
    if (q)
      for (a.dependencies = [], d = $(".dependencies.tab-children").length, c = 0; c < d; c++)
        (b = $("div.dependencies.tab-content-list > div:nth-child(" + (c + 1) + ")")),
          (a.dependencies[c] = {}),
          (a.dependencies[c].uuid = b.find("#dependencies_uuid").val()),
          (a.dependencies[c].version = "replace_dependencies_" + c + "_version");
    D &&
      $("div.capabilities_list div input").is(":checked") &&
      ((a.capabilities = []),
      $("#experimental_custom_ui").is(":checked") && a.capabilities.push("experimental_custom_ui"),
      $("#chemistry").is(":checked") && a.capabilities.push("chemistry"),
      $("#raytracing").is(":checked") && a.capabilities.push("raytracing"));
    d = [
      (function () {
        for (var e = $("label.metadata_author").length, g = 0; g < e; g++)
          if ("" != $(".metadata_author").eq(g).val()) return !0;
        return !1;
      })(),
      "" != $("#metadata_url").val(),
      "" != $("#metadata_license").val(),
    ];
    if (
      B &&
      d.some(function (e) {
        return e;
      })
    ) {
      a.metadata = {};
      if (d[0])
        for (a.metadata.authors = [], c = $("label.author-name").length, b = 0; b < c; b++)
          a.metadata.authors.push("replace_" + b + "_author");
      d[1] && (a.metadata.url = "replace_metadata_url");
      d[2] && (a.metadata.license = "replace_metadata_license");
    }
    if (u)
      for (a.subpacks = [], d = $(".subpacks.tab-children").length, c = 0; c < d; c++)
        (b = c + 1),
          (a.subpacks[c] = {}),
          (b = $("div.subpacks.tab-content-list > div:nth-child(" + b + ")")),
          (a.subpacks[c].folder_name = b.find("#subpacks_folder_name").val()),
          (a.subpacks[c].name = "replace_subpacks_name"),
          (a.subpacks[c].memory_tier = Number(b.find("#subpacks_memory_tier").val()));
    return W(JSON.stringify(a, null, "  "));
  }
  function W(a) {
    a = a.replace("replace_header_pack_name", $("#header_pack_name").val());
    a = a.replace("replace_header_description", $("#header_description").val());
    var d = JSON.stringify([
        Number($("#header_version_major").val()),
        Number($("#header_version_minor").val()),
        Number($("#header_version_patch").val()),
      ])
        .split(/,/)
        .join(", "),
      c = JSON.stringify([
        Number($("#header_min_engine_version_major").val()),
        Number($("#header_min_engine_version_minor").val()),
        Number($("#header_min_engine_version_patch").val()),
      ])
        .split(/,/)
        .join(", "),
      b = JSON.stringify([
        Number($("#header_base_game_version_major").val()),
        Number($("#header_base_game_version_minor").val()),
        Number($("#header_base_game_version_patch").val()),
      ])
        .split(/,/)
        .join(", ");
    a = a.replace('"replace_header_version"', d);
    a = n
      ? a.replace('"replace_base_game_version"', b)
      : a.replace('"replace_header_min_engine_version"', c);
    for (d = 0; d < $(".modules.tab-children").length; d++)
      (c = d + 1),
        (a = a.replace(
          "replace_modules_" + d + "_description",
          $(".modules.tab-content-list > div:nth-child(" + c + ") #modules_description").val()
        )),
        (c = JSON.stringify([
          Number(
            $(".modules.tab-content-list > div:nth-child(" + c + ") #modules_version_major").val()
          ),
          Number(
            $(".modules.tab-content-list > div:nth-child(" + c + ") #modules_version_minor").val()
          ),
          Number(
            $(".modules.tab-content-list > div:nth-child(" + c + ") #modules_version_patch").val()
          ),
        ])
          .split(/,/)
          .join(", ")),
        (a = a.replace('"replace_modules_' + d + '_version"', c));
    if (q)
      for (d = $(".dependencies.tab-children").length, c = 0; c < d; c++)
        (b = $("div.dependencies.tab-content-list > div:nth-child(" + (c + 1) + ")")),
          (b = JSON.stringify([
            Number(b.find("#dependencies_version_major").val()),
            Number(b.find("#dependencies_version_minor").val()),
            Number(b.find("#dependencies_version_patch").val()),
          ])
            .split(/,/)
            .join(", ")),
          (a = a.replace('"replace_dependencies_' + c + '_version"', b));
    d = $("label.author-name").length;
    for (c = 0; c < d; c++)
      a = a.replace("replace_" + c + "_author", $("input.metadata_author").eq(c).val());
    a = a.replace("replace_metadata_url", $("#metadata_url").val());
    a = a.replace("replace_metadata_license", $("#metadata_license").val());
    d = $(".subpacks.tab-children").length;
    for (c = 0; c < d; c++)
      a = a.replace(
        "replace_subpacks_name",
        $("div.subpacks.tab-content-list > div:nth-child(" + (c + 1) + ") #subpacks_name").val()
      );
    return a;
  }
  var E = !1,
    x = 2,
    A = !1,
    q = !1,
    D = !1,
    B = !1,
    u = !1,
    n = !1,
    w = !1,
    G,
    F = !0,
    v = 0;
  t();
  $(window).bind("beforeunload", function () {
    if (E)
      return "\u3053\u306e\u30da\u30fc\u30b8\u3092\u96e2\u308c\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002";
  });
  $(document).on("change", "input,textarea,select", function () {
    t();
    E = !0;
  });
  $(document).on("keyup", "input,textarea,select", function () {
    t();
    E = !0;
  });
  $("textarea").on("keydown", function (a) {
    if ("Enter" == a.key) return !1;
  });
  $(".separator").on("mousedown", function () {
    A ? A && (A = !1) : (A = !0);
  });
  $(document).on("mouseup", function () {
    A = !1;
    $("html").css("cursor", "");
    var a = $(".separator");
    a.prev().removeClass("drag-lock");
    a.next().removeClass("drag-lock");
  });
  $(document).on("mousemove", function (a) {
    if (A) {
      $("html").css("cursor", "e-resize");
      var d = $(".separator");
      d.prev().addClass("drag-lock");
      d.next().addClass("drag-lock");
      var c = $("html").width() - 2;
      a = c - a.clientX;
      c -= a;
      d.next().css("flex-basis", a);
      d.prev().css("flex-basis", c);
    }
  });
  $("#page-share").on("click", function () {
    var a = {
      title: "\u3068\u304b\u3055\u3093\u306e Manifest Generator",
      text: "\u3068\u304b\u3055\u3093\u306e Manifest Generator -manifest.json\u3092\u7c21\u5358\u306b\u4f5c\u6210\u30fb\u7de8\u96c6-",
      url: "https://toka7290.github.io/MCAddonSetupManager/",
    };
    navigator.share && navigator.share(a);
  });
  $("#input-file").on("change", function () {
    p();
  });
  $("#show_help").on("click", function () {
    $("#page-help").fadeIn("fast");
    y();
  });
  $("#page-help").on("click", function () {
    y();
  });
  $(document).on("dragenter dragover", function (a) {
    a.stopPropagation();
    a.preventDefault();
    $(".file-drop-zone").removeClass("hide");
  });
  $(".file-drop-zone,.file-drop-zone-textarea").on("dragleave", function (a) {
    a.stopPropagation();
    a.preventDefault();
    $(".file-drop-zone").addClass("hide");
  });
  $(document).on("drop", function (a) {
    E = !0;
    $(".file-drop-zone").addClass("hide");
    var d = a;
    a.originalEvent && (d = a.originalEvent);
    d.stopPropagation();
    d.preventDefault();
    $("#input-file").prop("files", d.dataTransfer.files);
    p();
  });
  $("div#show-preview").on("click", function () {
    var a = $("div#show-preview");
    $("div.preview").slideToggle();
    a.hasClass("active") ? a.removeClass("active") : a.addClass("active");
  });
  $(window).resize(function () {
    $("div.preview").css("display", "");
    $("div.editor").css("flex-basis", "");
    $("div.data_check").css("flex-basis", "");
    v = 5;
    y();
  });
  $("#open-about").on("click", function () {
    $("div.page-about").removeClass("about-hide");
  });
  $("#close-about-btn").on("click", function () {
    $("div.page-about").addClass("about-hide");
  });
  $("#control_copy").on("click", function () {
    var a = $("textarea#code-buffer");
    a.select();
    document.execCommand("copy");
    $("p#control_copy_text").text("Copied");
    a.blur();
    setTimeout(function () {
      $("p#control_copy_text").text("Copy");
    }, 1e3);
  });
  $("#control_download").on("click", function () {
    var a = $("textarea#code-buffer").val();
    $("<a></a>", {
      href: window.URL.createObjectURL(new Blob([a])),
      download: "manifest.json",
      target: "_blank",
    })[0].click();
  });
  $("#issue-control").on("click", function () {
    var a = $("div.issue-status-label svg");
    a.hasClass("close") ? a.attr("class", "open") : a.attr("class", "close");
    $("div.issue_content").slideToggle();
  });
  $("#format_version").on("change", function () {
    x = Number($("#format_version").val());
  });
  $(document).on("click", 'input[type="button"].generate_uuid', function () {
    $(this).parents("div.type-uuid").find('input[type="text"]').val(r);
    t();
  });
  $(document).on("click", ".tab-children:not(.selected)>input", function () {
    var a = $(this).attr("class");
    if ("modules" == a || (q && "dependencies" == a) || (u && "subpacks" == a)) {
      var d = $(this).parent(),
        c = d.index();
      $("." + a + ".tab-children").removeClass("selected");
      d.addClass("selected");
      $("." + a + ".tab-content-list>div")
        .removeClass("selected-tab-content")
        .eq(c)
        .addClass("selected-tab-content");
    }
  });
  $("#modules-delete,#dependencies-delete,#subpacks-delete").on("click", function (a) {
    var d = "." + $(this).attr("class"),
      c = $(d + ".tab-children");
    if (
      1 < c.length &&
      ($(this).hasClass("modules") ||
        (u && $(this).hasClass("subpacks")) ||
        (q && $(this).hasClass("dependencies")))
    ) {
      $(d + ".tab-children.selected").remove();
      $(d + ".tab-content-list>.selected-tab-content").remove();
      c = $(d + ".tab-children");
      d = $(d + ".tab-content-list>div");
      for (var b = 0, e = 0; e < c.length; e++) {
        var g = c.eq(e),
          l = d.eq(e);
        0 == e && (g.addClass("selected"), l.addClass("selected-tab-content"));
        g.children("div.tab-number").text(b);
        b++;
      }
    }
    t();
    a.stopPropagation();
  });
  $("#modules_add,#dependencies_add,#subpacks_add").on("click", function () {
    ($(this).hasClass("modules") ||
      (u && $(this).hasClass("subpacks")) ||
      (q && $(this).hasClass("dependencies"))) &&
      f($(this).attr("class"));
    t();
  });
  $("#author-add").on("click", function () {
    h();
    t();
  });
  $("#author-delete").on("click", function () {
    $("div.authors_list>.author-name:last-child").remove();
    t();
  });
});
