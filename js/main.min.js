function C(f){var g=0;return function(){return g<f.length?{done:!1,value:f[g++]}:{done:!0}}}function G(f){var g="undefined"!=typeof Symbol&&Symbol.iterator&&f[Symbol.iterator];return g?g.call(f):{next:C(f)}}var L="function"==typeof Object.defineProperties?Object.defineProperty:function(f,g,h){if(f==Array.prototype||f==Object.prototype)return f;f[g]=h.value;return f};
function M(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var g=0;g<f.length;++g){var h=f[g];if(h&&h.Math==Math)return h}throw Error("Cannot find global object");}var N=M(this);function Q(f,g){if(g)a:{var h=N;f=f.split(".");for(var k=0;k<f.length-1;k++){var n=f[k];if(!(n in h))break a;h=h[n]}f=f[f.length-1];k=h[f];g=g(k);g!=k&&null!=g&&L(h,f,{configurable:!0,writable:!0,value:g})}}
Q("Array.prototype.find",function(f){return f?f:function(g,h){a:{var k=this;k instanceof String&&(k=String(k));for(var n=k.length,q=0;q<n;q++){var x=k[q];if(g.call(h,x,q,k)){g=x;break a}}g=void 0}return g}});
Q("Symbol",function(f){function g(n){if(this instanceof g)throw new TypeError("Symbol is not a constructor");return new h("jscomp_symbol_"+(n||"")+"_"+k++,n)}function h(n,q){this.a=n;L(this,"description",{configurable:!0,writable:!0,value:q})}if(f)return f;h.prototype.toString=function(){return this.a};var k=0;return g});
Q("Symbol.iterator",function(f){if(f)return f;f=Symbol("Symbol.iterator");for(var g="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),h=0;h<g.length;h++){var k=N[g[h]];"function"===typeof k&&"function"!=typeof k.prototype[f]&&L(k.prototype,f,{configurable:!0,writable:!0,value:function(){return R(C(this))}})}return f});function R(f){f={next:f};f[Symbol.iterator]=function(){return this};return f}
function S(f,g){f instanceof String&&(f+="");var h=0,k=!1,n={next:function(){if(!k&&h<f.length){var q=h++;return{value:g(q,f[q]),done:!1}}k=!0;return{done:!0,value:void 0}}};n[Symbol.iterator]=function(){return n};return n}Q("Array.prototype.keys",function(f){return f?f:function(){return S(this,function(g){return g})}});
$(function(){function f(){H=!1;"number"===typeof I&&window.clearTimeout(I);I=window.setTimeout(function(){H=!0;O()},500)}function g(){for(var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""),d=0,a=c.length;d<a;d++)switch(c[d]){case "x":c[d]=Math.floor(16*Math.random()).toString(16);break;case "y":c[d]=(Math.floor(4*Math.random())+8).toString(16)}return c.join("")}function h(){var c=$(".modules_controls_tab"),d="<li>"+c.children("li").length+'<span class="delete_tab">\u00d7</span></li>';c.append(d);
c.children("li:last-child").hide().show(150);c=$(".modules_contents > div:first-child").clone();c.removeClass("selected_tab_content");$(".modules_contents").append(c)}function k(c){var d=$("<li>").text(c.children("li").length).append($("<span>").addClass("delete_tab").text("\u00d7"));c.append(d);c.children("li:last-child").hide().show(150);c=c.parents(".tab_controls").next();d=c.children("div:first-child").clone();d.removeClass("selected_tab_content");c.append(d)}function n(c){var d=$(document).find(".metadata_author_list"),
a=$("<div>");a.append($("<span>").addClass("name").text(c));a.append($("<span>").addClass("metadata_delete_author").text("\u00d7"));d.append(a);d.children("div:last-child").hide().show(150)}function q(){var c=$("#input_file").prop("files")[0],d=new FileReader;d.onload=function(){a:{var a={};try{a=JSON.parse(d.result)}catch(p){window.alert("\u6709\u52b9\u306ajson\u3067\u306f\u3042\u308a\u307e\u305b\u3093");console.error("error:"+p);break a}if(null!=a.format_version)$("#format_version").val(a.format_version);
else if(null!=a.header.modules){null!=a.header.pack_id&&$("#header_uuid").val(a.header.pack_id);null!=a.header.name&&$("#header_pack_name").val(a.header.name);if(null!=a.header.packs_version){var b=a.header.packs_version.split(".");null!=b[0]&&$("#header_version_major").val(b[0]);null!=b[1]&&$("#header_version_minor").val(b[1]);null!=b[2]&&$("#header_version_patch").val(b[2])}null!=a.header.description&&$("#header_description").val(a.header.description);if(null!=a.header.modules)for(b=0;b<a.header.modules.length;b++){var e=
b+1;0<b&&h();null!=a.header.modules[b].type&&$("div.modules_contents > div:nth-child("+e+") #modules_type").val(a.header.modules[b].type);null!=a.header.modules[b].description&&$("div.modules_contents > div:nth-child("+e+") #modules_description").val(a.header.modules[b].description);if(null!=a.header.modules[b].version){var l=a.header.modules[b].version.split(".");null!=l[0]&&$("div.modules_contents > div:nth-child("+e+") #modules_version_major").val(l[0]);null!=l[1]&&$("div.modules_contents > div:nth-child("+
e+") #modules_version_minor").val(l[1]);null!=l[2]&&$("div.modules_contents > div:nth-child("+e+") #modules_version_patch").val(l[2])}null!=a.header.modules[b].uuid&&$("div.modules_contents > div:nth-child("+e+") #modules_uuid").val(a.header.modules[b].uuid)}if(null!=a.header.dependencies)for($("#dependencies_enable").prop("checked",!0),b=0;b<a.header.dependencies.length;b++)e=b+1,0<b&&k($(".dependencies.tab_controls_bar_tab")),e=$("div.dependencies.tab_content_list > div:nth-child("+e+")"),null!=
a.header.dependencies[b].uuid&&e.find("#dependencies_uuid").val(a.header.dependencies[b].uuid),null!=a.header.dependencies[b].version&&(l=a.header.dependencies[b].version.split("."),null!=l[0]&&e.find("#dependencies_version_major").val(l[0]),null!=l[1]&&e.find("#dependencies_version_minor").val(l[1]),null!=l[2]&&e.find("#dependencies_version_patch").val(l[2]));window.alert("\u53e4\u3044\u5f62\u5f0f(pack_manifest.json)\u304b\u3089\u5909\u63db\u3057\u307e\u3059\u3002");r();break a}null!=a.header.name&&
$("#header_pack_name").val(a.header.name);null!=a.header.description&&$("#header_description").val(a.header.description);null!=a.header.version&&(null!=a.header.version[0]&&$("#header_version_major").val(a.header.version[0]),null!=a.header.version[1]&&$("#header_version_minor").val(a.header.version[1]),null!=a.header.version[2]&&$("#header_version_patch").val(a.header.version[2]));null!=a.header.min_engine_version&&(null!=a.header.min_engine_version[0]&&$("#header_min_engine_version_major").val(a.header.min_engine_version[0]),
null!=a.header.min_engine_version[1]&&$("#header_min_engine_version_minor").val(a.header.min_engine_version[1]),null!=a.header.min_engine_version[2]&&$("#header_min_engine_version_patch").val(a.header.min_engine_version[2]));null!=a.header.uuid&&$("#header_uuid").val(a.header.uuid);null!=a.header.platform_locked&&a.header.platform_locked&&$("#header_platform_locked").prop("checked",!0);null!=a.header.base_game_version&&(null!=a.header.base_game_version[0]&&$("#header_base_game_version_major").val(a.header.base_game_version[0]),
null!=a.header.base_game_version[1]&&$("#header_base_game_version_minor").val(a.header.base_game_version[1]),null!=a.header.base_game_version[2]&&$("#header_base_game_version_patch").val(a.header.base_game_version[2]));null!=a.header.lock_template_options&&a.header.lock_template_options&&$("#header_lock_template_options").prop("checked",!0);if(null!=a.modules)for(b=0;b<a.modules.length;b++)e=b+1,0<b&&h(),null!=a.modules[b].type&&$("div.modules_contents > div:nth-child("+e+") #modules_type").val(a.modules[b].type),
null!=a.modules[b].description&&$("div.modules_contents > div:nth-child("+e+") #modules_description").val(a.modules[b].description),null!=a.modules[b].version&&(null!=a.modules[b].version[0]&&$("div.modules_contents > div:nth-child("+e+") #modules_version_major").val(a.modules[b].version[0]),null!=a.modules[b].version[1]&&$("div.modules_contents > div:nth-child("+e+") #modules_version_minor").val(a.modules[b].version[1]),null!=a.modules[b].version[2]&&$("div.modules_contents > div:nth-child("+e+") #modules_version_patch").val(a.modules[b].version[2])),
null!=a.modules[b].uuid&&$("div.modules_contents > div:nth-child("+e+") #modules_uuid").val(a.modules[b].uuid);if(null!=a.dependencies)for($("#dependencies_enable").prop("checked",!0),b=0;b<a.dependencies.length;b++)e=b+1,0<b&&k($(".dependencies.tab_controls_bar_tab")),e=$("div.dependencies.tab_content_list > div:nth-child("+e+")"),null!=a.dependencies[b].uuid&&e.find("#dependencies_uuid").val(a.dependencies[b].uuid),null!=a.dependencies[b].version&&(null!=a.dependencies[b].version[0]&&e.find("#dependencies_version_major").val(a.dependencies[b].version[0]),
null!=a.dependencies[b].version[1]&&e.find("#dependencies_version_minor").val(a.dependencies[b].version[1]),null!=a.dependencies[b].version[2]&&e.find("#dependencies_version_patch").val(a.dependencies[b].version[2]));if(null!=a.capabilities)for($("#capabilities_enable").prop("checked",!0),b=G(a.capabilities),e=b.next();!e.done;e=b.next())switch(e.value){case "experimental_custom_ui":$("#experimental_custom_ui").prop("checked",!0);break;case "chemistry":$("#chemistry").prop("checked",!0);break;case "raytracing":$("#raytracing").prop("checked",
!0)}if(null!=a.metadata){$("#metadata_enable").prop("checked",!0);if(null!=a.metadata.authors)for(b=G(a.metadata.authors),e=b.next();!e.done;e=b.next())n(e.value);null!=a.metadata.url&&$("#metadata_url").val(a.metadata.url);null!=a.metadata.license&&$("#metadata_license").val(a.metadata.license)}if(null!=a.subpacks)for($("#subpacks_enable").prop("checked",!0),b=0;b<a.subpacks.length;b++)e=b+1,0<b&&k($(".subpacks.tab_controls_bar_tab")),e=$("div.subpacks.tab_content_list > div:nth-child("+e+")"),null!=
a.subpacks[b].folder_name&&e.find("#subpacks_folder_name").val(a.subpacks[b].folder_name),null!=a.subpacks[b].name&&e.find("#subpacks_name").val(a.subpacks[b].name),null!=a.subpacks[b].memory_tier&&e.find("#subpacks_memory_tier").val(a.subpacks[b].memory_tier);r()}};try{d.readAsText(c)}catch(a){console.error("error:"+a)}}function x(){switch(v){case 1:$("#help_content_1").fadeOut("fast");$("#help_content_2").slideToggle("fast");v++;break;case 2:$("#help_content_2").slideToggle("fast");$("#help_content_3").fadeIn("fast");
v++;break;case 3:$("#help_content_3").fadeOut("fast");$("#page_help").hide();v=0;break;case 5:$("#help_content_1").hide();$("#help_content_2").hide();$("#help_content_3").hide();$("#page_help").hide();v=0;break;default:$("#help_content_1").fadeIn("fast"),v++}}function r(){t=$("#dependencies_enable").is(":checked")||$("#dependencies_enable").is(":indeterminate");D=$("#capabilities_enable").is(":checked")||$("#capabilities_enable").is(":indeterminate");y=$("#metadata_enable").is(":checked")||$("#metadata_enable").is(":indeterminate");
w=$("#subpacks_enable").is(":checked")||$("#subpacks_enable").is(":indeterminate");t?($("div.dependencies.tab_contents").removeClass("disabled"),$("div.dependencies.tab_contents input").prop("disabled",!1),$("div.dependencies.tab_contents .tab_controls_bar").removeClass("disabled"),""==$("#dependencies_uuid").val()?$("#dependencies_enable").prop("indeterminate",!0):$("#dependencies_enable").prop("indeterminate",!1)):($("div.dependencies.tab_contents").addClass("disabled"),$("div.dependencies.tab_contents input").prop("disabled",
!0),$("div.dependencies.tab_contents .tab_controls_bar").addClass("disabled"));D?($(".capabilities_list").removeClass("disabled"),$("div.capabilities_list input").prop("disabled",!1),$("div.capabilities_list div input").is(":checked")?$("#capabilities_enable").prop("indeterminate",!1):$("#capabilities_enable").prop("indeterminate",!0)):($(".capabilities_list").addClass("disabled"),$("div.capabilities_list input").prop("disabled",!0));y?($(".metadata_list").removeClass("disabled"),$("div.metadata_list input").prop("disabled",
!1),$("div.metadata_author_list > div")[0]&&""!=$("#metadata_url").val()&&""!=$("#metadata_license").val()?$("#metadata_enable").prop("indeterminate",!1):$("#metadata_enable").prop("indeterminate",!0)):($(".metadata_list").addClass("disabled"),$("div.metadata_list input").prop("disabled",!0));w?($("div.subpacks.tab_contents").removeClass("disabled"),$("div.subpacks.tab_contents input").prop("disabled",!1),$("div.subpacks.tab_contents .tab_controls_bar").removeClass("disabled"),""==$("#subpacks_folder_name").val()&&
""==$("#subpacks_name").val()?$("#subpacks_enable").prop("indeterminate",!0):$("#subpacks_enable").prop("indeterminate",!1)):($("div.subpacks.tab_contents").addClass("disabled"),$("div.subpacks.tab_contents input").prop("disabled",!0),$("div.subpacks.tab_contents .tab_controls_bar").addClass("disabled"));T();H&&O();f();var c={};c.format_version=z;c.header={};c.header.name=$("#header_pack_name").val();c.header.description=$("#header_description").val();c.header.version="replace_header_version";B||
(c.header.min_engine_version="replace_header_min_engine_version");c.header.uuid=$("#header_uuid").val();$("#header_platform_locked").is(":checked")&&(c.header.platform_locked=!0);B&&(2<=z&&(c.header.base_game_version="replace_base_game_version"),c.header.lock_template_options=$("#header_lock_template_options").is(":checked"));c.modules=[];for(var d=$(".modules_controls_tab li").length,a=0;a<d;a++){var b=a+1;c.modules[a]={};c.modules[a].type=$("div.modules_contents > div:nth-child("+b+") #modules_type").val();
c.modules[a].description=$("div.modules_contents > div:nth-child("+b+") #modules_description").val();c.modules[a].version="replace_modules_"+a+"_version";c.modules[a].uuid=$("div.modules_contents > div:nth-child("+b+") #modules_uuid").val()}if(t)for(c.dependencies=[],d=$(".dependencies.tab_controls_bar_tab li").length,a=0;a<d;a++)b=$("div.dependencies.tab_content_list > div:nth-child("+(a+1)+")"),c.dependencies[a]={},c.dependencies[a].uuid=b.find("#dependencies_uuid").val(),c.dependencies[a].version=
"replace_dependencies_"+a+"_version";D&&$("div.capabilities_list div input").is(":checked")&&(c.capabilities=[],$("#experimental_custom_ui").is(":checked")&&c.capabilities.push("experimental_custom_ui"),$("#chemistry").is(":checked")&&c.capabilities.push("chemistry"),$("#raytracing").is(":checked")&&c.capabilities.push("raytracing"));if(y&&($("div.metadata_author_list > div")[0]||""!=$("#metadata_url").val()||""!=$("#metadata_license").val())){c.metadata={};if($("div.metadata_author_list > div")[0])for(c.metadata.authors=
[],d=$("div.metadata_author_list > div").length,a=1;a<=d;a++)c.metadata.authors.push($("div.metadata_author_list > div:nth-child("+a+") > span.name").text());""!=$("#metadata_url").val()&&(c.metadata.url=$("#metadata_url").val());""!=$("#metadata_license").val()&&(c.metadata.license=$("#metadata_license").val())}if(w)for(c.subpacks=[],d=$(".subpacks.tab_controls_bar_tab li").length,a=0;a<d;a++)b=a+1,c.subpacks[a]={},b=$("div.subpacks.tab_content_list > div:nth-child("+b+")"),c.subpacks[a].folder_name=
b.find("#subpacks_folder_name").val(),c.subpacks[a].name=b.find("#subpacks_name").val(),c.subpacks[a].memory_tier=Number(b.find("#subpacks_memory_tier").val());c=JSON.stringify(c,null,"  ");d=JSON.stringify([Number($("#header_version_major").val()),Number($("#header_version_minor").val()),Number($("#header_version_patch").val())]).split(/,/).join(", ");a=JSON.stringify([Number($("#header_min_engine_version_major").val()),Number($("#header_min_engine_version_minor").val()),Number($("#header_min_engine_version_patch").val())]).split(/,/).join(", ");
b=JSON.stringify([Number($("#header_base_game_version_major").val()),Number($("#header_base_game_version_minor").val()),Number($("#header_base_game_version_patch").val())]).split(/,/).join(", ");c=c.replace('"replace_header_version"',d);c=B?c.replace('"replace_base_game_version"',b):c.replace('"replace_header_min_engine_version"',a);for(d=0;d<$(".modules_controls_tab li").length;d++)a=d+1,a=JSON.stringify([Number($("div.modules_contents > div:nth-child("+a+") #modules_version_major").val()),Number($("div.modules_contents > div:nth-child("+
a+") #modules_version_minor").val()),Number($("div.modules_contents > div:nth-child("+a+") #modules_version_patch").val())]).split(/,/).join(", "),c=c.replace('"replace_modules_'+d+'_version"',a);if(t)for(d=$(".dependencies.tab_controls_bar_tab li").length,a=0;a<d;a++)b=$("div.dependencies.tab_content_list > div:nth-child("+(a+1)+")"),b=JSON.stringify([Number(b.find("#dependencies_version_major").val()),Number(b.find("#dependencies_version_minor").val()),Number(b.find("#dependencies_version_patch").val())]).split(/,/).join(", "),
c=c.replace('"replace_dependencies_'+a+'_version"',b);$("pre.language-json code.language-json").remove();d='<code class="language-json">'+c+"</code>";$("pre.language-json").append(d);$("textarea#code_buffer").val(c);Prism.highlightAll()}function T(){B=!1;var c=[!1,!1,!1,!1,!1],d={resources:0,data:1,client_data:2,"interface":3,world_template:4},a=$("#header_min_engine_version");a.removeClass("disabled");var b=a.find("input").prop("disabled",!1),e=$("#header_base_game_version");e.addClass("disabled");
var l=e.find("input").prop("disabled",!0),p=$("#header_lock_template_options");p.parent().addClass("disabled");p.prop("disabled",!0);for(var u=$(".modules_controls_tab li").length,E=1;E<=u;E++){var J=$("div.modules_contents > div:nth-child("+E+") #modules_type");J.children("option").prop("disabled",!1);var P=J.val();if(c[d[P]]||1==E)switch(P){case "data":c[2]=!0;break;case "client_data":c[1]=!0;break;case "world_template":B=!0,a.addClass("disabled"),b.prop("disabled",!0),2<=z&&(e.removeClass("disabled"),
l.prop("disabled",!1)),p.parent().removeClass("disabled"),p.prop("disabled",!1)}else J.val(Object.keys(d)[c.indexOf(!0)]);U(u,c,d)}c.some(function(V){return V})&&1>=u?$(".modules_controls_add_tab").show(150):$(".modules_controls_add_tab").hide(150)}function U(c,d,a){for(var b=2;b<=c;b++)for(var e in a){var l=$("div.modules_contents > div:nth-child("+b+") #modules_type option[value="+e+"]");d[a[e]]?l.prop("disabled",!1):l.prop("disabled",!0)}}function O(){$("ul.issue_list li").remove();$(".stat_warning,.stat_error").removeClass("stat_warning stat_error");
var c=0;switch(z){case 2:1>=Number($("#header_min_engine_version_major").val())&&13>Number($("#header_min_engine_version_minor").val())&&(m("error","[Header:min engine version] version1.12\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002",$("#header_min_engine_version_major").parent().find("input")),c++),1>=Number($("#header_base_game_version_major").val())&&13>Number($("#header_base_game_version_minor").val())&&(m("error","[Header:base game version] version1.12\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002",
$("#header_base_game_version_major").parent().find("input")),c++)}K($("#header_uuid").val())||(m("error","[Header:uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",$("#header_uuid")),c++);for(var d=$(".modules_controls_tab li").length,a=0;a<d;a++){var b=a+1,e=$("div.modules_contents > div:nth-child("+b+") #modules_type");null==e.val()&&(m("error","[Modules:"+a+":type] type\u304cnull\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002type\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002",
e),c++);b=$("div.modules_contents > div:nth-child("+b+") #modules_uuid");K(b.val())||(m("error","[Modules:"+a+":uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",b),c++)}if(t)for(d=$(".dependencies.tab_controls_bar_tab li").length,a=0;a<d;a++)b=$("div.dependencies.tab_content_list > div:nth-child("+(a+1)+") #dependencies_uuid"),K(b.val())||(m("error","[Dependencies:"+a+":uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",
b),c++);if(w)for(d=$(".subpacks.tab_controls_bar_tab li").length,a=0;a<d;a++){b=$("div.subpacks.tab_content_list > div:nth-child("+(a+1)+")");e=b.find("#subpacks_folder_name");if(null==e.val()||""==e.val())m("error","[Subpacks:"+a+":folder_name] \u30d5\u30a9\u30eb\u30c0\u30fc\u540d\u304c\u7a7a\u3067\u3059\u3002",e),c++;b=b.find("#subpacks_name");if(null==b.val()||""==b.val())m("error","[Subpacks:"+a+":name] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002",b),c++}d=0;switch(z){case 1:if(1<Number($("#header_min_engine_version_major").val())||
13<=Number($("#header_min_engine_version_minor").val()))m("warning","[Header:min engine version] \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f31\u3067\u306f1.13\u3088\u308a\u4f4e\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3088\u308a\u9ad8\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f32\u3067\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002",
$("#header_min_engine_version_major").parent().find("input")),d++}""==$("#header_pack_name").val()&&(m("warning",'[Header:name] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002\u540d\u524d\u304c\u7a7a\u306e\u5834\u5408\u3001"\u540d\u524d\u304c\u3042\u308a\u307e\u305b\u3093"\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002',$("#header_pack_name")),d++);""==$("#header_description").val()&&(m("warning",'[Header:description] \u8aac\u660e\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u8aac\u660e\u304c\u7a7a\u306e\u5834\u5408\u3001"\u4e0d\u660e\u306a\u30d1\u30c3\u30af\u306e\u8aac\u660e"\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002',
$("#header_description")),d++);a=$(".modules_controls_tab li").length;for(b=0;b<a;b++)e=$("div.modules_contents > div:nth-child("+(b+1)+") #modules_description"),""==e.val()&&(m("warning","[Modules:"+b+":description] \u8aac\u660e\u304c\u3042\u308a\u307e\u305b\u3093\u3002",e),d++);!D||$("#experimental_custom_ui").is(":checked")||$("#chemistry").is(":checked")||$("#raytracing").is(":checked")||(m("warning","[Capabilities] \u9805\u76ee\u304c\u4e00\u3064\u3082\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",
$(".capabilities_list>input")),d++);if(y){if($("div.metadata_author_list > div")[0])for(a=$("div.metadata_author_list > div").length,b=1;b<=a;b++)e=$("div.metadata_author_list > div:nth-child("+b+") > span.name"),""==e.text()&&(m("warning","[Metadata:author] \u7a7a\u306e\u540d\u524d\u304c\u5b58\u5728\u3057\u3066\u3044\u307e\u3059\u3002",e),d++);else m("warning","[Metadata:author] \u540d\u524d\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",$("#metadata_author")),d++;""==$("#metadata_url").val()&&
(m("warning","[Metadata:url] URL\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",$("#metadata_url")),d++);""==$("#metadata_license").val()&&(m("warning","[Metadata:license] \u30e9\u30a4\u30bb\u30f3\u30b9\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",$("#metadata_license")),d++)}$("span.issue_warning_num").text("\u8b66\u544a:"+d);$("span.issue_error_num").text("\u30a8\u30e9\u30fc:"+c);0>=d&&0>=c&&$("ul.issue_list").append("<li>\u554f\u984c\u306f\u3042\u308a\u307e\u305b\u3093</li>")}
function m(c,d,a){var b="";"warning"==c?(b='<li><img src="img/warning.svg" alt=""><p>'+d+"</p></li>",a.addClass("stat_warning")):"error"==c&&(b='<li><img src="img/error.svg" alt=""><p>'+d+"</p></li>",a.addClass("stat_error"));$("ul.issue_list").append(b)}function K(c){return null===(void 0===c?"":c).match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$")?!1:!0}var F=!1,z=2,A=!1,t=!1,D=!1,y=!1,w=!1,B=!1,I,H=!0,v=0;r();$(window).bind("beforeunload",function(){if(F)return"\u3053\u306e\u30da\u30fc\u30b8\u3092\u96e2\u308c\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002"});
$(document).on("change","input,textarea,select",function(){r();F=!0});$(document).on("keyup","input,textarea,select",function(){r();F=!0});$(".separator").on("mousedown",function(){A?A&&(A=!1):A=!0});$(document).on("mouseup",function(){A=!1;$("html").css("cursor","");var c=$(".separator");c.prev().removeClass("drag_lock");c.next().removeClass("drag_lock")});$(document).on("mousemove",function(c){if(A){$("html").css("cursor","e-resize");var d=$(".separator");d.prev().addClass("drag_lock");d.next().addClass("drag_lock");
var a=$("html").width()-5;c=a-c.clientX;a-=c;d.next().css("flex-basis",c);d.prev().css("flex-basis",a)}});$("#page_share").on("click",function(){var c={title:"\u3068\u304b\u3055\u3093\u306eManifestGenerator",text:"\u3068\u304b\u3055\u3093\u306eManifestGenerator -manifest.json\u3092\u7c21\u5358\u306b\u4f5c\u6210\u30fb\u7de8\u96c6-",url:"https://toka7290.github.io/MCAddonSetupManager/"};navigator.share&&navigator.share(c)});$("#input_file").on("change",function(){q()});$("#show_help").on("click",function(){$("#page_help").fadeIn("fast");
x()});$("#page_help").on("click",function(){x()});$(document).on("dragenter dragover",function(c){c.stopPropagation();c.preventDefault();$(".file_drop_zone").removeClass("hide")});$(".file_drop_zone,.file_drop_zone_textarea").on("dragleave",function(c){c.stopPropagation();c.preventDefault();$(".file_drop_zone").addClass("hide")});$(document).on("drop",function(c){F=!0;$(".file_drop_zone").addClass("hide");var d=c;c.originalEvent&&(d=c.originalEvent);d.stopPropagation();d.preventDefault();$("#input_file").prop("files",
d.dataTransfer.files);q()});$("div#show_preview").on("click",function(){$("div.preview").slideToggle();"active"==this.attr("class")?this.removeClass("active"):this.addClass("active")});$(window).resize(function(){$("div.preview").css("display","");$("div.editor").css("flex-basis","");$("div.data_check").css("flex-basis","");v=5;x()});$("p#open_about").on("click",function(){$("div.page_about").fadeIn()});$("div.close_about").on("click",function(){$("div.page_about").fadeOut()});$("p.preview_control_copy").on("click",
function(){var c=$("textarea#code_buffer");c.select();document.execCommand("copy");$("p.preview_control_copy").text("Copied");c.blur();setTimeout(function(){$("p.preview_control_copy").text("Copy")},1E3)});$("p.preview_control_download").on("click",function(){var c=$("textarea#code_buffer").val();$("<a></a>",{href:window.URL.createObjectURL(new Blob([c])),download:"manifest.json",target:"_blank"})[0].click()});$("div.issue_control_bar").on("click",function(){var c=$("div.issue_control_bar img");c.hasClass("close")?
c.attr("class","open"):c.attr("class","close");$("div.issue_content").slideToggle()});$("#format_version").on("change",function(){z=Number($("#format_version").val())});$(document).on("click",'input[type="button"].generate_uuid',function(){$(this).prev().val(g);r()});$(document).on("click",".modules_controls_tab li",function(){var c=$(".modules_controls_tab li"),d=c.index(this);c.removeClass("selected_tab").eq(d).addClass("selected_tab");$(".modules_contents > div").removeClass("selected_tab_content").eq(d).addClass("selected_tab_content")});
$(document).on("click",".modules_controls_tab li span.delete_tab",function(c){var d=$(this).parent(),a=d.index(),b=$(".modules_controls_tab li"),e=b.length,l=$(".modules_contents > div");d.hide(150,function(){l.eq(a).remove();for(var p=0,u=0;u<e;u++)b.eq(u).html(p+'<span class="delete_tab">\u00d7</span>'),a!=u&&p++;d.hasClass("selected_tab")&&(0>a-1&&(a=e),b.eq(a-1).addClass("selected_tab"),l.eq(a-1).addClass("selected_tab_content"));d.remove();r()});c.stopPropagation()});$(".modules_controls_add_tab").on("click",
function(){h();r()});$(document).on("click",".tab_controls_bar_tab li",function(){if(w&&$(this).parents(".tab_controls").hasClass("subpacks")||t&&$(this).parents(".tab_controls").hasClass("dependencies")){var c=$(this).index(),d=$(this).parent(),a=d.children("li");a.removeClass("selected_tab");a.eq(c).addClass("selected_tab");d=d.parents(".tab_controls").next().children("div");d.removeClass("selected_tab_content");d.eq(c).addClass("selected_tab_content")}});$(document).on("click",".tab_controls_bar_tab li span.delete_tab",
function(c){if(w&&$(this).parents(".tab_controls").hasClass("subpacks")||t&&$(this).parents(".tab_controls").hasClass("dependencies")){var d=$(this).parent(),a=d.parent(),b=a.children("li"),e=d.index(),l=a.parents(".tab_controls").next().children("div");d.hide(150,function(){l.eq(e).remove();d.hasClass("selected_tab")&&(0>e-1&&(e=2),b.eq(e-1).addClass("selected_tab"),l.eq(e-1).addClass("selected_tab_content"));d.remove();b=a.children("li");for(var p=0;p<b.length;p++)b.eq(p).html(p+'<span class="delete_tab">\u00d7</span>');
r()})}c.stopPropagation()});$(".tab_controls_add_tab").on("click",function(){(w&&$(this).hasClass("subpacks")||t&&$(this).hasClass("dependencies"))&&k($(this).prev());r()});$("#metadata_author_add").on("click",function(){y&&(n($("#metadata_author").val()),$("#metadata_author").val(""));r()});$(document).on("click","span.metadata_delete_author",function(){if(y){var c=$(this).parent();c.hide(150,function(){c.remove();r()})}})});
