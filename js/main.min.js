function C(f){var g=0;return function(){return g<f.length?{done:!1,value:f[g++]}:{done:!0}}}function H(f){var g="undefined"!=typeof Symbol&&Symbol.iterator&&f[Symbol.iterator];return g?g.call(f):{next:C(f)}}var M="function"==typeof Object.defineProperties?Object.defineProperty:function(f,g,k){if(f==Array.prototype||f==Object.prototype)return f;f[g]=k.value;return f};
function N(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var g=0;g<f.length;++g){var k=f[g];if(k&&k.Math==Math)return k}throw Error("Cannot find global object");}var O=N(this);function R(f,g){if(g)a:{var k=O;f=f.split(".");for(var l=0;l<f.length-1;l++){var n=f[l];if(!(n in k))break a;k=k[n]}f=f[f.length-1];l=k[f];g=g(l);g!=l&&null!=g&&M(k,f,{configurable:!0,writable:!0,value:g})}}
R("Array.prototype.find",function(f){return f?f:function(g,k){a:{var l=this;l instanceof String&&(l=String(l));for(var n=l.length,q=0;q<n;q++){var y=l[q];if(g.call(k,y,q,l)){g=y;break a}}g=void 0}return g}});
R("Symbol",function(f){function g(n){if(this instanceof g)throw new TypeError("Symbol is not a constructor");return new k("jscomp_symbol_"+(n||"")+"_"+l++,n)}function k(n,q){this.g=n;M(this,"description",{configurable:!0,writable:!0,value:q})}if(f)return f;k.prototype.toString=function(){return this.g};var l=0;return g});
R("Symbol.iterator",function(f){if(f)return f;f=Symbol("Symbol.iterator");for(var g="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),k=0;k<g.length;k++){var l=O[g[k]];"function"===typeof l&&"function"!=typeof l.prototype[f]&&M(l.prototype,f,{configurable:!0,writable:!0,value:function(){return S(C(this))}})}return f});function S(f){f={next:f};f[Symbol.iterator]=function(){return this};return f}
function T(f,g){f instanceof String&&(f+="");var k=0,l=!1,n={next:function(){if(!l&&k<f.length){var q=k++;return{value:g(q,f[q]),done:!1}}l=!0;return{done:!0,value:void 0}}};n[Symbol.iterator]=function(){return n};return n}R("Array.prototype.keys",function(f){return f?f:function(){return T(this,function(g){return g})}});
$(function(){function f(){I=!1;"number"===typeof J&&window.clearTimeout(J);J=window.setTimeout(function(){I=!0;P()},500)}function g(){for(var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""),d=0,a=b.length;d<a;d++)switch(b[d]){case "x":b[d]=Math.floor(16*Math.random()).toString(16);break;case "y":b[d]=(Math.floor(4*Math.random())+8).toString(16)}return b.join("")}function k(){var b=$(".modules_controls_tab"),d="<li>"+b.children("li").length+'<span class="delete_tab">\u00d7</span></li>';b.append(d);
b.children("li:last-child").hide().show(150);b=$(".modules_contents > div:first-child").clone();b.removeClass("selected_tab_content");$(".modules_contents").append(b)}function l(b){b=void 0===b?"":b;var d=$(b+".tab_body"),a=d.children("label").length;d.append($("<label>").addClass("modules tab_children").append($("<input>").attr({type:"button",id:"modules_"+a}),$("<div>").addClass("tab_number").text(a),$("<div>").addClass("tab_underBar")));d.children("li:last-child").hide().show(150);b=$(b+".tab_content_list");
b.append(b.find("div:first-child").clone().removeClass("selected_tab_content"))}function n(b){var d=$(document).find("div.value_input.type_authors .authors_list"),a=$("<div>");a.append($("<span>").addClass("name").text(b));a.append($("<span>").addClass("metadata_delete_author").text("\u00d7"));d.append(a);d.children("div:last-child").hide().show(150)}function q(){var b=$("#input_file").prop("files")[0],d=new FileReader;d.onload=function(){a:{var a={};try{a=JSON.parse(d.result)}catch(p){window.alert("\u6709\u52b9\u306ajson\u3067\u306f\u3042\u308a\u307e\u305b\u3093");
console.error("error:"+p);break a}if(null!=a.format_version)$("#format_version").val(a.format_version);else if(null!=a.header.modules){null!=a.header.pack_id&&$("#header_uuid").val(a.header.pack_id);null!=a.header.name&&$("#header_pack_name").val(a.header.name);if(null!=a.header.packs_version){var c=a.header.packs_version.split(".");null!=c[0]&&$("#header_version_major").val(c[0]);null!=c[1]&&$("#header_version_minor").val(c[1]);null!=c[2]&&$("#header_version_patch").val(c[2])}null!=a.header.description&&
$("#header_description").val(a.header.description);if(null!=a.header.modules)for(c=0;c<a.header.modules.length;c++){var e=c+1;0<c&&k();null!=a.header.modules[c].type&&$("div.modules_contents > div:nth-child("+e+") #modules_type").val(a.header.modules[c].type);null!=a.header.modules[c].description&&$("div.modules_contents > div:nth-child("+e+") #modules_description").val(a.header.modules[c].description);if(null!=a.header.modules[c].version){var h=a.header.modules[c].version.split(".");null!=h[0]&&
$("div.modules_contents > div:nth-child("+e+") #modules_version_major").val(h[0]);null!=h[1]&&$("div.modules_contents > div:nth-child("+e+") #modules_version_minor").val(h[1]);null!=h[2]&&$("div.modules_contents > div:nth-child("+e+") #modules_version_patch").val(h[2])}null!=a.header.modules[c].uuid&&$("div.modules_contents > div:nth-child("+e+") #modules_uuid").val(a.header.modules[c].uuid)}if(null!=a.header.dependencies)for($("#dependencies_enable").prop("checked",!0),c=0;c<a.header.dependencies.length;c++)e=
c+1,0<c&&l($(".dependencies.tab_controls_bar_tab")),e=$("div.dependencies.tab_content_list > div:nth-child("+e+")"),null!=a.header.dependencies[c].uuid&&e.find("#dependencies_uuid").val(a.header.dependencies[c].uuid),null!=a.header.dependencies[c].version&&(h=a.header.dependencies[c].version.split("."),null!=h[0]&&e.find("#dependencies_version_major").val(h[0]),null!=h[1]&&e.find("#dependencies_version_minor").val(h[1]),null!=h[2]&&e.find("#dependencies_version_patch").val(h[2]));window.alert("\u53e4\u3044\u5f62\u5f0f(pack_manifest.json)\u304b\u3089\u5909\u63db\u3057\u307e\u3059\u3002");
r();break a}null!=a.header.name&&$("#header_pack_name").val(a.header.name);null!=a.header.description&&$("#header_description").val(a.header.description);null!=a.header.version&&(null!=a.header.version[0]&&$("#header_version_major").val(a.header.version[0]),null!=a.header.version[1]&&$("#header_version_minor").val(a.header.version[1]),null!=a.header.version[2]&&$("#header_version_patch").val(a.header.version[2]));null!=a.header.min_engine_version&&(null!=a.header.min_engine_version[0]&&$("#header_min_engine_version_major").val(a.header.min_engine_version[0]),
null!=a.header.min_engine_version[1]&&$("#header_min_engine_version_minor").val(a.header.min_engine_version[1]),null!=a.header.min_engine_version[2]&&$("#header_min_engine_version_patch").val(a.header.min_engine_version[2]));null!=a.header.uuid&&$("#header_uuid").val(a.header.uuid);null!=a.header.platform_locked&&a.header.platform_locked&&$("#header_platform_locked").prop("checked",!0);null!=a.header.base_game_version&&(null!=a.header.base_game_version[0]&&$("#header_base_game_version_major").val(a.header.base_game_version[0]),
null!=a.header.base_game_version[1]&&$("#header_base_game_version_minor").val(a.header.base_game_version[1]),null!=a.header.base_game_version[2]&&$("#header_base_game_version_patch").val(a.header.base_game_version[2]));null!=a.header.lock_template_options&&a.header.lock_template_options&&$("#header_lock_template_options").prop("checked",!0);if(null!=a.modules)for(c=0;c<a.modules.length;c++)e=c+1,0<c&&k(),null!=a.modules[c].type&&$("div.modules_contents > div:nth-child("+e+") #modules_type").val(a.modules[c].type),
null!=a.modules[c].description&&$("div.modules_contents > div:nth-child("+e+") #modules_description").val(a.modules[c].description),null!=a.modules[c].version&&(null!=a.modules[c].version[0]&&$("div.modules_contents > div:nth-child("+e+") #modules_version_major").val(a.modules[c].version[0]),null!=a.modules[c].version[1]&&$("div.modules_contents > div:nth-child("+e+") #modules_version_minor").val(a.modules[c].version[1]),null!=a.modules[c].version[2]&&$("div.modules_contents > div:nth-child("+e+") #modules_version_patch").val(a.modules[c].version[2])),
null!=a.modules[c].uuid&&$("div.modules_contents > div:nth-child("+e+") #modules_uuid").val(a.modules[c].uuid);if(null!=a.dependencies)for($("#dependencies_enable").prop("checked",!0),c=0;c<a.dependencies.length;c++)e=c+1,0<c&&l($(".dependencies.tab_controls_bar_tab")),e=$("div.dependencies.tab_content_list > div:nth-child("+e+")"),null!=a.dependencies[c].uuid&&e.find("#dependencies_uuid").val(a.dependencies[c].uuid),null!=a.dependencies[c].version&&(null!=a.dependencies[c].version[0]&&e.find("#dependencies_version_major").val(a.dependencies[c].version[0]),
null!=a.dependencies[c].version[1]&&e.find("#dependencies_version_minor").val(a.dependencies[c].version[1]),null!=a.dependencies[c].version[2]&&e.find("#dependencies_version_patch").val(a.dependencies[c].version[2]));if(null!=a.capabilities)for($("#capabilities_enable").prop("checked",!0),c=H(a.capabilities),e=c.next();!e.done;e=c.next())switch(e.value){case "experimental_custom_ui":$("#experimental_custom_ui").prop("checked",!0);break;case "chemistry":$("#chemistry").prop("checked",!0);break;case "raytracing":$("#raytracing").prop("checked",
!0)}if(null!=a.metadata){$("#metadata_enable").prop("checked",!0);if(null!=a.metadata.authors)for(c=H(a.metadata.authors),e=c.next();!e.done;e=c.next())n(e.value);null!=a.metadata.url&&$("#metadata_url").val(a.metadata.url);null!=a.metadata.license&&$("#metadata_license").val(a.metadata.license)}if(null!=a.subpacks)for($("#subpacks_enable").prop("checked",!0),c=0;c<a.subpacks.length;c++)e=c+1,0<c&&l($(".subpacks.tab_controls_bar_tab")),e=$("div.subpacks.tab_content_list > div:nth-child("+e+")"),null!=
a.subpacks[c].folder_name&&e.find("#subpacks_folder_name").val(a.subpacks[c].folder_name),null!=a.subpacks[c].name&&e.find("#subpacks_name").val(a.subpacks[c].name),null!=a.subpacks[c].memory_tier&&e.find("#subpacks_memory_tier").val(a.subpacks[c].memory_tier);r()}};try{d.readAsText(b)}catch(a){console.error("error:"+a)}}function y(){switch(v){case 1:$("#help_content_1").fadeOut("fast");$("#help_content_2").slideToggle("fast");v++;break;case 2:$("#help_content_2").slideToggle("fast");$("#help_content_3").fadeIn("fast");
v++;break;case 3:$("#help_content_3").fadeOut("fast");$("#page_help").hide();v=0;break;case 5:$("#help_content_1").hide();$("#help_content_2").hide();$("#help_content_3").hide();$("#page_help").hide();v=0;break;default:$("#help_content_1").fadeIn("fast"),v++}}function r(){t=$("#dependencies_enable").is(":checked")||$("#dependencies_enable").is(":indeterminate");D=$("#capabilities_enable").is(":checked")||$("#capabilities_enable").is(":indeterminate");w=$("#metadata_enable").is(":checked")||$("#metadata_enable").is(":indeterminate");
x=$("#subpacks_enable").is(":checked")||$("#subpacks_enable").is(":indeterminate");var b=$(".dependencies.tab_content_list div.value_element");t?(E(".dependencies",[1,1,1]),b.find("div.value_label").removeClass("disabled"),b.find("input").prop("disabled",!1),""==$("#dependencies_uuid").val()?$("#dependencies_enable").prop("indeterminate",!0):$("#dependencies_enable").prop("indeterminate",!1)):(E(".dependencies"),b.find("div.value_label").addClass("disabled"),b.find("input").prop("disabled",!0));b=
$(".capabilities_list .value_element");D?(b.removeClass("disabled"),b.find("input").prop("disabled",!1),$("div.capabilities_list div input").is(":checked")?$("#capabilities_enable").prop("indeterminate",!1):$("#capabilities_enable").prop("indeterminate",!0)):(b.addClass("disabled"),b.find("input").prop("disabled",!0));b=$(".metadata_list .value_element");w?(b.removeClass("disabled"),b.find("input").prop("disabled",!1),$("div.authors_list > div")[0]||""!=$("#metadata_url").val()||""!=$("#metadata_license").val()?
$("#metadata_enable").prop("indeterminate",!1):$("#metadata_enable").prop("indeterminate",!0)):(b.addClass("disabled"),b.find("input").prop("disabled",!0));b=$(".subpacks.tab_content_list div.value_element");x?(E(".subpacks",[1,1,1]),b.find("div.value_label").removeClass("disabled"),b.find("input").prop("disabled",!1),""==$("#subpacks_folder_name").val()&&""==$("#subpacks_name").val()?$("#subpacks_enable").prop("indeterminate",!0):$("#subpacks_enable").prop("indeterminate",!1)):(E(".subpacks"),b.find("div.value_label").addClass("disabled"),
b.find("input").prop("disabled",!0));U();I&&P();f();b={};b.format_version=z;b.header={};b.header.name="replace_header_pack_name";b.header.description="replace_header_description";b.header.version="replace_header_version";B||(b.header.min_engine_version="replace_header_min_engine_version");b.header.uuid=$("#header_uuid").val();$("#header_platform_locked").is(":checked")&&(b.header.platform_locked=!0);B&&(2<=z&&(b.header.base_game_version="replace_base_game_version"),b.header.lock_template_options=
$("#header_lock_template_options").is(":checked"));b.modules=[];for(var d=$(".modules_controls_tab li").length,a=0;a<d;a++){var c=a+1;b.modules[a]={};b.modules[a].type=$("div.modules_contents > div:nth-child("+c+") #modules_type").val();b.modules[a].description="replace_modules_"+a+"description";b.modules[a].version="replace_modules_"+a+"_version";b.modules[a].uuid=$("div.modules_contents > div:nth-child("+c+") #modules_uuid").val()}if(t)for(b.dependencies=[],d=$(".dependencies.tab_controls_bar_tab li").length,
a=0;a<d;a++)c=$("div.dependencies.tab_content_list > div:nth-child("+(a+1)+")"),b.dependencies[a]={},b.dependencies[a].uuid=c.find("#dependencies_uuid").val(),b.dependencies[a].version="replace_dependencies_"+a+"_version";D&&$("div.capabilities_list div input").is(":checked")&&(b.capabilities=[],$("#experimental_custom_ui").is(":checked")&&b.capabilities.push("experimental_custom_ui"),$("#chemistry").is(":checked")&&b.capabilities.push("chemistry"),$("#raytracing").is(":checked")&&b.capabilities.push("raytracing"));
if(w&&($("div.authors_list > div")[0]||""!=$("#metadata_url").val()||""!=$("#metadata_license").val())){b.metadata={};if($("div.authors_list > div")[0])for(b.metadata.authors=[],d=$("div.authors_list > div").length,a=1;a<=d;a++)b.metadata.authors.push("replace_"+a+"author");""!=$("#metadata_url").val()&&(b.metadata.url="replace_metadata_url");""!=$("#metadata_license").val()&&(b.metadata.license="replace_metadata_license")}if(x)for(b.subpacks=[],d=$(".subpacks.tab_controls_bar_tab li").length,a=0;a<
d;a++)c=a+1,b.subpacks[a]={},c=$("div.subpacks.tab_content_list > div:nth-child("+c+")"),b.subpacks[a].folder_name=c.find("#subpacks_folder_name").val(),b.subpacks[a].name="replace_subpacks_name",b.subpacks[a].memory_tier=Number(c.find("#subpacks_memory_tier").val());b=JSON.stringify(b,null,"  ");b=b.replace("replace_header_pack_name",$("#header_pack_name").val());b=b.replace("replace_header_description",$("#header_description").val());d=JSON.stringify([Number($("#header_version_major").val()),Number($("#header_version_minor").val()),
Number($("#header_version_patch").val())]).split(/,/).join(", ");a=JSON.stringify([Number($("#header_min_engine_version_major").val()),Number($("#header_min_engine_version_minor").val()),Number($("#header_min_engine_version_patch").val())]).split(/,/).join(", ");c=JSON.stringify([Number($("#header_base_game_version_major").val()),Number($("#header_base_game_version_minor").val()),Number($("#header_base_game_version_patch").val())]).split(/,/).join(", ");b=b.replace('"replace_header_version"',d);b=
B?b.replace('"replace_base_game_version"',c):b.replace('"replace_header_min_engine_version"',a);for(d=0;d<$(".modules_controls_tab li").length;d++)a=d+1,b=b.replace("replace_modules_"+d+"description",$("div.modules_contents > div:nth-child("+a+") #modules_description").val()),a=JSON.stringify([Number($("div.modules_contents > div:nth-child("+a+") #modules_version_major").val()),Number($("div.modules_contents > div:nth-child("+a+") #modules_version_minor").val()),Number($("div.modules_contents > div:nth-child("+
a+") #modules_version_patch").val())]).split(/,/).join(", "),b=b.replace('"replace_modules_'+d+'_version"',a);if(t)for(d=$(".dependencies.tab_controls_bar_tab li").length,a=0;a<d;a++)c=$("div.dependencies.tab_content_list > div:nth-child("+(a+1)+")"),c=JSON.stringify([Number(c.find("#dependencies_version_major").val()),Number(c.find("#dependencies_version_minor").val()),Number(c.find("#dependencies_version_patch").val())]).split(/,/).join(", "),b=b.replace('"replace_dependencies_'+a+'_version"',c);
d=$("div.authors_list > div").length;for(a=1;a<=d;a++)b=b.replace("replace_"+a+"author",$("div.authors_list > div:nth-child("+a+") > span.name").text());b=b.replace("replace_metadata_url",$("#metadata_url").val());b=b.replace("replace_metadata_license",$("#metadata_license").val());d=$(".subpacks.tab_controls_bar_tab li").length;for(a=0;a<d;a++)b=b.replace("replace_subpacks_name",$("div.subpacks.tab_content_list > div:nth-child("+(a+1)+") #subpacks_name").val());$("pre.language-json code.language-json").remove();
d='<code class="language-json">'+b+"</code>";$("pre.language-json").append(d);$("textarea#code_buffer").val(b);b=$("#header_pack_name").val().toString();if(""==b)b="\u540d\u524d\u304c\u3042\u308a\u307e\u305b\u3093";else if(null!=b.match(/\\/g)){b=b.split("\\\\");d="";for(var e in b)if(a=b[e].indexOf("\\n"),1<=e&&(d+="\\\\"),-1!=a){d+=b[e].slice(0,b[e].indexOf("\\n")-b[e].length)+"\u2026";break}else d+=""+b[e];b=d}$("#card_title").html(MinecraftText.toHTML(b));a=$("#header_description").val().toString();
if(""==a)a="\u00a7c\u4e0d\u660e\u306a\u30d1\u30c3\u30af\u306e\u8aac\u660e";else if(null!=a.match(/\\/g)){b=e=0;d="";a=a.split("\\\\");for(var h in a){do if(b++,e=a[h].indexOf("\\n",e+1),-1==e)break;while(3>b);1<=h&&(d+="\\\\");if(-1!=e){d+=a[h].slice(0,e+1-a[h].length)+"\u2026";break}else d+=""+a[h]}a=d}$("#card_description").html(MinecraftText.toHTML(a));MinecraftText.refeashObfuscate();Prism.highlightAll()}function E(b,d){b=void 0===b?"":b;d=void 0===d?[!1,!1,!1]:d;[".tab_body",".add_tab",".remove_tab"].forEach(function(a,
c){a=$(b+a);d[c]?a.removeClass("disabled").find("input").prop("disabled",!1):a.addClass("disabled").find("input").prop("disabled",!0)})}function U(){B=!1;var b=[!1,!1,!1,!1,!1],d={resources:0,data:1,client_data:2,"interface":3,world_template:4},a=$("#min_engine_version").removeClass("disabled"),c=$("#min_engine_version_input input").prop("disabled",!1),e=$("#base_game_version").addClass("disabled"),h=$("#base_game_version_input input").prop("disabled",!0),p=$("#header_lock_template_options");p.parent().addClass("disabled");
p.prop("disabled",!0);for(var u=$(".modules_controls_tab li").length,F=1;F<=u;F++){var K=$("div.modules_contents > div:nth-child("+F+") #modules_type");K.children("option").prop("disabled",!1);var Q=K.val();if(b[d[Q]]||1==F)switch(Q){case "data":b[2]=!0;break;case "client_data":b[1]=!0;break;case "world_template":B=!0,a.addClass("disabled"),c.prop("disabled",!0),2<=z&&(e.removeClass("disabled"),h.prop("disabled",!1)),p.parent().removeClass("disabled"),p.prop("disabled",!1)}else K.val(Object.keys(d)[b.indexOf(!0)]);
V(u,b,d)}b.some(function(W){return W})&&1>=u?$(".modules_controls_add_tab").show(150):$(".modules_controls_add_tab").hide(150)}function V(b,d,a){for(var c=2;c<=b;c++)for(var e in a){var h=$("div.modules_contents > div:nth-child("+c+") #modules_type option[value="+e+"]");d[a[e]]?h.prop("disabled",!1):h.prop("disabled",!0)}}function P(){$("ul.issue_list li").remove();$(".stat_warning,.stat_error").removeClass("stat_warning stat_error");var b=0;var d=$("#header_pack_name").val().toString().replace(/\\\\/g,
"");"\\"==d.slice(-1)&&(m("error",'[Header:name] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',$("#header_pack_name")),b++);d=$("#header_description").val().toString().replace(/\\\\/g,"");"\\"==d.slice(-1)&&(m("error",'[Header:description] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',
$("#header_description")),b++);switch(z){case 2:1>=Number($("#header_min_engine_version_major").val())&&13>Number($("#header_min_engine_version_minor").val())&&(m("error","[Header:min engine version] version1.12\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002",$("#header_min_engine_version_major").parent().find("input")),b++),1>=Number($("#header_base_game_version_major").val())&&13>Number($("#header_base_game_version_minor").val())&&(m("error","[Header:base game version] version1.12\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002",
$("#header_base_game_version_major").parent().find("input")),b++)}L($("#header_uuid").val())||(m("error","[Header:uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",$("#header_uuid")),b++);for(var a=$(".modules_controls_tab li").length,c=0;c<a;c++){var e=c+1;d=$("div.modules_contents > div:nth-child("+e+") #modules_type");null==d.val()&&(m("error","[Modules:"+c+":type] type\u304cnull\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002type\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002",
d),b++);var h=$("div.modules_contents > div:nth-child("+e+") #modules_description");d=h.val().replace(/\\\\/g,"");"\\"==d.slice(-1)&&(m("error","[Modules:"+c+':description] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',h),b++);d=$("div.modules_contents > div:nth-child("+e+") #modules_uuid");L(d.val())||(m("error","[Modules:"+
c+":uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",d),b++)}if(t)for(d=$(".dependencies.tab_controls_bar_tab li").length,a=0;a<d;a++)c=$("div.dependencies.tab_content_list > div:nth-child("+(a+1)+") #dependencies_uuid"),L(c.val())||(m("error","[Dependencies:"+a+":uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",
c),b++);if(w){a=$("div.authors_list > div").length;for(c=1;c<=a;c++)e=$("div.authors_list > div:nth-child("+c+") > span.name"),d=e.text().replace(/\\\\/g,""),"\\"==d.slice(-1)&&(m("error","[Metadata:author:"+c+'] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u6d88\u53bb\u3059\u308b\u304b\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3057\u3066\u518d\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002',e),b++);d=$("#metadata_url").val().replace(/\\\\/g,
"");"\\"==d.slice(-1)&&(m("error",'[Metadata:url] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',$("#metadata_url")),b++);d=$("#metadata_license").val().toString().replace(/\\\\/g,"");"\\"==d.slice(-1)&&(m("error",'[Metadata:license] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',
$("#metadata_license")),b++)}if(x)for(a=$(".subpacks.tab_controls_bar_tab li").length,c=0;c<a;c++){d=$("div.subpacks.tab_content_list > div:nth-child("+(c+1)+")");e=d.find("#subpacks_folder_name");if(null==e.val()||""==e.val())m("error","[Subpacks:"+c+":folder_name] \u30d5\u30a9\u30eb\u30c0\u30fc\u540d\u304c\u7a7a\u3067\u3059\u3002",e),b++;e=d.find("#subpacks_name");d=e.val().toString();if(null==d||""==d)m("error","[Subpacks:"+c+":name] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002",e),b++;d=d.replace(/\\\\/g,
"");"\\"==d.slice(-1)&&(m("error","[Subpacks:"+c+':name] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',e),b++)}d=0;switch(z){case 1:if(1<Number($("#header_min_engine_version_major").val())||13<=Number($("#header_min_engine_version_minor").val()))m("warning","[Header:min engine version] \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f31\u3067\u306f1.13\u3088\u308a\u4f4e\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3088\u308a\u9ad8\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f32\u3067\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002",
$("#header_min_engine_version_major").parent().find("input")),d++}""==$("#header_pack_name").val()&&(m("warning",'[Header:name] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002\u540d\u524d\u304c\u7a7a\u306e\u5834\u5408\u3001"\u540d\u524d\u304c\u3042\u308a\u307e\u305b\u3093"\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002',$("#header_pack_name")),d++);""==$("#header_description").val()&&(m("warning",'[Header:description] \u8aac\u660e\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u8aac\u660e\u304c\u7a7a\u306e\u5834\u5408\u3001"\u4e0d\u660e\u306a\u30d1\u30c3\u30af\u306e\u8aac\u660e"\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002',
$("#header_description")),d++);a=$(".modules_controls_tab li").length;for(c=0;c<a;c++)e=$("div.modules_contents > div:nth-child("+(c+1)+") #modules_description"),""==e.val()&&(m("warning","[Modules:"+c+":description] \u8aac\u660e\u304c\u3042\u308a\u307e\u305b\u3093\u3002",e),d++);!D||$("#experimental_custom_ui").is(":checked")||$("#chemistry").is(":checked")||$("#raytracing").is(":checked")||(m("warning","[Capabilities] \u9805\u76ee\u304c\u4e00\u3064\u3082\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",
$(".capabilities_list>input")),d++);if(w){if($("div.authors_list > div")[0])for(a=$("div.authors_list > div").length,c=1;c<=a;c++)e=$("div.authors_list > div:nth-child("+c+") > span.name"),""==e.text()&&(m("warning","[Metadata:author] \u7a7a\u306e\u540d\u524d\u304c\u5b58\u5728\u3057\u3066\u3044\u307e\u3059\u3002",e),d++);else m("warning","[Metadata:author] \u540d\u524d\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",$("#metadata_author")),d++;""==$("#metadata_url").val()&&(m("warning",
"[Metadata:url] URL\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",$("#metadata_url")),d++);""==$("#metadata_license").val()&&(m("warning","[Metadata:license] \u30e9\u30a4\u30bb\u30f3\u30b9\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",$("#metadata_license")),d++)}$("span.issue_warning_num").text("\u8b66\u544a:"+d);$("span.issue_error_num").text("\u30a8\u30e9\u30fc:"+b);0>=d&&0>=b&&$("ul.issue_list").append("<li>\u554f\u984c\u306f\u3042\u308a\u307e\u305b\u3093</li>")}
function m(b,d,a){var c=$("<li>");"warning"==b?(c.append($("<img>").attr({src:"img/warning.svg",alt:"",width:"19px",height:"19px"}),$("<p>").text(d)),a.addClass("stat_warning")):"error"==b&&(c.append($("<img>").attr({src:"img/error.svg",alt:"",width:"19px",height:"19px"}),$("<p>").text(d)),a.addClass("stat_error"));$("ul.issue_list").append(c)}function L(b){return null===(void 0===b?"":b).match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$")?!1:!0}var G=!1,z=2,A=!1,
t=!1,D=!1,w=!1,x=!1,B=!1,J,I=!0,v=0;r();$(window).bind("beforeunload",function(){if(G)return"\u3053\u306e\u30da\u30fc\u30b8\u3092\u96e2\u308c\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002"});$(document).on("change","input,textarea,select",function(){r();G=!0});$(document).on("keyup","input,textarea,select",function(){r();G=!0});$("textarea").on("keydown",function(b){if("Enter"==b.key)return!1});$(".separator").on("mousedown",function(){A?A&&(A=!1):A=!0});$(document).on("mouseup",function(){A=
!1;$("html").css("cursor","");var b=$(".separator");b.prev().removeClass("drag_lock");b.next().removeClass("drag_lock")});$(document).on("mousemove",function(b){if(A){$("html").css("cursor","e-resize");var d=$(".separator");d.prev().addClass("drag_lock");d.next().addClass("drag_lock");var a=$("html").width()-5;b=a-b.clientX;a-=b;d.next().css("flex-basis",b);d.prev().css("flex-basis",a)}});$("#page_share").on("click",function(){var b={title:"\u3068\u304b\u3055\u3093\u306e Manifest Generator",text:"\u3068\u304b\u3055\u3093\u306e Manifest Generator -manifest.json\u3092\u7c21\u5358\u306b\u4f5c\u6210\u30fb\u7de8\u96c6-",
url:"https://toka7290.github.io/MCAddonSetupManager/"};navigator.share&&navigator.share(b)});$("#input_file").on("change",function(){q()});$("#show_help").on("click",function(){$("#page_help").fadeIn("fast");y()});$("#page_help").on("click",function(){y()});$(document).on("dragenter dragover",function(b){b.stopPropagation();b.preventDefault();$(".file_drop_zone").removeClass("hide")});$(".file_drop_zone,.file_drop_zone_textarea").on("dragleave",function(b){b.stopPropagation();b.preventDefault();$(".file_drop_zone").addClass("hide")});
$(document).on("drop",function(b){G=!0;$(".file_drop_zone").addClass("hide");var d=b;b.originalEvent&&(d=b.originalEvent);d.stopPropagation();d.preventDefault();$("#input_file").prop("files",d.dataTransfer.files);q()});$("div#show_preview").on("click",function(){var b=$("div#show_preview");$("div.preview").slideToggle();b.hasClass("active")?b.removeClass("active"):b.addClass("active")});$(window).resize(function(){$("div.preview").css("display","");$("div.editor").css("flex-basis","");$("div.data_check").css("flex-basis",
"");v=5;y()});$(".open_about").on("click",function(){$("div.page_about").removeClass("about_hide")});$("img#close_about_image").on("click",function(){$("div.page_about").addClass("about_hide")});$("p.preview_control_copy").on("click",function(){var b=$("textarea#code_buffer");b.select();document.execCommand("copy");$("p.preview_control_copy").text("Copied");b.blur();setTimeout(function(){$("p.preview_control_copy").text("Copy")},1E3)});$("p.preview_control_download").on("click",function(){var b=$("textarea#code_buffer").val();
$("<a></a>",{href:window.URL.createObjectURL(new Blob([b])),download:"manifest.json",target:"_blank"})[0].click()});$("div.issue_control_bar").on("click",function(){var b=$("div.issue_control_bar img");b.hasClass("close")?b.attr("class","open"):b.attr("class","close");$("div.issue_content").slideToggle()});$("#format_version").on("change",function(){z=Number($("#format_version").val())});$(document).on("click",'input[type="button"].generate_uuid',function(){$(this).parents("div.type_uuid").find('input[type="text"]').val(g);
r()});$(document).on("click",".modules_controls_tab li",function(){var b=$(".modules_controls_tab li"),d=b.index(this);b.removeClass("selected_tab").eq(d).addClass("selected_tab");$(".modules_contents > div").removeClass("selected_tab_content").eq(d).addClass("selected_tab_content")});$(document).on("click",".modules_controls_tab li span.delete_tab",function(b){var d=$(this).parent(),a=d.index(),c=$(".modules_controls_tab li"),e=c.length,h=$(".modules_contents > div");d.hide(150,function(){h.eq(a).remove();
for(var p=0,u=0;u<e;u++)c.eq(u).html(p+'<span class="delete_tab">\u00d7</span>'),a!=u&&p++;d.hasClass("selected_tab")&&(0>a-1&&(a=e),c.eq(a-1).addClass("selected_tab"),h.eq(a-1).addClass("selected_tab_content"));d.remove();r()});b.stopPropagation()});$(".modules_controls_add_tab").on("click",function(){k();r()});$(document).on("click",".tab_controls_bar_tab li",function(){if(x&&$(this).parents(".tab_controls").hasClass("subpacks")||t&&$(this).parents(".tab_controls").hasClass("dependencies")){var b=
$(this).index(),d=$(this).parent(),a=d.children("li");a.removeClass("selected_tab");a.eq(b).addClass("selected_tab");d=d.parents(".tab_controls").next().children("div");d.removeClass("selected_tab_content");d.eq(b).addClass("selected_tab_content")}});$(document).on("click",".tab_controls_bar_tab li span.delete_tab",function(b){if(x&&$(this).parents(".tab_controls").hasClass("subpacks")||t&&$(this).parents(".tab_controls").hasClass("dependencies")){var d=$(this).parent(),a=d.parent(),c=a.children("li"),
e=d.index(),h=a.parents(".tab_controls").next().children("div");d.hide(150,function(){h.eq(e).remove();d.hasClass("selected_tab")&&(0>e-1&&(e=2),c.eq(e-1).addClass("selected_tab"),h.eq(e-1).addClass("selected_tab_content"));d.remove();c=a.children("li");for(var p=0;p<c.length;p++)c.eq(p).html(p+'<span class="delete_tab">\u00d7</span>');r()})}b.stopPropagation()});$("#modules_add,#dependencies_add,#subpacks_add").on("click",function(){($(this).hasClass("modules")||x&&$(this).hasClass("subpacks")||
t&&$(this).hasClass("dependencies"))&&l($(this).attr("class"));r()});$("#metadata_author_add").on("click",function(){w&&(n($("#metadata_author").val()),$("#metadata_author").val(""));r()});$(document).on("click","span.metadata_delete_author",function(){if(w){var b=$(this).parent();b.hide(150,function(){b.remove();r()})}})});
