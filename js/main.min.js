function y(e){var g=0;return function(){return g<e.length?{done:!1,value:e[g++]}:{done:!0}}}function F(e){var g="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return g?g.call(e):{next:y(e)}}function K(e,g,h){e instanceof String&&(e=String(e));for(var k=e.length,m=0;m<k;m++){var n=e[m];if(g.call(h,n,m,e))return{g:m,h:n}}return{g:-1,h:void 0}}
var L="function"==typeof Object.defineProperties?Object.defineProperty:function(e,g,h){if(e==Array.prototype||e==Object.prototype)return e;e[g]=h.value;return e};function M(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var g=0;g<e.length;++g){var h=e[g];if(h&&h.Math==Math)return h}throw Error("Cannot find global object");}var N=M(this);
function R(e,g){if(g)a:{var h=N;e=e.split(".");for(var k=0;k<e.length-1;k++){var m=e[k];if(!(m in h))break a;h=h[m]}e=e[e.length-1];k=h[e];g=g(k);g!=k&&null!=g&&L(h,e,{configurable:!0,writable:!0,value:g})}}R("Array.prototype.find",function(e){return e?e:function(g,h){return K(this,g,h).h}});
R("Symbol",function(e){function g(m){if(this instanceof g)throw new TypeError("Symbol is not a constructor");return new h("jscomp_symbol_"+(m||"")+"_"+k++,m)}function h(m,n){this.j=m;L(this,"description",{configurable:!0,writable:!0,value:n})}if(e)return e;h.prototype.toString=function(){return this.j};var k=0;return g});
R("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var g="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),h=0;h<g.length;h++){var k=N[g[h]];"function"===typeof k&&"function"!=typeof k.prototype[e]&&L(k.prototype,e,{configurable:!0,writable:!0,value:function(){return S(y(this))}})}return e});function S(e){e={next:e};e[Symbol.iterator]=function(){return this};return e}
function T(e,g){e instanceof String&&(e+="");var h=0,k=!1,m={next:function(){if(!k&&h<e.length){var n=h++;return{value:g(n,e[n]),done:!1}}k=!0;return{done:!0,value:void 0}}};m[Symbol.iterator]=function(){return m};return m}R("Array.prototype.keys",function(e){return e?e:function(){return T(this,function(g){return g})}});R("Array.prototype.findIndex",function(e){return e?e:function(g,h){return K(this,g,h).g}});
$(function(){function e(a){a=void 0===a?"":a;$("div.authors_list").append($("<label>").addClass("author_name").append($("<div>").addClass("author_num").text($(".author_name").length),$("<input>").attr({type:"text",i:"metadata_author",value:a})))}function g(){G=!1;"number"===typeof H&&window.clearTimeout(H);H=window.setTimeout(function(){G=!0;O()},500)}function h(){for(var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""),b=0,c=a.length;b<c;b++)switch(a[b]){case "x":a[b]=Math.floor(16*Math.random()).toString(16);
break;case "y":a[b]=(Math.floor(4*Math.random())+8).toString(16)}return a.join("")}function k(a){a=void 0===a?"":a;var b=$("."+a+".tab_body"),c=b.children("label").length;b.append($("<label>").addClass(a+" tab_children").append($("<input>").attr({type:"button",i:a}),$("<div>").addClass("tab_number").text(c),$("<div>").addClass("tab_underBar")));b.children("li:last-child").hide().show(150);a=$("."+a+".tab_content_list");a.append(a.children("div:first-child").clone().removeClass("selected_tab_content"))}
function m(){var a=$("#input_file").prop("files")[0],b=new FileReader;b.onload=function(){U(b.result)};try{b.readAsText(a)}catch(c){console.error("error:"+c)}}function n(){switch(u){case 1:$("#help_content_1").fadeOut("fast");$("#help_content_2").slideToggle("fast");u++;break;case 2:$("#help_content_2").slideToggle("fast");$("#help_content_3").fadeIn("fast");u++;break;case 3:$("#help_content_3").fadeOut("fast");$("#page_help").hide();u=0;break;case 5:$("#help_content_1").hide();$("#help_content_2").hide();
$("#help_content_3").hide();$("#page_help").hide();u=0;break;default:$("#help_content_1").fadeIn("fast"),u++}}function p(){V();W(X());G&&O();g();var a=Y();$("pre.language-json code.language-json").remove();var b='<code class="language-json">'+a+"</code>";$("pre.language-json").append(b);$("textarea#code_buffer").val(a);a=$("#header_pack_name").val().toString();if(""==a)a="\u540d\u524d\u304c\u3042\u308a\u307e\u305b\u3093";else if(null!=a.match(/\\/g)){a=a.split("\\\\");b="";for(var c in a){var d=a[c].indexOf("\\n");
1<=c&&(b+="\\\\");if(-1!=d){b+=a[c].slice(0,a[c].indexOf("\\n")-a[c].length)+"\u2026";break}else b+=""+a[c]}a=b}$("#card_title").html(MinecraftText.toHTML(a));d=$("#header_description").val().toString();if(""==d)d="\u00a7c\u4e0d\u660e\u306a\u30d1\u30c3\u30af\u306e\u8aac\u660e";else if(null!=d.match(/\\/g)){a=c=0;b="";d=d.split("\\\\");for(var f in d){do if(a++,c=d[f].indexOf("\\n",c+1),-1==c)break;while(3>a);1<=f&&(b+="\\\\");if(-1!=c){b+=d[f].slice(0,c+1-d[f].length)+"\u2026";break}else b+=""+d[f]}d=
b}$("#card_description").html(MinecraftText.toHTML(d));MinecraftText.refeashObfuscate();Prism.highlightAll()}function W(a){a=void 0===a?[0,0]:a;P(".modules",[1,a]);[".dependencies",".subpacks"].forEach(function(b,c){P(b,[[q,r][c],[q,r][c],1<$(b+".tab_children").length])});1<$(".author_name").length?$(".remove_author").removeClass("disabled").find("input").prop("disabled",!1):$(".remove_author").addClass("disabled").find("input").prop("disabled",!0)}function P(a,b){a=void 0===a?"":a;b=void 0===b?[0,
0,0]:b;[".tab_body",".add_tab",".remove_tab"].forEach(function(c,d){c=$(a+c);1==b[d]?c.removeClass("disabled").find("input").prop("disabled",!1):0==b[d]&&c.addClass("disabled").find("input").prop("disabled",!0)})}function V(){q=$("#dependencies_enable").is(":checked")||$("#dependencies_enable").is(":indeterminate");B=$("#capabilities_enable").is(":checked")||$("#capabilities_enable").is(":indeterminate");z=$("#metadata_enable").is(":checked")||$("#metadata_enable").is(":indeterminate");r=$("#subpacks_enable").is(":checked")||
$("#subpacks_enable").is(":indeterminate");var a=$(".dependencies.tab_content_list div.value_element");q?(a.find("div.value_label").removeClass("disabled"),a.find("input").prop("disabled",!1),""==$("#dependencies_uuid").val()?$("#dependencies_enable").prop("indeterminate",!0):$("#dependencies_enable").prop("indeterminate",!1)):(a.find("div.value_label").addClass("disabled"),a.find("input").prop("disabled",!0));a=$(".capabilities_list .value_element");B?(a.removeClass("disabled"),a.find("input").prop("disabled",
!1),$("div.capabilities_list div input").is(":checked")?$("#capabilities_enable").prop("indeterminate",!1):$("#capabilities_enable").prop("indeterminate",!0)):(a.addClass("disabled"),a.find("input").prop("disabled",!0));a=$(".metadata_list .value_element");z?(a.removeClass("disabled"),a.find("input").prop("disabled",!1),[0<$(".metadata_author").length?""!=$(".metadata_author").val():!1,""!=$("#metadata_url").val(),""!=$("#metadata_license").val()].some(function(b){return b})?$("#metadata_enable").prop("indeterminate",
!1):$("#metadata_enable").prop("indeterminate",!0)):(a.addClass("disabled"),a.find("input").prop("disabled",!0));a=$(".subpacks.tab_content_list div.value_element");r?(a.find("div.value_label").removeClass("disabled"),a.find("input").prop("disabled",!1),""==$("#subpacks_folder_name").val()&&""==$("#subpacks_name").val()?$("#subpacks_enable").prop("indeterminate",!0):$("#subpacks_enable").prop("indeterminate",!1)):(a.find("div.value_label").addClass("disabled"),a.find("input").prop("disabled",!0))}
function X(){A=!1;var a=[!1,!1,!1,!1,!1],b={resources:0,data:1,client_data:2,"interface":3,world_template:4},c=$("#min_engine_version").removeClass("disabled"),d=$("#min_engine_version_input input").prop("disabled",!1),f=$("#base_game_version").addClass("disabled"),t=$("#base_game_version_input input").prop("disabled",!0),v=$("#header_lock_template_options");v.parent().addClass("disabled");v.prop("disabled",!0);for(var C=$(".modules.tab_children").length,D=1;D<=C;D++){var I=$(".modules.tab_content_list > div:nth-child("+
D+") #modules_type");I.children("option").prop("disabled",!1);var Q=I.val();if(a[b[Q]]||1==D)switch(Q){case "data":a[2]=!0;break;case "client_data":a[1]=!0;break;case "world_template":A=!0,c.addClass("disabled"),d.prop("disabled",!0),2<=w&&(f.removeClass("disabled"),t.prop("disabled",!1)),v.parent().removeClass("disabled"),v.prop("disabled",!1)}else I.val(Object.keys(b)[a.indexOf(!0)]);Z(C,a,b)}return[a.some(function(aa){return aa})&&1>=C,1<C]}function Z(a,b,c){for(var d=2;d<=a;d++)for(var f in c)$(".modules.tab_content_list > div:nth-child("+
d+") #modules_type option[value="+f+"]").prop("disabled",!b[c[f]])}function O(){$("ul.issue_list li").remove();$(".stat_warning,.stat_error").removeClass("stat_warning stat_error");var a=0;var b=$("#header_pack_name").val().toString().replace(/\\\\/g,"");"\\"==b.slice(-1)&&(l("error",'[Header:name] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',
$("#header_pack_name")),a++);b=$("#header_description").val().toString().replace(/\\\\/g,"");"\\"==b.slice(-1)&&(l("error",'[Header:description] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',$("#header_description")),a++);switch(w){case 2:1>=Number($("#header_min_engine_version_major").val())&&13>Number($("#header_min_engine_version_minor").val())&&
(l("error","[Header:min engine version] version1.12\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002",$("#header_min_engine_version_major").parent().find("input")),a++),1>=Number($("#header_base_game_version_major").val())&&13>Number($("#header_base_game_version_minor").val())&&(l("error","[Header:base game version] version1.12\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002",$("#header_base_game_version_major").parent().find("input")),
a++)}J($("#header_uuid").val())||(l("error","[Header:uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",$("#header_uuid")),a++);for(var c=$(".modules.tab_children").length,d=0;d<c;d++){var f=d+1;b=$(".modules.tab_content_list > div:nth-child("+f+") #modules_type");null==b.val()&&(l("error","[Modules:"+d+":type] type\u304cnull\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002type\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002",
b),a++);var t=$(".modules.tab_content_list > div:nth-child("+f+") #modules_description");b=t.val().replace(/\\\\/g,"");"\\"==b.slice(-1)&&(l("error","[Modules:"+d+':description] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',t),a++);b=$(".modules.tab_content_list > div:nth-child("+f+") #modules_uuid");J(b.val())||(l("error",
"[Modules:"+d+":uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",b),a++)}if(q)for(b=$(".dependencies.tab_children").length,c=0;c<b;c++)d=$("div.dependencies.tab_content_list > div:nth-child("+(c+1)+") #dependencies_uuid"),J(d.val())||(l("error","[Dependencies:"+c+":uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",
d),a++);if(z){c=$("label.author_name").length;for(d=0;d<c;d++)f=$("input.metadata_author").eq(d),b=f.val().replace(/\\\\/g,""),"\\"==b.slice(-1)&&(l("error","[Metadata:author:"+d+'] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u6d88\u53bb\u3059\u308b\u304b\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3057\u3066\u518d\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002',f),a++);b=$("#metadata_url").val().replace(/\\\\/g,"");"\\"==
b.slice(-1)&&(l("error",'[Metadata:url] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',$("#metadata_url")),a++);b=$("#metadata_license").val().toString().replace(/\\\\/g,"");"\\"==b.slice(-1)&&(l("error",'[Metadata:license] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',
$("#metadata_license")),a++)}if(r)for(c=$(".subpacks.tab_children").length,d=0;d<c;d++){b=$("div.subpacks.tab_content_list > div:nth-child("+(d+1)+")");f=b.find("#subpacks_folder_name");if(null==f.val()||""==f.val())l("error","[Subpacks:"+d+":folder_name] \u30d5\u30a9\u30eb\u30c0\u30fc\u540d\u304c\u7a7a\u3067\u3059\u3002",f),a++;f=b.find("#subpacks_name");b=f.val().toString();if(null==b||""==b)l("error","[Subpacks:"+d+":name] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002",f),a++;b=b.replace(/\\\\/g,
"");"\\"==b.slice(-1)&&(l("error","[Subpacks:"+d+':name] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',f),a++)}b=0;switch(w){case 1:if(1<Number($("#header_min_engine_version_major").val())||13<=Number($("#header_min_engine_version_minor").val()))l("warning","[Header:min engine version] \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f31\u3067\u306f1.13\u3088\u308a\u4f4e\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3088\u308a\u9ad8\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f32\u3067\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002",
$("#header_min_engine_version_major").parent().find("input")),b++}""==$("#header_pack_name").val()&&(l("warning",'[Header:name] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002\u540d\u524d\u304c\u7a7a\u306e\u5834\u5408\u3001"\u540d\u524d\u304c\u3042\u308a\u307e\u305b\u3093"\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002',$("#header_pack_name")),b++);""==$("#header_description").val()&&(l("warning",'[Header:description] \u8aac\u660e\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u8aac\u660e\u304c\u7a7a\u306e\u5834\u5408\u3001"\u4e0d\u660e\u306a\u30d1\u30c3\u30af\u306e\u8aac\u660e"\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002',
$("#header_description")),b++);c=$(".modules.tab_children").length;for(d=0;d<c;d++)f=$(".modules.tab_content_list > div:nth-child("+(d+1)+") #modules_description"),""==f.val()&&(l("warning","[Modules:"+d+":description] \u8aac\u660e\u304c\u3042\u308a\u307e\u305b\u3093\u3002",f),b++);!B||$("#experimental_custom_ui").is(":checked")||$("#chemistry").is(":checked")||$("#raytracing").is(":checked")||(l("warning","[Capabilities] \u9805\u76ee\u304c\u4e00\u3064\u3082\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",
$(".capabilities_list>input")),b++);if(z){if(c=$("label.author_name").length)for(d=0;d<c;d++)f=$("input.metadata_author").eq(d),""==f.val()&&(l("warning","[Metadata:author:"+d+"] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002",f),b++);else l("warning","[Metadata:author] \u540d\u524d\u304c\u4e00\u3064\u3082\u3042\u308a\u307e\u305b\u3093\u3002",$("div.add_author")),b++;""==$("#metadata_url").val()&&(l("warning","[Metadata:url] URL\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",$("#metadata_url")),
b++);""==$("#metadata_license").val()&&(l("warning","[Metadata:license] \u30e9\u30a4\u30bb\u30f3\u30b9\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",$("#metadata_license")),b++)}$("span.issue_warning_num").text("\u8b66\u544a:"+b);$("span.issue_error_num").text("\u30a8\u30e9\u30fc:"+a);0>=b&&0>=a&&$("ul.issue_list").append("<li>\u554f\u984c\u306f\u3042\u308a\u307e\u305b\u3093</li>")}function l(a,b,c){var d=$("<li>");"warning"==a?(d.append($("<img>").attr({src:"img/warning.svg",
alt:"",width:"19px",height:"19px"}),$("<p>").text(b)),c.addClass("stat_warning")):"error"==a&&(d.append($("<img>").attr({src:"img/error.svg",alt:"",width:"19px",height:"19px"}),$("<p>").text(b)),c.addClass("stat_error"));$("ul.issue_list").append(d)}function J(a){return null===(void 0===a?"":a).match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$")?!1:!0}function U(a){var b={};try{b=JSON.parse(a)}catch(f){f.message.replace("JSON.parse: ","").split(" at")[0].split(" ").findIndex(function(t){return"line"==
t});window.alert("\u6709\u52b9\u306ajson\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n"+(f.lineNumber-1)+"~"+f.lineNumber+"\u884c\u3067\u554f\u984c\u304c\u767a\u751f\u3057\u3066\u3044\u307e\u3059\u3002");console.error(f.message.split(" "));return}if(null!=b.format_version)$("#format_version").val(b.format_version);else if(null!=b.header.modules){null!=b.header.pack_id&&$("#header_uuid").val(b.header.pack_id);null!=b.header.name&&$("#header_pack_name").val(b.header.name);null!=b.header.packs_version&&
(a=b.header.packs_version.split("."),null!=a[0]&&$("#header_version_major").val(a[0]),null!=a[1]&&$("#header_version_minor").val(a[1]),null!=a[2]&&$("#header_version_patch").val(a[2]));null!=b.header.description&&$("#header_description").val(b.header.description);if(null!=b.header.modules)for(a=0;a<b.header.modules.length;a++){var c=a+1;0<a&&k("modules");null!=b.header.modules[a].type&&$(".modules.tab_content_list > div:nth-child("+c+") #modules_type").val(b.header.modules[a].type);null!=b.header.modules[a].description&&
$(".modules.tab_content_list > div:nth-child("+c+") #modules_description").val(b.header.modules[a].description);if(null!=b.header.modules[a].version){var d=b.header.modules[a].version.split(".");null!=d[0]&&$(".modules.tab_content_list > div:nth-child("+c+") #modules_version_major").val(d[0]);null!=d[1]&&$(".modules.tab_content_list > div:nth-child("+c+") #modules_version_minor").val(d[1]);null!=d[2]&&$(".modules.tab_content_list > div:nth-child("+c+") #modules_version_patch").val(d[2])}null!=b.header.modules[a].uuid&&
$(".modules.tab_content_list > div:nth-child("+c+") #modules_uuid").val(b.header.modules[a].uuid)}if(null!=b.header.dependencies)for($("#dependencies_enable").prop("checked",!0),a=0;a<b.header.dependencies.length;a++)c=a+1,0<a&&k("dependencies"),c=$("div.dependencies.tab_content_list > div:nth-child("+c+")"),null!=b.header.dependencies[a].uuid&&c.find("#dependencies_uuid").val(b.header.dependencies[a].uuid),null!=b.header.dependencies[a].version&&(d=b.header.dependencies[a].version.split("."),null!=
d[0]&&c.find("#dependencies_version_major").val(d[0]),null!=d[1]&&c.find("#dependencies_version_minor").val(d[1]),null!=d[2]&&c.find("#dependencies_version_patch").val(d[2]));window.alert("\u53e4\u3044\u5f62\u5f0f(pack_manifest.json)\u304b\u3089\u5909\u63db\u3057\u307e\u3059\u3002");p();return}null!=b.header.name&&$("#header_pack_name").val(b.header.name);null!=b.header.description&&$("#header_description").val(b.header.description);null!=b.header.version&&(null!=b.header.version[0]&&$("#header_version_major").val(b.header.version[0]),
null!=b.header.version[1]&&$("#header_version_minor").val(b.header.version[1]),null!=b.header.version[2]&&$("#header_version_patch").val(b.header.version[2]));null!=b.header.min_engine_version&&(null!=b.header.min_engine_version[0]&&$("#header_min_engine_version_major").val(b.header.min_engine_version[0]),null!=b.header.min_engine_version[1]&&$("#header_min_engine_version_minor").val(b.header.min_engine_version[1]),null!=b.header.min_engine_version[2]&&$("#header_min_engine_version_patch").val(b.header.min_engine_version[2]));
null!=b.header.uuid&&$("#header_uuid").val(b.header.uuid);null!=b.header.platform_locked&&b.header.platform_locked&&$("#header_platform_locked").prop("checked",!0);null!=b.header.base_game_version&&(null!=b.header.base_game_version[0]&&$("#header_base_game_version_major").val(b.header.base_game_version[0]),null!=b.header.base_game_version[1]&&$("#header_base_game_version_minor").val(b.header.base_game_version[1]),null!=b.header.base_game_version[2]&&$("#header_base_game_version_patch").val(b.header.base_game_version[2]));
null!=b.header.lock_template_options&&b.header.lock_template_options&&$("#header_lock_template_options").prop("checked",!0);if(null!=b.modules)for(a=0;a<b.modules.length;a++)c=a+1,0<a&&k("modules"),null!=b.modules[a].type&&$(".modules.tab_content_list > div:nth-child("+c+") #modules_type").val(b.modules[a].type),null!=b.modules[a].description&&$(".modules.tab_content_list > div:nth-child("+c+") #modules_description").val(b.modules[a].description),null!=b.modules[a].version&&(null!=b.modules[a].version[0]&&
$(".modules.tab_content_list > div:nth-child("+c+") #modules_version_major").val(b.modules[a].version[0]),null!=b.modules[a].version[1]&&$(".modules.tab_content_list > div:nth-child("+c+") #modules_version_minor").val(b.modules[a].version[1]),null!=b.modules[a].version[2]&&$(".modules.tab_content_list > div:nth-child("+c+") #modules_version_patch").val(b.modules[a].version[2])),null!=b.modules[a].uuid&&$(".modules.tab_content_list > div:nth-child("+c+") #modules_uuid").val(b.modules[a].uuid);if(null!=
b.dependencies)for($("#dependencies_enable").prop("checked",!0),a=0;a<b.dependencies.length;a++)c=a+1,0<a&&k("dependencies"),c=$("div.dependencies.tab_content_list > div:nth-child("+c+")"),null!=b.dependencies[a].uuid&&c.find("#dependencies_uuid").val(b.dependencies[a].uuid),null!=b.dependencies[a].version&&(null!=b.dependencies[a].version[0]&&c.find("#dependencies_version_major").val(b.dependencies[a].version[0]),null!=b.dependencies[a].version[1]&&c.find("#dependencies_version_minor").val(b.dependencies[a].version[1]),
null!=b.dependencies[a].version[2]&&c.find("#dependencies_version_patch").val(b.dependencies[a].version[2]));if(null!=b.capabilities)for($("#capabilities_enable").prop("checked",!0),a=F(b.capabilities),c=a.next();!c.done;c=a.next())switch(c.value){case "experimental_custom_ui":$("#experimental_custom_ui").prop("checked",!0);break;case "chemistry":$("#chemistry").prop("checked",!0);break;case "raytracing":$("#raytracing").prop("checked",!0)}if(null!=b.metadata){$("#metadata_enable").prop("checked",
!0);if(null!=b.metadata.authors)for(a=F(b.metadata.authors),c=a.next();!c.done;c=a.next())e(c.value);null!=b.metadata.url&&$("#metadata_url").val(b.metadata.url);null!=b.metadata.license&&$("#metadata_license").val(b.metadata.license)}if(null!=b.subpacks)for($("#subpacks_enable").prop("checked",!0),a=0;a<b.subpacks.length;a++)c=a+1,0<a&&k("subpacks"),c=$("div.subpacks.tab_content_list > div:nth-child("+c+")"),null!=b.subpacks[a].folder_name&&c.find("#subpacks_folder_name").val(b.subpacks[a].folder_name),
null!=b.subpacks[a].name&&c.find("#subpacks_name").val(b.subpacks[a].name),null!=b.subpacks[a].memory_tier&&c.find("#subpacks_memory_tier").val(b.subpacks[a].memory_tier);p()}function Y(){var a={};a.format_version=w;a.header={};a.header.name="replace_header_pack_name";a.header.description="replace_header_description";a.header.version="replace_header_version";A||(a.header.min_engine_version="replace_header_min_engine_version");a.header.uuid=$("#header_uuid").val();$("#header_platform_locked").is(":checked")&&
(a.header.platform_locked=!0);A&&(2<=w&&(a.header.base_game_version="replace_base_game_version"),a.header.lock_template_options=$("#header_lock_template_options").is(":checked"));a.modules=[];for(var b=$(".modules.tab_children").length,c=0;c<b;c++){var d=c+1;a.modules[c]={};a.modules[c].type=$(".modules.tab_content_list > div:nth-child("+d+") #modules_type").val();a.modules[c].description="replace_modules_"+c+"_description";a.modules[c].version="replace_modules_"+c+"_version";a.modules[c].uuid=$(".modules.tab_content_list > div:nth-child("+
d+") #modules_uuid").val()}if(q)for(a.dependencies=[],b=$(".dependencies.tab_children").length,c=0;c<b;c++)d=$("div.dependencies.tab_content_list > div:nth-child("+(c+1)+")"),a.dependencies[c]={},a.dependencies[c].uuid=d.find("#dependencies_uuid").val(),a.dependencies[c].version="replace_dependencies_"+c+"_version";B&&$("div.capabilities_list div input").is(":checked")&&(a.capabilities=[],$("#experimental_custom_ui").is(":checked")&&a.capabilities.push("experimental_custom_ui"),$("#chemistry").is(":checked")&&
a.capabilities.push("chemistry"),$("#raytracing").is(":checked")&&a.capabilities.push("raytracing"));b=[0<$(".metadata_author").length?""!=$(".metadata_author").val():!1,""!=$("#metadata_url").val(),""!=$("#metadata_license").val()];if(z&&b.some(function(f){return f})){a.metadata={};if(b[0])for(a.metadata.authors=[],c=$("label.author_name").length,d=0;d<c;d++)a.metadata.authors.push("replace_"+d+"_author");b[1]&&(a.metadata.url="replace_metadata_url");b[2]&&(a.metadata.license="replace_metadata_license")}if(r)for(a.subpacks=
[],b=$(".subpacks.tab_children").length,c=0;c<b;c++)d=c+1,a.subpacks[c]={},d=$("div.subpacks.tab_content_list > div:nth-child("+d+")"),a.subpacks[c].folder_name=d.find("#subpacks_folder_name").val(),a.subpacks[c].name="replace_subpacks_name",a.subpacks[c].memory_tier=Number(d.find("#subpacks_memory_tier").val());return ba(JSON.stringify(a,null,"  "))}function ba(a){a=a.replace("replace_header_pack_name",$("#header_pack_name").val());a=a.replace("replace_header_description",$("#header_description").val());
var b=JSON.stringify([Number($("#header_version_major").val()),Number($("#header_version_minor").val()),Number($("#header_version_patch").val())]).split(/,/).join(", "),c=JSON.stringify([Number($("#header_min_engine_version_major").val()),Number($("#header_min_engine_version_minor").val()),Number($("#header_min_engine_version_patch").val())]).split(/,/).join(", "),d=JSON.stringify([Number($("#header_base_game_version_major").val()),Number($("#header_base_game_version_minor").val()),Number($("#header_base_game_version_patch").val())]).split(/,/).join(", ");
a=a.replace('"replace_header_version"',b);a=A?a.replace('"replace_base_game_version"',d):a.replace('"replace_header_min_engine_version"',c);for(b=0;b<$(".modules.tab_children").length;b++)c=b+1,a=a.replace("replace_modules_"+b+"_description",$(".modules.tab_content_list > div:nth-child("+c+") #modules_description").val()),c=JSON.stringify([Number($(".modules.tab_content_list > div:nth-child("+c+") #modules_version_major").val()),Number($(".modules.tab_content_list > div:nth-child("+c+") #modules_version_minor").val()),
Number($(".modules.tab_content_list > div:nth-child("+c+") #modules_version_patch").val())]).split(/,/).join(", "),a=a.replace('"replace_modules_'+b+'_version"',c);if(q)for(b=$(".dependencies.tab_children").length,c=0;c<b;c++)d=$("div.dependencies.tab_content_list > div:nth-child("+(c+1)+")"),d=JSON.stringify([Number(d.find("#dependencies_version_major").val()),Number(d.find("#dependencies_version_minor").val()),Number(d.find("#dependencies_version_patch").val())]).split(/,/).join(", "),a=a.replace('"replace_dependencies_'+
c+'_version"',d);b=$("label.author_name").length;for(c=0;c<b;c++)a=a.replace("replace_"+c+"_author",$("input.metadata_author").eq(c).val());a=a.replace("replace_metadata_url",$("#metadata_url").val());a=a.replace("replace_metadata_license",$("#metadata_license").val());b=$(".subpacks.tab_children").length;for(c=0;c<b;c++)a=a.replace("replace_subpacks_name",$("div.subpacks.tab_content_list > div:nth-child("+(c+1)+") #subpacks_name").val());return a}var E=!1,w=2,x=!1,q=!1,B=!1,z=!1,r=!1,A=!1,H,G=!0,
u=0;p();$(window).bind("beforeunload",function(){if(E)return"\u3053\u306e\u30da\u30fc\u30b8\u3092\u96e2\u308c\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002"});$(document).on("change","input,textarea,select",function(){p();E=!0});$(document).on("keyup","input,textarea,select",function(){p();E=!0});$("textarea").on("keydown",function(a){if("Enter"==a.key)return!1});$(".separator").on("mousedown",function(){x?x&&(x=!1):x=!0});$(document).on("mouseup",function(){x=!1;$("html").css("cursor","");
var a=$(".separator");a.prev().removeClass("drag_lock");a.next().removeClass("drag_lock")});$(document).on("mousemove",function(a){if(x){$("html").css("cursor","e-resize");var b=$(".separator");b.prev().addClass("drag_lock");b.next().addClass("drag_lock");var c=$("html").width()-5;a=c-a.clientX;c-=a;b.next().css("flex-basis",a);b.prev().css("flex-basis",c)}});$("#page_share").on("click",function(){var a={title:"\u3068\u304b\u3055\u3093\u306e Manifest Generator",text:"\u3068\u304b\u3055\u3093\u306e Manifest Generator -manifest.json\u3092\u7c21\u5358\u306b\u4f5c\u6210\u30fb\u7de8\u96c6-",
url:"https://toka7290.github.io/MCAddonSetupManager/"};navigator.share&&navigator.share(a)});$("#input_file").on("change",function(){m()});$("#show_help").on("click",function(){$("#page_help").fadeIn("fast");n()});$("#page_help").on("click",function(){n()});$(document).on("dragenter dragover",function(a){a.stopPropagation();a.preventDefault();$(".file_drop_zone").removeClass("hide")});$(".file_drop_zone,.file_drop_zone_textarea").on("dragleave",function(a){a.stopPropagation();a.preventDefault();$(".file_drop_zone").addClass("hide")});
$(document).on("drop",function(a){E=!0;$(".file_drop_zone").addClass("hide");var b=a;a.originalEvent&&(b=a.originalEvent);b.stopPropagation();b.preventDefault();$("#input_file").prop("files",b.dataTransfer.files);m()});$("div#show_preview").on("click",function(){var a=$("div#show_preview");$("div.preview").slideToggle();a.hasClass("active")?a.removeClass("active"):a.addClass("active")});$(window).resize(function(){$("div.preview").css("display","");$("div.editor").css("flex-basis","");$("div.data_check").css("flex-basis",
"");u=5;n()});$(".open_about").on("click",function(){$("div.page_about").removeClass("about_hide")});$("img#close_about_image").on("click",function(){$("div.page_about").addClass("about_hide")});$("p.preview_control_copy").on("click",function(){var a=$("textarea#code_buffer");a.select();document.execCommand("copy");$("p.preview_control_copy").text("Copied");a.blur();setTimeout(function(){$("p.preview_control_copy").text("Copy")},1E3)});$("p.preview_control_download").on("click",function(){var a=$("textarea#code_buffer").val();
$("<a></a>",{href:window.URL.createObjectURL(new Blob([a])),download:"manifest.json",target:"_blank"})[0].click()});$("div.issue_control_bar").on("click",function(){var a=$("div.issue_control_bar img");a.hasClass("close")?a.attr("class","open"):a.attr("class","close");$("div.issue_content").slideToggle()});$("#format_version").on("change",function(){w=Number($("#format_version").val())});$(document).on("click",'input[type="button"].generate_uuid',function(){$(this).parents("div.type_uuid").find('input[type="text"]').val(h);
p()});$(document).on("click",'.tab_children:not(:selected) input[type="button"]',function(){var a=$(this).attr("class");if("modules"==a||q&&"dependencies"==a||r&&"subpacks"==a){var b=$(this).parent(),c=b.index();$("."+a+".tab_children").removeClass("selected");b.addClass("selected");$("."+a+".tab_content_list>div").removeClass("selected_tab_content").eq(c).addClass("selected_tab_content")}});$("#modules_remove,#dependencies_remove,#subpacks_remove").on("click",function(a){var b="."+$(this).attr("class"),
c=$(b+".tab_children");if(1<c.length&&($(this).hasClass("modules")||r&&$(this).hasClass("subpacks")||q&&$(this).hasClass("dependencies"))){$(b+".tab_children.selected").remove();$(b+".tab_content_list>.selected_tab_content").remove();c=$(b+".tab_children");b=$(b+".tab_content_list>div");for(var d=0,f=0;f<c.length;f++){var t=c.eq(f),v=b.eq(f);0==f&&(t.addClass("selected"),v.addClass("selected_tab_content"));t.children("div.tab_number").text(d);d++}}p();a.stopPropagation()});$("#modules_add,#dependencies_add,#subpacks_add").on("click",
function(){($(this).hasClass("modules")||r&&$(this).hasClass("subpacks")||q&&$(this).hasClass("dependencies"))&&k($(this).attr("class"));p()});$("#author_add").on("click",function(){e();p()});$("#author_remove").on("click",function(){$("div.authors_list>.author_name:last-child").remove();p()})});
