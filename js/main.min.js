var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(e){var g=0;return function(){return g<e.length?{done:!1,value:e[g++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};$jscomp.makeIterator=function(e){var g="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return g?g.call(e):$jscomp.arrayIterator(e)};
$jscomp.findInternal=function(e,g,h){e instanceof String&&(e=String(e));for(var l=e.length,k=0;k<l;k++){var q=e[k];if(g.call(h,q,k,e))return{i:k,v:q}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,g,h){if(e==Array.prototype||e==Object.prototype)return e;e[g]=h.value;return e};$jscomp.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var g=0;g<e.length;++g){var h=e[g];if(h&&h.Math==Math)return h}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(e,g){var h=$jscomp.propertyToPolyfillSymbol[g];if(null==h)return e[g];h=e[h];return void 0!==h?h:e[g]};
$jscomp.polyfill=function(e,g,h,l){g&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(e,g,h,l):$jscomp.polyfillUnisolated(e,g,h,l))};$jscomp.polyfillUnisolated=function(e,g,h,l){h=$jscomp.global;e=e.split(".");for(l=0;l<e.length-1;l++){var k=e[l];if(!(k in h))return;h=h[k]}e=e[e.length-1];l=h[e];g=g(l);g!=l&&null!=g&&$jscomp.defineProperty(h,e,{configurable:!0,writable:!0,value:g})};
$jscomp.polyfillIsolated=function(e,g,h,l){var k=e.split(".");e=1===k.length;l=k[0];l=!e&&l in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var q=0;q<k.length-1;q++){var v=k[q];if(!(v in l))return;l=l[v]}k=k[k.length-1];h=$jscomp.IS_SYMBOL_NATIVE&&"es6"===h?l[k]:null;g=g(h);null!=g&&(e?$jscomp.defineProperty($jscomp.polyfills,k,{configurable:!0,writable:!0,value:g}):g!==h&&($jscomp.propertyToPolyfillSymbol[k]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(k):$jscomp.POLYFILL_PREFIX+k,k=
$jscomp.propertyToPolyfillSymbol[k],$jscomp.defineProperty(l,k,{configurable:!0,writable:!0,value:g})))};$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(g,h){return $jscomp.findInternal(this,g,h).v}},"es6","es3");
$(function(){function e(){E=!1;"number"===typeof F&&window.clearTimeout(F);F=window.setTimeout(function(){E=!0;H()},500)}function g(){for(var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""),d=0,a=b.length;d<a;d++)switch(b[d]){case "x":b[d]=Math.floor(16*Math.random()).toString(16);break;case "y":b[d]=(Math.floor(4*Math.random())+8).toString(16)}return b.join("")}function h(){var b=$(".modules_controls_tab li").length,d="<li>"+b+'<span class="delete_tab">\u00d7</span></li>';$(".modules_controls_tab").append(d);
$(".modules_controls_tab").children("li:last-child").hide().show(150);d=$(".modules_contents > div:first-child").clone();d.removeClass("selected_tab_content");$(".modules_contents").append(d);0<b&&$(".modules_controls_add_tab").hide(150)}function l(b){var d=b.children("li").length;d=$("<li>").text(d).append($("<span>").addClass("delete_tab").text("\u00d7"));b.append(d);b.children("li:last-child").hide().show(150);b=b.parents(".tab_controls").next();d=b.children("div:first-child").clone();d.removeClass("selected_tab_content");
b.append(d)}function k(b){var d=$(document).find(".metadata_author_list"),a=$("<div>");a.append($("<span>").addClass("name").text(b));a.append($("<span>").addClass("metadata_delete_author").text("\u00d7"));d.append(a);d.children("div:last-child").hide().show(150)}function q(){var b=$("#input_file").prop("files")[0],d=new FileReader;d.onload=function(){var a=d.result;a:{try{var c=JSON.parse(a)}catch(w){window.alert("\u6709\u52b9\u306ajson\u3067\u306f\u3042\u308a\u307e\u305b\u3093");console.error("error:"+
w);break a}if(null!=c.format_version)$("#format_version").val(c.format_version);else if(null!=c.header.modules){null!=c.header.pack_id&&$("#header_uuid").val(c.header.pack_id);null!=c.header.name&&$("#header_pack_name").val(c.header.name);null!=c.header.packs_version&&(a=c.header.packs_version.split("."),null!=a[0]&&$("#header_version_major").val(Number(a[0])),null!=a[1]&&$("#header_version_minor").val(Number(a[1])),null!=a[2]&&$("#header_version_patch").val(Number(a[2])));null!=c.header.description&&
$("#header_description").val(c.header.description);if(null!=c.header.modules)for(a=0;a<c.header.modules.length;a++){var f=a+1;0<a&&h();null!=c.header.modules[a].type&&$("div.modules_contents > div:nth-child("+f+") #modules_type").val(c.header.modules[a].type);null!=c.header.modules[a].description&&$("div.modules_contents > div:nth-child("+f+") #modules_description").val(c.header.modules[a].description);if(null!=c.header.modules[a].version){var m=c.header.modules[a].version.split(".");null!=m[0]&&
$("div.modules_contents > div:nth-child("+f+") #modules_version_major").val(Number(m[0]));null!=m[1]&&$("div.modules_contents > div:nth-child("+f+") #modules_version_minor").val(Number(m[1]));null!=m[2]&&$("div.modules_contents > div:nth-child("+f+") #modules_version_patch").val(Number(m[2]))}null!=c.header.modules[a].uuid&&$("div.modules_contents > div:nth-child("+f+") #modules_uuid").val(c.header.modules[a].uuid)}if(null!=c.header.dependencies)for($("#dependencies_enable").prop("checked",!0),a=
0;a<c.header.dependencies.length;a++)f=a+1,0<a&&l($(".dependencies.tab_controls_bar_tab")),f=$("div.dependencies.tab_content_list > div:nth-child("+f+")"),null!=c.header.dependencies[a].uuid&&f.find("#dependencies_uuid").val(c.header.dependencies[a].uuid),null!=c.header.dependencies[a].version&&(m=c.header.dependencies[a].version.split("."),null!=m[0]&&f.find("#dependencies_version_major").val(m[0]),null!=m[1]&&f.find("#dependencies_version_minor").val(m[1]),null!=m[2]&&f.find("#dependencies_version_patch").val(m[2]));
window.alert("\u53e4\u3044\u5f62\u5f0f(pack_manifest.json)\u304b\u3089\u5909\u63db\u3057\u307e\u3059\u3002");p();break a}null!=c.header.name&&$("#header_pack_name").val(c.header.name);null!=c.header.description&&$("#header_description").val(c.header.description);null!=c.header.version&&(null!=c.header.version[0]&&$("#header_version_major").val(c.header.version[0]),null!=c.header.version[1]&&$("#header_version_minor").val(c.header.version[1]),null!=c.header.version[2]&&$("#header_version_patch").val(c.header.version[2]));
null!=c.header.min_engine_version&&(null!=c.header.min_engine_version[0]&&$("#header_min_engine_version_major").val(c.header.min_engine_version[0]),null!=c.header.min_engine_version[1]&&$("#header_min_engine_version_minor").val(c.header.min_engine_version[1]),null!=c.header.min_engine_version[2]&&$("#header_min_engine_version_patch").val(c.header.min_engine_version[2]));null!=c.header.uuid&&$("#header_uuid").val(c.header.uuid);null!=c.header.platform_locked&&c.header.platform_locked&&$("#header_platform_locked").prop("checked",
!0);null!=c.header.base_game_version&&(null!=c.header.base_game_version[0]&&$("#header_base_game_version_major").val(c.header.base_game_version[0]),null!=c.header.base_game_version[1]&&$("#header_base_game_version_minor").val(c.header.base_game_version[1]),null!=c.header.base_game_version[2]&&$("#header_base_game_version_patch").val(c.header.base_game_version[2]));null!=c.header.lock_template_options&&c.header.lock_template_options&&$("#header_lock_template_options").prop("checked",!0);if(null!=c.modules)for(a=
0;a<c.modules.length;a++)f=a+1,0<a&&h(),null!=c.modules[a].type&&$("div.modules_contents > div:nth-child("+f+") #modules_type").val(c.modules[a].type),null!=c.modules[a].description&&$("div.modules_contents > div:nth-child("+f+") #modules_description").val(c.modules[a].description),null!=c.modules[a].version&&(null!=c.modules[a].version[0]&&$("div.modules_contents > div:nth-child("+f+") #modules_version_major").val(c.modules[a].version[0]),null!=c.modules[a].version[1]&&$("div.modules_contents > div:nth-child("+
f+") #modules_version_minor").val(c.modules[a].version[1]),null!=c.modules[a].version[2]&&$("div.modules_contents > div:nth-child("+f+") #modules_version_patch").val(c.modules[a].version[2])),null!=c.modules[a].uuid&&$("div.modules_contents > div:nth-child("+f+") #modules_uuid").val(c.modules[a].uuid);if(null!=c.dependencies)for($("#dependencies_enable").prop("checked",!0),a=0;a<c.dependencies.length;a++)f=a+1,0<a&&l($(".dependencies.tab_controls_bar_tab")),f=$("div.dependencies.tab_content_list > div:nth-child("+
f+")"),null!=c.dependencies[a].uuid&&f.find("#dependencies_uuid").val(c.dependencies[a].uuid),null!=c.dependencies[a].version&&(null!=c.dependencies[a].version[0]&&f.find("#dependencies_version_major").val(c.dependencies[a].version[0]),null!=c.dependencies[a].version[1]&&f.find("#dependencies_version_minor").val(c.dependencies[a].version[1]),null!=c.dependencies[a].version[2]&&f.find("#dependencies_version_patch").val(c.dependencies[a].version[2]));if(null!=c.capabilities)for($("#capabilities_enable").prop("checked",
!0),a=$jscomp.makeIterator(c.capabilities),f=a.next();!f.done;f=a.next())switch(f.value){case "experimental_custom_ui":$("#experimental_custom_ui").prop("checked",!0);break;case "chemistry":$("#chemistry").prop("checked",!0);break;case "raytracing":$("#raytracing").prop("checked",!0)}if(null!=c.metadata){$("#metadata_enable").prop("checked",!0);if(null!=c.metadata.authors)for(a=$jscomp.makeIterator(c.metadata.authors),f=a.next();!f.done;f=a.next())k(f.value);null!=c.metadata.url&&$("#metadata_url").val(c.metadata.url);
null!=c.metadata.license&&$("#metadata_license").val(c.metadata.license)}if(null!=c.subpacks)for($("#subpacks_enable").prop("checked",!0),a=0;a<c.subpacks.length;a++)f=a+1,0<a&&l($(".subpacks.tab_controls_bar_tab")),f=$("div.subpacks.tab_content_list > div:nth-child("+f+")"),null!=c.subpacks[a].folder_name&&f.find("#subpacks_folder_name").val(c.subpacks[a].folder_name),null!=c.subpacks[a].name&&f.find("#subpacks_name").val(c.subpacks[a].name),null!=c.subpacks[a].memory_tier&&f.find("#subpacks_memory_tier").val(c.subpacks[a].memory_tier);
p()}};try{d.readAsText(b)}catch(a){console.error("error:"+a)}}function v(){switch(t){case 1:$("#help_content_1").fadeOut("fast");$("#help_content_2").slideToggle("fast");t++;break;case 2:$("#help_content_2").slideToggle("fast");$("#help_content_3").fadeIn("fast");t++;break;case 3:$("#help_content_3").fadeOut("fast");$("#page_help").hide();t=0;break;case 5:$("#help_content_1").hide();$("#help_content_2").hide();$("#help_content_3").hide();$("#page_help").hide();t=0;break;default:$("#help_content_1").fadeIn("fast"),
t++}}function p(){r=$("#dependencies_enable").is(":checked");C=$("#capabilities_enable").is(":checked");x=$("#metadata_enable").is(":checked");u=$("#subpacks_enable").is(":checked");r?($("div.dependencies.tab_contents").removeClass("disabled"),$("div.dependencies.tab_contents input").prop("disabled",!1),$("div.dependencies.tab_contents .tab_controls_bar").removeClass("disabled")):($("div.dependencies.tab_contents").addClass("disabled"),$("div.dependencies.tab_contents input").prop("disabled",!0),
$("div.dependencies.tab_contents .tab_controls_bar").addClass("disabled"));C?($(".capabilities_list").removeClass("disabled"),$("div.capabilities_list input").prop("disabled",!1)):($(".capabilities_list").addClass("disabled"),$("div.capabilities_list input").prop("disabled",!0));x?($(".metadata_list").removeClass("disabled"),$("div.metadata_list input").prop("disabled",!1)):($(".metadata_list").addClass("disabled"),$("div.metadata_list input").prop("disabled",!0));u?($("div.subpacks.tab_contents").removeClass("disabled"),
$("div.subpacks.tab_contents input").prop("disabled",!1),$("div.subpacks.tab_contents .tab_controls_bar").removeClass("disabled")):($("div.subpacks.tab_contents").addClass("disabled"),$("div.subpacks.tab_contents input").prop("disabled",!0),$("div.subpacks.tab_contents .tab_controls_bar").addClass("disabled"));A=!1;$("#header_min_engine_version").removeClass("disabled");$("#header_min_engine_version *").prop("disabled",!1);$("#header_base_game_version").addClass("disabled");$("#header_base_game_version *").prop("disabled",
!0);$("#header_lock_template_options").parent().addClass("disabled");$("#header_lock_template_options").prop("disabled",!0);for(var b=1;b<=$(".modules_controls_tab li").length;b++)switch($("div.modules_contents > div:nth-child("+b+") #modules_type option").prop("disabled",!1),$("div.modules_contents > div:nth-child("+b+") #modules_type").val()){case "resources":$(".modules_controls_add_tab").hide(150);B(b,"resources");break;case "data":1>=$(".modules_controls_tab li").length&&$(".modules_controls_add_tab").show(150);
B(b,"data");break;case "client_data":1>=$(".modules_controls_tab li").length&&$(".modules_controls_add_tab").show(150);B(b,"client_data");break;case "interface":$(".modules_controls_add_tab").hide(150);B(b,"interface");break;case "world_template":$(".modules_controls_add_tab").hide(150),B(b,"world_template"),A=!0,$("#header_min_engine_version").addClass("disabled"),$("#header_min_engine_version *").prop("disabled",!0),2<=y&&($("#header_base_game_version").removeClass("disabled"),$("#header_base_game_version *").prop("disabled",
!1)),$("#header_lock_template_options").parent().removeClass("disabled"),$("#header_lock_template_options").prop("disabled",!1)}E&&H();e();b={};b.format_version=y;b.header={};b.header.name=$("#header_pack_name").val();b.header.description=$("#header_description").val();b.header.version="replace_header_version";A||(b.header.min_engine_version="replace_header_min_engine_version");b.header.uuid=$("#header_uuid").val();$("#header_platform_locked").is(":checked")&&(b.header.platform_locked=!0);A&&(2<=
y&&(b.header.base_game_version="replace_base_game_version"),b.header.lock_template_options=$("#header_lock_template_options").is(":checked"));b.modules=[];for(var d=0;d<$(".modules_controls_tab li").length;d++){var a=d+1;b.modules[d]={};b.modules[d].type=$("div.modules_contents > div:nth-child("+a+") #modules_type").val();b.modules[d].description=$("div.modules_contents > div:nth-child("+a+") #modules_description").val();b.modules[d].version="replace_modules_"+d+"_version";b.modules[d].uuid=$("div.modules_contents > div:nth-child("+
a+") #modules_uuid").val()}if(r)for(b.dependencies=[],d=0;d<$(".dependencies.tab_controls_bar_tab li").length;d++)a=$("div.dependencies.tab_content_list > div:nth-child("+(d+1)+")"),b.dependencies[d]={},b.dependencies[d].uuid=a.find("#dependencies_uuid").val(),b.dependencies[d].version="replace_dependencies_"+d+"_version";C&&(b.capabilities=[],$("#experimental_custom_ui").is(":checked")&&b.capabilities.push("experimental_custom_ui"),$("#chemistry").is(":checked")&&b.capabilities.push("chemistry"),
$("#raytracing").is(":checked")&&b.capabilities.push("raytracing"));if(x){b.metadata={};b.metadata.authors=[];if($("div.metadata_author_list > div")[0])for(d=1;d<=$("div.metadata_author_list > div").length;d++)b.metadata.authors.push($("div.metadata_author_list > div:nth-child("+d+") > span.name").text());else b.metadata.authors.push("");b.metadata.url=$("#metadata_url").val();b.metadata.license=$("#metadata_license").val()}if(u)for(b.subpacks=[],d=0;d<$(".subpacks.tab_controls_bar_tab li").length;d++)a=
d+1,b.subpacks[d]={},a=$("div.subpacks.tab_content_list > div:nth-child("+a+")"),b.subpacks[d].folder_name=a.find("#subpacks_folder_name").val(),b.subpacks[d].name=a.find("#subpacks_name").val(),b.subpacks[d].memory_tier=Number(a.find("#subpacks_memory_tier").val());b=JSON.stringify(b,null,"  ");d=JSON.stringify([Number($("#header_version_major").val()),Number($("#header_version_minor").val()),Number($("#header_version_patch").val())]).split(/,/).join(", ");a=JSON.stringify([Number($("#header_min_engine_version_major").val()),
Number($("#header_min_engine_version_minor").val()),Number($("#header_min_engine_version_patch").val())]).split(/,/).join(", ");var c=JSON.stringify([Number($("#header_base_game_version_major").val()),Number($("#header_base_game_version_minor").val()),Number($("#header_base_game_version_patch").val())]).split(/,/).join(", ");b=b.replace('"replace_header_version"',d);b=A?b.replace('"replace_base_game_version"',c):b.replace('"replace_header_min_engine_version"',a);for(d=0;d<$(".modules_controls_tab li").length;d++)a=
d+1,a=JSON.stringify([Number($("div.modules_contents > div:nth-child("+a+") #modules_version_major").val()),Number($("div.modules_contents > div:nth-child("+a+") #modules_version_minor").val()),Number($("div.modules_contents > div:nth-child("+a+") #modules_version_patch").val())]).split(/,/).join(", "),b=b.replace('"replace_modules_'+d+'_version"',a);if(r)for(d=0;d<$(".dependencies.tab_controls_bar_tab li").length;d++)a=$("div.dependencies.tab_content_list > div:nth-child("+(d+1)+")"),a=JSON.stringify([Number(a.find("#dependencies_version_major").val()),
Number(a.find("#dependencies_version_minor").val()),Number(a.find("#dependencies_version_patch").val())]).split(/,/).join(", "),b=b.replace('"replace_dependencies_'+d+'_version"',a);$("pre.language-json code.language-json").remove();d='<code class="language-json">'+b+"</code>";$("pre.language-json").append(d);$("textarea#code_buffer").val(b);Prism.highlightAll()}function B(b,d){for(var a=1;a<=$(".modules_controls_tab li").length;a++)if(b!=a)switch(d){case "data":case "client_data":$("div.modules_contents > div:nth-child("+
a+") #modules_type option").prop("disabled",!0),$("div.modules_contents > div:nth-child("+a+') #modules_type option[value="client_data"]').prop("disabled",!1)}}function H(){$("ul.issue_list li").remove();$(".stat_warning,.stat_error").removeClass("stat_warning stat_error");var b=0;switch(y){case 2:1>=Number($("#header_min_engine_version_major").val())&&13>Number($("#header_min_engine_version_minor").val())&&(n("error","[Header:min engine version] version1.12\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002",
$("#header_min_engine_version_major").parent().find("input")),b++),1>=Number($("#header_base_game_version_major").val())&&13>Number($("#header_base_game_version_minor").val())&&(n("error","[Header:base game version] version1.12\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002",$("#header_base_game_version_major").parent().find("input")),b++)}G($("#header_uuid").val())||(n("error","[Header:uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",
$("#header_uuid")),b++);for(var d=0;d<$(".modules_controls_tab li").length;d++){var a=d+1,c=$("div.modules_contents > div:nth-child("+a+") #modules_type");null==c.val()&&(n("error","[Modules:"+d+":type] type\u304cnull\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002type\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002",c),b++);a=$("div.modules_contents > div:nth-child("+a+") #modules_uuid");G(a.val())||(n("error","[Modules:"+d+":uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",
a),b++)}if(r)for(d=0;d<$(".dependencies.tab_controls_bar_tab li").length;d++)a=$("div.dependencies.tab_content_list > div:nth-child("+(d+1)+") #dependencies_uuid"),G(a.val())||(n("error","[Dependencies:"+d+":uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",a),b++);if(u)for(d=0;d<$(".subpacks.tab_controls_bar_tab li").length;d++){a=$("div.subpacks.tab_content_list > div:nth-child("+(d+1)+")");c=a.find("#subpacks_folder_name");
if(null==c.val()||""==c.val())n("error","[Subpacks:"+d+":folder_name] \u30d5\u30a9\u30eb\u30c0\u30fc\u540d\u304c\u7a7a\u3067\u3059\u3002",c),b++;a=a.find("#subpacks_name");if(null==a.val()||""==a.val())n("error","[Subpacks:"+d+":name] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002",a),b++}d=0;switch(y){case 1:if(1<Number($("#header_min_engine_version_major").val())||13<=Number($("#header_min_engine_version_minor").val()))n("warning","[Header:min engine version] \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f31\u3067\u306f1.13\u3088\u308a\u4f4e\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3088\u308a\u9ad8\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f32\u3067\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002",
$("#header_min_engine_version_major").parent().find("input")),d++}""==$("#header_pack_name").val()&&(n("warning",'[Header:name] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002\u540d\u524d\u304c\u7a7a\u306e\u5834\u5408\u3001"\u540d\u524d\u304c\u3042\u308a\u307e\u305b\u3093"\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002',$("#header_pack_name")),d++);""==$("#header_description").val()&&(n("warning",'[Header:description] \u8aac\u660e\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u8aac\u660e\u304c\u7a7a\u306e\u5834\u5408\u3001"\u4e0d\u660e\u306a\u30d1\u30c3\u30af\u306e\u8aac\u660e"\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002',
$("#header_description")),d++);for(a=0;a<$(".modules_controls_tab li").length;a++)c=$("div.modules_contents > div:nth-child("+(a+1)+") #modules_description"),""==c.val()&&(n("warning","[Modules:"+a+":description] \u8aac\u660e\u304c\u3042\u308a\u307e\u305b\u3093\u3002",c),d++);!C||$("#experimental_custom_ui").is(":checked")||$("#chemistry").is(":checked")||$("#raytracing").is(":checked")||(n("warning","[Capabilities] \u9805\u76ee\u304c\u4e00\u3064\u3082\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",
$(".capabilities_list>input")),d++);if(x){if($("div.metadata_author_list > div")[0])for(a=1;a<=$("div.metadata_author_list > div").length;a++)""==$("div.metadata_author_list > div:nth-child("+a+") > span.name").text()&&(n("warning","[Metadata:author] \u7a7a\u306e\u540d\u524d\u304c\u5b58\u5728\u3057\u3066\u3044\u307e\u3059\u3002",$("div.metadata_author_list > div:nth-child("+a+") > span.name")),d++);else n("warning","[Metadata:author] \u540d\u524d\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",
$("#metadata_author")),d++;""==$("#metadata_url").val()&&(n("warning","[Metadata:url] URL\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",$("#metadata_url")),d++);""==$("#metadata_license").val()&&(n("warning","[Metadata:license] \u30e9\u30a4\u30bb\u30f3\u30b9\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",$("#metadata_license")),d++)}$("span.issue_warning_num").text("\u8b66\u544a:"+d);$("span.issue_error_num").text("\u30a8\u30e9\u30fc:"+b);0>=d&&0>=b&&$("ul.issue_list").append("<li>\u554f\u984c\u306f\u3042\u308a\u307e\u305b\u3093</li>")}
function n(b,d,a){var c="";"warning"==b?(c='<li><img src="img/warning.svg" alt=""><p>'+d+"</p></li>",a.addClass("stat_warning")):"error"==b&&(c='<li><img src="img/error.svg" alt=""><p>'+d+"</p></li>",a.addClass("stat_error"));$("ul.issue_list").append(c)}function G(b){return null===(""+b).match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$")?!1:!0}var D=!1,y=2,z=!1,r=!1,C=!1,x=!1,u=!1,A=!1,F,E=!0,t=0;p();$(window).bind("beforeunload",function(){if(D)return"\u3053\u306e\u30da\u30fc\u30b8\u3092\u96e2\u308c\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002"});
$(document).on("change","input,textarea,select",function(){p();D=!0});$(document).on("keyup","input,textarea,select",function(){p();D=!0});$(".separator").on("mousedown",function(b){z?z&&(z=!1):z=!0});$(document).on("mouseup",function(){z=!1;$("html").removeAttr("style","");$(".separator").prev().removeClass("drag_lock");$(".separator").next().removeClass("drag_lock")});$(document).on("mousemove",function(b){if(z){$("html").css("cursor","e-resize");$(".separator").prev().addClass("drag_lock");$(".separator").next().addClass("drag_lock");
var d=$("html").width()-5;b=d-b.clientX;d-=b;$(".separator").prev().css("flex-basis",d);$(".separator").next().css("flex-basis",b)}});$("#page_share").on("click",function(){var b={title:"\u3068\u304b\u3055\u3093\u306eManifestGenerator",text:"\u3068\u304b\u3055\u3093\u306eManifestGenerator -manifest.json\u3092\u7c21\u5358\u306b\u4f5c\u6210\u30fb\u7de8\u96c6-",url:"https://toka7290.github.io/MCAddonSetupManager/"};navigator.share&&navigator.share(b)});$("#input_file").on("change",function(){q()});$("#show_help").on("click",
function(){$("#page_help").fadeIn("fast");v()});$("#page_help").on("click",function(){v()});$(window).on("dragover",function(b){b.preventDefault();$(".import_file").addClass("on_drag")});$(window).on("dragleave",function(b){b.preventDefault();$(".import_file").removeClass("drag_over on_drag")});$(".import_file").on("dragover",function(b){b.preventDefault();$(".import_file").addClass("drag_over")});$(".import_file").on("dragleave",function(b){b.preventDefault();$(".import_file").removeClass("drag_over on_drag")});
$(".import_file").on("drop",function(b){D=!0;$(".import_file").removeClass("drag_over on_drag");var d=b;b.originalEvent&&(d=b.originalEvent);d.stopPropagation();d.preventDefault();$("#input_file").prop("files",d.dataTransfer.files);q()});$("div#show_preview").on("click",function(){$("div.preview").slideToggle();"active"==$("div#show_preview").attr("class")?$("div#show_preview").removeClass("active"):$("div#show_preview").addClass("active")});$(window).resize(function(){$("div.preview").removeAttr("style",
"");$("div.editor").removeAttr("style","");$("div.data_check").removeAttr("style","");t=5;v()});$("p#open_about").on("click",function(){$("div.page_about").fadeIn()});$("div.close_about").on("click",function(){$("div.page_about").fadeOut()});$("p.preview_control_copy").on("click",function(){$("textarea#code_buffer").select();document.execCommand("copy");$("p.preview_control_copy").text("Copied");$("textarea#code_buffer").blur();setTimeout(function(){$("p.preview_control_copy").text("Copy")},1E3)});
$("p.preview_control_download").on("click",function(){var b=$("textarea#code_buffer").val();$("<a></a>",{href:window.URL.createObjectURL(new Blob([b])),download:"manifest.json",target:"_blank"})[0].click()});$("div.issue_control_bar").on("click",function(){"close"==$("div.issue_control_bar img").attr("class")?$("div.issue_control_bar img").attr("class","open"):"open"==$("div.issue_control_bar img").attr("class")&&$("div.issue_control_bar img").attr("class","close");$("div.issue_content").slideToggle()});
$("#format_version").on("change",function(){y=Number($("#format_version").val())});$(document).on("click",'input[type="button"].generate_uuid',function(){$(this).prev().val(g);p()});$(document).on("click",".modules_controls_tab li",function(){var b=$(".modules_controls_tab li").index(this);$(".modules_controls_tab li").removeClass("selected_tab");$(".modules_controls_tab li").eq(b).addClass("selected_tab");$(".modules_contents > div").removeClass("selected_tab_content");$(".modules_contents > div").eq(b).addClass("selected_tab_content")});
$(document).on("click",".modules_controls_tab li span.delete_tab",function(b){var d=$(this).parent(),a=d.index(),c=$(".modules_controls_tab li"),f=$(".modules_contents > div");d.hide(150,function(){f.eq(a).remove();c.eq(a).hasClass("selected_tab")&&(0>a-1&&(a=2),c.eq(a-1).addClass("selected_tab"),f.eq(a-1).addClass("selected_tab_content"));d.remove();c=$(".modules_controls_tab li");for(var m=0;m<c.length;m++)c.eq(m).html(m+'<span class="delete_tab">\u00d7</span>');1>=c.length&&$(".modules_controls_add_tab").show(150);
p()});b.stopPropagation()});$(".modules_controls_add_tab").on("click",function(){h();p()});$(document).on("click",".tab_controls_bar_tab li",function(){if(u&&$(this).parents(".tab_controls").hasClass("subpacks")||r&&$(this).parents(".tab_controls").hasClass("dependencies")){var b=$(this).index(),d=$(this).parent(),a=d.children("li");a.removeClass("selected_tab");a.eq(b).addClass("selected_tab");d=d.parents(".tab_controls").next().children("div");d.removeClass("selected_tab_content");d.eq(b).addClass("selected_tab_content")}});
$(document).on("click",".tab_controls_bar_tab li span.delete_tab",function(b){if(u&&$(this).parents(".tab_controls").hasClass("subpacks")||r&&$(this).parents(".tab_controls").hasClass("dependencies")){var d=$(this).parent(),a=d.parent(),c=a.children("li"),f=d.index(),m=a.parents(".tab_controls").next().children("div");d.hide(150,function(){m.eq(f).remove();d.hasClass("selected_tab")&&(0>f-1&&(f=2),c.eq(f-1).addClass("selected_tab"),m.eq(f-1).addClass("selected_tab_content"));d.remove();c=a.children("li");
for(var w=0;w<c.length;w++)c.eq(w).html(w+'<span class="delete_tab">\u00d7</span>');p()})}b.stopPropagation()});$(".tab_controls_add_tab").on("click",function(){(u&&$(this).hasClass("subpacks")||r&&$(this).hasClass("dependencies"))&&l($(this).prev());p()});$("#metadata_author_add").on("click",function(){x&&(k($("#metadata_author").val()),$("#metadata_author").val(""));p()});$(document).on("click","span.metadata_delete_author",function(){if(x){var b=$(this).parent();b.hide(150,function(){b.remove();
p()})}})});
