function z(f){var g=0;return function(){return g<f.length?{done:!1,value:f[g++]}:{done:!0}}}function F(f){var g="undefined"!=typeof Symbol&&Symbol.iterator&&f[Symbol.iterator];return g?g.call(f):{next:z(f)}}function G(f){for(var g,h=[];!(g=f.next()).done;)h.push(g.value);return h}function L(f,g,h){f instanceof String&&(f=String(f));for(var n=f.length,m=0;m<n;m++){var q=f[m];if(g.call(h,q,m,f))return{g:m,h:q}}return{g:-1,h:void 0}}
var M="function"==typeof Object.defineProperties?Object.defineProperty:function(f,g,h){if(f==Array.prototype||f==Object.prototype)return f;f[g]=h.value;return f};function N(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var g=0;g<f.length;++g){var h=f[g];if(h&&h.Math==Math)return h}throw Error("Cannot find global object");}var R=N(this);
function S(f,g){if(g)a:{var h=R;f=f.split(".");for(var n=0;n<f.length-1;n++){var m=f[n];if(!(m in h))break a;h=h[m]}f=f[f.length-1];n=h[f];g=g(n);g!=n&&null!=g&&M(h,f,{configurable:!0,writable:!0,value:g})}}S("Array.prototype.find",function(f){return f?f:function(g,h){return L(this,g,h).h}});
S("Symbol",function(f){function g(m){if(this instanceof g)throw new TypeError("Symbol is not a constructor");return new h("jscomp_symbol_"+(m||"")+"_"+n++,m)}function h(m,q){this.i=m;M(this,"description",{configurable:!0,writable:!0,value:q})}if(f)return f;h.prototype.toString=function(){return this.i};var n=0;return g});
S("Symbol.iterator",function(f){if(f)return f;f=Symbol("Symbol.iterator");for(var g="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),h=0;h<g.length;h++){var n=R[g[h]];"function"===typeof n&&"function"!=typeof n.prototype[f]&&M(n.prototype,f,{configurable:!0,writable:!0,value:function(){return T(z(this))}})}return f});function T(f){f={next:f};f[Symbol.iterator]=function(){return this};return f}
function U(f,g){f instanceof String&&(f+="");var h=0,n=!1,m={next:function(){if(!n&&h<f.length){var q=h++;return{value:g(q,f[q]),done:!1}}n=!0;return{done:!0,value:void 0}}};m[Symbol.iterator]=function(){return m};return m}S("Array.prototype.keys",function(f){return f?f:function(){return U(this,function(g){return g})}});S("Array.prototype.findIndex",function(f){return f?f:function(g,h){return L(this,g,h).g}});
$(function(){function f(a){a=void 0===a?"":a;var d=$("."+a+".tab-body"),b=d.children("label").length;d.append($("<label>").addClass(a+" tab-children invisible-Control").append($("<input>").attr("type","button").addClass(a),$("<div>").addClass("tab-number").text(b),$("<div>").addClass("tab-underBar")));d.children("li:last-child").hide().show(150);a=$("."+a+".tab-content-list");a.append(a.children("div:first-child").clone().removeClass("selected-tab-content"))}function g(a){a=void 0===a?"":a;$("div.authors-list").append($("<label>").addClass("author-name").append($("<div>").addClass("author-num").text($(".author-name").length),
$("<input>").attr({type:"text",j:"metadata_author",value:a})))}function h(){H=!1;"number"===typeof I&&window.clearTimeout(I);I=window.setTimeout(function(){H=!0;O()},500)}function n(){for(var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""),d=0,b=a.length;d<b;d++)switch(a[d]){case "x":a[d]=Math.floor(16*Math.random()).toString(16);break;case "y":a[d]=(Math.floor(4*Math.random())+8).toString(16)}return a.join("")}function m(){var a=$("#input-file").prop("files")[0],d=new FileReader;d.onload=function(){a:{var b=
d.result;b=void 0===b?"":b;var c={};try{c=JSON.parse(b)}catch(p){window.alert(V(b,p.message));console.error("error:"+p);break a}if(null!=c.format_version)$("#format_version").val(c.format_version);else if(null!=c.header.modules){null!=c.header.pack_id&&$("#header_uuid").val(c.header.pack_id);null!=c.header.name&&$("#header_pack_name").val(c.header.name);null!=c.header.packs_version&&(b=c.header.packs_version.split("."),null!=b[0]&&$("#header_version_major").val(b[0]),null!=b[1]&&$("#header_version_minor").val(b[1]),
null!=b[2]&&$("#header_version_patch").val(b[2]));null!=c.header.description&&$("#header_description").val(c.header.description);if(null!=c.header.modules)for(b=0;b<c.header.modules.length;b++){var e=b+1;0<b&&f("modules");null!=c.header.modules[b].type&&$(".modules.tab-content-list > div:nth-child("+e+") #modules_type").val(c.header.modules[b].type);null!=c.header.modules[b].description&&$(".modules.tab-content-list > div:nth-child("+e+") #modules_description").val(c.header.modules[b].description);
if(null!=c.header.modules[b].version){var k=c.header.modules[b].version.split(".");null!=k[0]&&$(".modules.tab-content-list > div:nth-child("+e+") #modules_version_major").val(k[0]);null!=k[1]&&$(".modules.tab-content-list > div:nth-child("+e+") #modules_version_minor").val(k[1]);null!=k[2]&&$(".modules.tab-content-list > div:nth-child("+e+") #modules_version_patch").val(k[2])}null!=c.header.modules[b].uuid&&$(".modules.tab-content-list > div:nth-child("+e+") #modules_uuid").val(c.header.modules[b].uuid)}if(null!=
c.header.dependencies)for($("#dependencies_enable").prop("checked",!0),b=0;b<c.header.dependencies.length;b++)e=b+1,0<b&&f("dependencies"),e=$("div.dependencies.tab-content-list > div:nth-child("+e+")"),null!=c.header.dependencies[b].uuid&&e.find("#dependencies_uuid").val(c.header.dependencies[b].uuid),null!=c.header.dependencies[b].version&&(k=c.header.dependencies[b].version.split("."),null!=k[0]&&e.find("#dependencies_version_major").val(k[0]),null!=k[1]&&e.find("#dependencies_version_minor").val(k[1]),
null!=k[2]&&e.find("#dependencies_version_patch").val(k[2]));window.alert("\u53e4\u3044\u5f62\u5f0f(pack_manifest.json)\u304b\u3089\u5909\u63db\u3057\u307e\u3059\u3002");t();break a}null!=c.header.name&&$("#header_pack_name").val(c.header.name);null!=c.header.description&&$("#header_description").val(c.header.description);null!=c.header.version&&(null!=c.header.version[0]&&$("#header_version_major").val(c.header.version[0]),null!=c.header.version[1]&&$("#header_version_minor").val(c.header.version[1]),
null!=c.header.version[2]&&$("#header_version_patch").val(c.header.version[2]));null!=c.header.min_engine_version&&(null!=c.header.min_engine_version[0]&&$("#header_min_engine_version_major").val(c.header.min_engine_version[0]),null!=c.header.min_engine_version[1]&&$("#header_min_engine_version_minor").val(c.header.min_engine_version[1]),null!=c.header.min_engine_version[2]&&$("#header_min_engine_version_patch").val(c.header.min_engine_version[2]));null!=c.header.uuid&&$("#header_uuid").val(c.header.uuid);
null!=c.header.platform_locked&&c.header.platform_locked&&$("#header_platform_locked").prop("checked",!0);null!=c.header.base_game_version&&(null!=c.header.base_game_version[0]&&$("#header_base_game_version_major").val(c.header.base_game_version[0]),null!=c.header.base_game_version[1]&&$("#header_base_game_version_minor").val(c.header.base_game_version[1]),null!=c.header.base_game_version[2]&&$("#header_base_game_version_patch").val(c.header.base_game_version[2]));null!=c.header.lock_template_options&&
c.header.lock_template_options&&$("#header_lock_template_options").prop("checked",!0);if(null!=c.modules)for(b=0;b<c.modules.length;b++)e=b+1,0<b&&f("modules"),null!=c.modules[b].type&&$(".modules.tab-content-list > div:nth-child("+e+") #modules_type").val(c.modules[b].type),null!=c.modules[b].description&&$(".modules.tab-content-list > div:nth-child("+e+") #modules_description").val(c.modules[b].description),null!=c.modules[b].version&&(null!=c.modules[b].version[0]&&$(".modules.tab-content-list > div:nth-child("+
e+") #modules_version_major").val(c.modules[b].version[0]),null!=c.modules[b].version[1]&&$(".modules.tab-content-list > div:nth-child("+e+") #modules_version_minor").val(c.modules[b].version[1]),null!=c.modules[b].version[2]&&$(".modules.tab-content-list > div:nth-child("+e+") #modules_version_patch").val(c.modules[b].version[2])),null!=c.modules[b].uuid&&$(".modules.tab-content-list > div:nth-child("+e+") #modules_uuid").val(c.modules[b].uuid);if(null!=c.dependencies)for($("#dependencies_enable").prop("checked",
!0),b=0;b<c.dependencies.length;b++)e=b+1,0<b&&f("dependencies"),e=$("div.dependencies.tab-content-list > div:nth-child("+e+")"),null!=c.dependencies[b].uuid&&e.find("#dependencies_uuid").val(c.dependencies[b].uuid),null!=c.dependencies[b].version&&(null!=c.dependencies[b].version[0]&&e.find("#dependencies_version_major").val(c.dependencies[b].version[0]),null!=c.dependencies[b].version[1]&&e.find("#dependencies_version_minor").val(c.dependencies[b].version[1]),null!=c.dependencies[b].version[2]&&
e.find("#dependencies_version_patch").val(c.dependencies[b].version[2]));if(null!=c.capabilities)for($("#capabilities_enable").prop("checked",!0),b=F(c.capabilities),e=b.next();!e.done;e=b.next())switch(e.value){case "experimental_custom_ui":$("#experimental_custom_ui").prop("checked",!0);break;case "chemistry":$("#chemistry").prop("checked",!0);break;case "raytracing":$("#raytracing").prop("checked",!0)}if(null!=c.metadata){$("#metadata_enable").prop("checked",!0);if(null!=c.metadata.authors)for(b=
F(c.metadata.authors),e=b.next();!e.done;e=b.next())g(e.value);null!=c.metadata.url&&$("#metadata_url").val(c.metadata.url);null!=c.metadata.license&&$("#metadata_license").val(c.metadata.license)}if(null!=c.subpacks)for($("#subpacks_enable").prop("checked",!0),b=0;b<c.subpacks.length;b++)e=b+1,0<b&&f("subpacks"),e=$("div.subpacks.tab-content-list > div:nth-child("+e+")"),null!=c.subpacks[b].folder_name&&e.find("#subpacks_folder_name").val(c.subpacks[b].folder_name),null!=c.subpacks[b].name&&e.find("#subpacks_name").val(c.subpacks[b].name),
null!=c.subpacks[b].memory_tier&&e.find("#subpacks_memory_tier").val(c.subpacks[b].memory_tier);t()}};try{d.readAsText(a)}catch(b){console.error("error:"+b)}}function q(){switch(v){case 1:$("#help-content-1").fadeOut("fast");$("#help-content_2").slideToggle("fast");v++;break;case 2:$("#help-content_2").slideToggle("fast");$("#help-content-3").fadeIn("fast");v++;break;case 3:$("#help-content-3").fadeOut("fast");$("#page-help").hide();v=0;break;case 5:$("#help-content-1").hide();$("#help-content_2").hide();
$("#help-content-3").hide();$("#page-help").hide();v=0;break;default:$("#help-content-1").fadeIn("fast"),v++}}function t(){W();X(Y());H&&O();h();var a=Z();$("pre.language-json code.language-json").remove();var d='<code class="language-json">'+a+"</code>";$("pre.language-json").append(d);$("textarea#code-buffer").val(a);a=$("#header_pack_name").val().toString();if(""==a)a="\u540d\u524d\u304c\u3042\u308a\u307e\u305b\u3093";else if(null!=a.match(/\\/g)){a=a.split("\\\\");d="";for(var b in a){var c=a[b].indexOf("\\n");
1<=b&&(d+="\\\\");if(-1!=c){d+=a[b].slice(0,a[b].indexOf("\\n")-a[b].length)+"\u2026";break}else d+=""+a[b]}a=d}$("#card-title").html(MinecraftText.toHTML(a));c=$("#header_description").val().toString();if(""==c)c="\u00a7c\u4e0d\u660e\u306a\u30d1\u30c3\u30af\u306e\u8aac\u660e";else if(null!=c.match(/\\/g)){a=b=0;d="";c=c.split("\\\\");for(var e in c){do if(a++,b=c[e].indexOf("\\n",b+1),-1==b)break;while(3>a);1<=e&&(d+="\\\\");if(-1!=b){d+=c[e].slice(0,b+1-c[e].length)+"\u2026";break}else d+=""+c[e]}c=
d}$("#card-description").html(MinecraftText.toHTML(c));MinecraftText.refeashObfuscate();Prism.highlightAll()}function X(a){a=void 0===a?[0,0]:a;P(".modules",[!0].concat(a instanceof Array?a:G(F(a))));[".dependencies",".subpacks"].forEach(function(d,b){P(d,[[r,u][b],[r,u][b],[r,u][b]&&1<$(d+".tab-children").length])});1<$(".author-name").length?$(".remove-author").removeClass("disabled").find("input").prop("disabled",!1):$(".remove-author").addClass("disabled").find("input").prop("disabled",!0)}function P(a,
d){a=void 0===a?"":a;d=void 0===d?[0,0,0]:d;[".tab-body",".add-tab",".remove-tab"].forEach(function(b,c){b=$(a+b);1==d[c]?b.removeClass("disabled").find("input").prop("disabled",!1):0==d[c]&&b.addClass("disabled").find("input").prop("disabled",!0)})}function W(){r=$("#dependencies_enable").is(":checked")||$("#dependencies_enable").is(":indeterminate");C=$("#capabilities_enable").is(":checked")||$("#capabilities_enable").is(":indeterminate");A=$("#metadata_enable").is(":checked")||$("#metadata_enable").is(":indeterminate");
u=$("#subpacks_enable").is(":checked")||$("#subpacks_enable").is(":indeterminate");var a=$(".dependencies.tab-content-list div.value-element");r?(a.find("div.value-label").removeClass("disabled"),a.find("input").prop("disabled",!1),""==$("#dependencies_uuid").val()?$("#dependencies_enable").prop("indeterminate",!0):$("#dependencies_enable").prop("indeterminate",!1)):(a.find("div.value-label").addClass("disabled"),a.find("input").prop("disabled",!0));a=$(".capabilities_list .value-element");C?(a.removeClass("disabled"),
a.find("input").prop("disabled",!1),$("div.capabilities_list div input").is(":checked")?$("#capabilities_enable").prop("indeterminate",!1):$("#capabilities_enable").prop("indeterminate",!0)):(a.addClass("disabled"),a.find("input").prop("disabled",!0));a=$(".metadata_list .value-element");A?(a.removeClass("disabled"),a.find("input").prop("disabled",!1),[0<$(".metadata_author").length?""!=$(".metadata_author").val():!1,""!=$("#metadata_url").val(),""!=$("#metadata_license").val()].some(function(d){return d})?
$("#metadata_enable").prop("indeterminate",!1):$("#metadata_enable").prop("indeterminate",!0)):(a.addClass("disabled"),a.find("input").prop("disabled",!0));a=$(".subpacks.tab-content-list div.value-element");u?(a.find("div.value-label").removeClass("disabled"),a.find("input").prop("disabled",!1),""==$("#subpacks_folder_name").val()&&""==$("#subpacks_name").val()?$("#subpacks_enable").prop("indeterminate",!0):$("#subpacks_enable").prop("indeterminate",!1)):(a.find("div.value-label").addClass("disabled"),
a.find("input").prop("disabled",!0))}function Y(){B=!1;var a=[!1,!1,!1,!1,!1],d={resources:0,data:1,client_data:2,"interface":3,world_template:4},b=$("#min_engine_version").removeClass("disabled"),c=$("#min_engine_version_input input").prop("disabled",!1),e=$("#base_game_version").addClass("disabled"),k=$("#base_game_version_input input").prop("disabled",!0),p=$("#header_lock_template_options");p.parent().addClass("disabled");p.prop("disabled",!0);for(var w=$(".modules.tab-children").length,D=1;D<=
w;D++){var J=$(".modules.tab-content-list > div:nth-child("+D+") #modules_type");J.children("option").prop("disabled",!1);var Q=J.val();if(a[d[Q]]||1==D)switch(Q){case "data":a[2]=!0;break;case "client_data":a[1]=!0;break;case "world_template":B=!0,b.addClass("disabled"),c.prop("disabled",!0),2<=x&&(e.removeClass("disabled"),k.prop("disabled",!1)),p.parent().removeClass("disabled"),p.prop("disabled",!1)}else J.val(Object.keys(d)[a.indexOf(!0)]);aa(w,a,d)}return[a.some(function(ba){return ba})&&1>=
w,1<w]}function aa(a,d,b){for(var c=2;c<=a;c++)for(var e in b)$(".modules.tab-content-list > div:nth-child("+c+") #modules_type option[value="+e+"]").prop("disabled",!d[b[e]])}function O(){$("ul.issue-list li").remove();$(".stat-warning,.stat_error").removeClass("stat-warning stat_error");var a=0;var d=$("#header_pack_name").val().toString().replace(/\\\\/g,"");"\\"==d.slice(-1)&&(l("error",'[Header:name] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',
$("#header_pack_name")),a++);d=$("#header_description").val().toString().replace(/\\\\/g,"");"\\"==d.slice(-1)&&(l("error",'[Header:description] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',$("#header_description")),a++);switch(x){case 2:1>=Number($("#header_min_engine_version_major").val())&&13>Number($("#header_min_engine_version_minor").val())&&
(l("error","[Header:min engine version] version1.12\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002",$("#header_min_engine_version_major").parent().find("input")),a++),1>=Number($("#header_base_game_version_major").val())&&13>Number($("#header_base_game_version_minor").val())&&(l("error","[Header:base game version] version1.12\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002",$("#header_base_game_version_major").parent().find("input")),
a++)}K($("#header_uuid").val())||(l("error","[Header:uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",$("#header_uuid")),a++);for(var b=$(".modules.tab-children").length,c=0;c<b;c++){var e=c+1;d=$(".modules.tab-content-list > div:nth-child("+e+") #modules_type");null==d.val()&&(l("error","[Modules:"+c+":type] type\u304cnull\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002type\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002",
d),a++);var k=$(".modules.tab-content-list > div:nth-child("+e+") #modules_description");d=k.val().replace(/\\\\/g,"");"\\"==d.slice(-1)&&(l("error","[Modules:"+c+':description] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',k),a++);d=$(".modules.tab-content-list > div:nth-child("+e+") #modules_uuid");K(d.val())||(l("error",
"[Modules:"+c+":uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",d),a++)}if(r)for(d=$(".dependencies.tab-children").length,b=0;b<d;b++)c=$("div.dependencies.tab-content-list > div:nth-child("+(b+1)+") #dependencies_uuid"),K(c.val())||(l("error","[Dependencies:"+b+":uuid] \u5165\u529b\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u6709\u52b9\u306aUUID\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",
c),a++);if(A){b=$("label.author-name").length;for(c=0;c<b;c++)e=$("input.metadata_author").eq(c),d=e.val().replace(/\\\\/g,""),"\\"==d.slice(-1)&&(l("error","[Metadata:author:"+c+'] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u6d88\u53bb\u3059\u308b\u304b\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3057\u3066\u518d\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002',e),a++);d=$("#metadata_url").val().replace(/\\\\/g,"");"\\"==
d.slice(-1)&&(l("error",'[Metadata:url] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',$("#metadata_url")),a++);d=$("#metadata_license").val().toString().replace(/\\\\/g,"");"\\"==d.slice(-1)&&(l("error",'[Metadata:license] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',
$("#metadata_license")),a++)}if(u)for(b=$(".subpacks.tab-children").length,c=0;c<b;c++){d=$("div.subpacks.tab-content-list > div:nth-child("+(c+1)+")");e=d.find("#subpacks_folder_name");if(null==e.val()||""==e.val())l("error","[Subpacks:"+c+":folder_name] \u30d5\u30a9\u30eb\u30c0\u30fc\u540d\u304c\u7a7a\u3067\u3059\u3002",e),a++;e=d.find("#subpacks_name");d=e.val().toString();if(null==d||""==d)l("error","[Subpacks:"+c+":name] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002",e),a++;d=d.replace(/\\\\/g,
"");"\\"==d.slice(-1)&&(l("error","[Subpacks:"+c+':name] \u6700\u5f8c\u306e\u6587\u5b57\u304c\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5"\\"\u3067\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u306b\u3059\u308b\u304b\u6d88\u53bb\u3057\u3066\u304f\u3060\u3055\u3044\u3002',e),a++)}d=0;switch(x){case 1:if(1<Number($("#header_min_engine_version_major").val())||13<=Number($("#header_min_engine_version_minor").val()))l("warning","[Header:min engine version] \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f31\u3067\u306f1.13\u3088\u308a\u4f4e\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3088\u308a\u9ad8\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f32\u3067\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002",
$("#header_min_engine_version_major").parent().find("input")),d++}""==$("#header_pack_name").val()&&(l("warning",'[Header:name] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002\u540d\u524d\u304c\u7a7a\u306e\u5834\u5408\u3001"\u540d\u524d\u304c\u3042\u308a\u307e\u305b\u3093"\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002',$("#header_pack_name")),d++);""==$("#header_description").val()&&(l("warning",'[Header:description] \u8aac\u660e\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u8aac\u660e\u304c\u7a7a\u306e\u5834\u5408\u3001"\u4e0d\u660e\u306a\u30d1\u30c3\u30af\u306e\u8aac\u660e"\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002',
$("#header_description")),d++);b=$(".modules.tab-children").length;for(c=0;c<b;c++)e=$(".modules.tab-content-list > div:nth-child("+(c+1)+") #modules_description"),""==e.val()&&(l("warning","[Modules:"+c+":description] \u8aac\u660e\u304c\u3042\u308a\u307e\u305b\u3093\u3002",e),d++);!C||$("#experimental_custom_ui").is(":checked")||$("#chemistry").is(":checked")||$("#raytracing").is(":checked")||(l("warning","[Capabilities] \u9805\u76ee\u304c\u4e00\u3064\u3082\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",
$(".capabilities_list>input")),d++);if(A){if(b=$("label.author-name").length)for(c=0;c<b;c++)e=$("input.metadata_author").eq(c),""==e.val()&&(l("warning","[Metadata:author:"+c+"] \u540d\u524d\u304c\u7a7a\u3067\u3059\u3002",e),d++);else l("warning","[Metadata:author] \u540d\u524d\u304c\u4e00\u3064\u3082\u3042\u308a\u307e\u305b\u3093\u3002",$("div.add-author")),d++;""==$("#metadata_url").val()&&(l("warning","[Metadata:url] URL\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",$("#metadata_url")),
d++);""==$("#metadata_license").val()&&(l("warning","[Metadata:license] \u30e9\u30a4\u30bb\u30f3\u30b9\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",$("#metadata_license")),d++)}$("span.issue_warning_num").text("\u8b66\u544a:"+d);$("span.issue_error_num").text("\u30a8\u30e9\u30fc:"+a);0>=d&&0>=a&&$("ul.issue-list").append("<li>\u554f\u984c\u306f\u3042\u308a\u307e\u305b\u3093</li>")}function l(a,d,b){var c=$("<li>");"warning"==a?(c.append($("<img>").attr({src:"img/warning.svg",
alt:"",width:"19px",height:"19px"}),$("<p>").text(d)),b.addClass("stat-warning")):"error"==a&&(c.append($("<img>").attr({src:"img/error.svg",alt:"",width:"19px",height:"19px"}),$("<p>").text(d)),b.addClass("stat-error"));$("ul.issue-list").append(c)}function K(a){return null===(void 0===a?"":a).match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$")?!1:!0}function V(a,d){a=void 0===a?"":a;d=void 0===d?"":d;var b="\u6709\u52b9\u306ajson\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002";
if(""==a||""==d)return b;d=d.split(" ");var c=d.findIndex(function(k){return"line"==k}),e=d.findIndex(function(k){return"position"==k});-1!=c?(d=parseInt(d[c+1],10),e=function(k){for(var p=0,w=1;w<k;w++)p=a.indexOf("\n",p)+1;return p},c=e(d-1),e=e(d+1)-1,b+="\n"+(d-1)+"~"+d+"\u884c\u3067\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n"+a.substring(c,e)):-1!=e&&(d=d[e+1],c=a.lastIndexOf("\n",a.lastIndexOf("\n",d)-1)+1,e=a.substr(0,c).match(/\n/g).length+1,b+="\n"+e+"~"+(e+1)+"\u884c\u3067\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n"+
a.substring(c,a.indexOf("\n",d-1)));return b}function Z(){var a={};a.format_version=x;a.header={};a.header.name="replace_header_pack_name";a.header.description="replace_header_description";a.header.version="replace_header_version";B||(a.header.min_engine_version="replace_header_min_engine_version");a.header.uuid=$("#header_uuid").val();$("#header_platform_locked").is(":checked")&&(a.header.platform_locked=!0);B&&(2<=x&&(a.header.base_game_version="replace_base_game_version"),a.header.lock_template_options=
$("#header_lock_template_options").is(":checked"));a.modules=[];for(var d=$(".modules.tab-children").length,b=0;b<d;b++){var c=b+1;a.modules[b]={};a.modules[b].type=$(".modules.tab-content-list > div:nth-child("+c+") #modules_type").val();a.modules[b].description="replace_modules_"+b+"_description";a.modules[b].version="replace_modules_"+b+"_version";a.modules[b].uuid=$(".modules.tab-content-list > div:nth-child("+c+") #modules_uuid").val()}if(r)for(a.dependencies=[],d=$(".dependencies.tab-children").length,
b=0;b<d;b++)c=$("div.dependencies.tab-content-list > div:nth-child("+(b+1)+")"),a.dependencies[b]={},a.dependencies[b].uuid=c.find("#dependencies_uuid").val(),a.dependencies[b].version="replace_dependencies_"+b+"_version";C&&$("div.capabilities_list div input").is(":checked")&&(a.capabilities=[],$("#experimental_custom_ui").is(":checked")&&a.capabilities.push("experimental_custom_ui"),$("#chemistry").is(":checked")&&a.capabilities.push("chemistry"),$("#raytracing").is(":checked")&&a.capabilities.push("raytracing"));
d=[0<$(".metadata_author").length?""!=$(".metadata_author").val():!1,""!=$("#metadata_url").val(),""!=$("#metadata_license").val()];if(A&&d.some(function(e){return e})){a.metadata={};if(d[0])for(a.metadata.authors=[],b=$("label.author-name").length,c=0;c<b;c++)a.metadata.authors.push("replace_"+c+"_author");d[1]&&(a.metadata.url="replace_metadata_url");d[2]&&(a.metadata.license="replace_metadata_license")}if(u)for(a.subpacks=[],d=$(".subpacks.tab-children").length,b=0;b<d;b++)c=b+1,a.subpacks[b]=
{},c=$("div.subpacks.tab-content-list > div:nth-child("+c+")"),a.subpacks[b].folder_name=c.find("#subpacks_folder_name").val(),a.subpacks[b].name="replace_subpacks_name",a.subpacks[b].memory_tier=Number(c.find("#subpacks_memory_tier").val());return ca(JSON.stringify(a,null,"  "))}function ca(a){a=a.replace("replace_header_pack_name",$("#header_pack_name").val());a=a.replace("replace_header_description",$("#header_description").val());var d=JSON.stringify([Number($("#header_version_major").val()),
Number($("#header_version_minor").val()),Number($("#header_version_patch").val())]).split(/,/).join(", "),b=JSON.stringify([Number($("#header_min_engine_version_major").val()),Number($("#header_min_engine_version_minor").val()),Number($("#header_min_engine_version_patch").val())]).split(/,/).join(", "),c=JSON.stringify([Number($("#header_base_game_version_major").val()),Number($("#header_base_game_version_minor").val()),Number($("#header_base_game_version_patch").val())]).split(/,/).join(", ");a=
a.replace('"replace_header_version"',d);a=B?a.replace('"replace_base_game_version"',c):a.replace('"replace_header_min_engine_version"',b);for(d=0;d<$(".modules.tab-children").length;d++)b=d+1,a=a.replace("replace_modules_"+d+"_description",$(".modules.tab-content-list > div:nth-child("+b+") #modules_description").val()),b=JSON.stringify([Number($(".modules.tab-content-list > div:nth-child("+b+") #modules_version_major").val()),Number($(".modules.tab-content-list > div:nth-child("+b+") #modules_version_minor").val()),
Number($(".modules.tab-content-list > div:nth-child("+b+") #modules_version_patch").val())]).split(/,/).join(", "),a=a.replace('"replace_modules_'+d+'_version"',b);if(r)for(d=$(".dependencies.tab-children").length,b=0;b<d;b++)c=$("div.dependencies.tab-content-list > div:nth-child("+(b+1)+")"),c=JSON.stringify([Number(c.find("#dependencies_version_major").val()),Number(c.find("#dependencies_version_minor").val()),Number(c.find("#dependencies_version_patch").val())]).split(/,/).join(", "),a=a.replace('"replace_dependencies_'+
b+'_version"',c);d=$("label.author-name").length;for(b=0;b<d;b++)a=a.replace("replace_"+b+"_author",$("input.metadata_author").eq(b).val());a=a.replace("replace_metadata_url",$("#metadata_url").val());a=a.replace("replace_metadata_license",$("#metadata_license").val());d=$(".subpacks.tab-children").length;for(b=0;b<d;b++)a=a.replace("replace_subpacks_name",$("div.subpacks.tab-content-list > div:nth-child("+(b+1)+") #subpacks_name").val());return a}var E=!1,x=2,y=!1,r=!1,C=!1,A=!1,u=!1,B=!1,I,H=!0,
v=0;t();$(window).bind("beforeunload",function(){if(E)return"\u3053\u306e\u30da\u30fc\u30b8\u3092\u96e2\u308c\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002"});$(document).on("change","input,textarea,select",function(){t();E=!0});$(document).on("keyup","input,textarea,select",function(){t();E=!0});$("textarea").on("keydown",function(a){if("Enter"==a.key)return!1});$(".separator").on("mousedown",function(){y?y&&(y=!1):y=!0});$(document).on("mouseup",function(){y=!1;$("html").css("cursor","");
var a=$(".separator");a.prev().removeClass("drag-lock");a.next().removeClass("drag-lock")});$(document).on("mousemove",function(a){if(y){$("html").css("cursor","e-resize");var d=$(".separator");d.prev().addClass("drag-lock");d.next().addClass("drag-lock");var b=$("html").width()-2;a=b-a.clientX;b-=a;d.next().css("flex-basis",a);d.prev().css("flex-basis",b)}});$("#page-share").on("click",function(){var a={title:"\u3068\u304b\u3055\u3093\u306e Manifest Generator",text:"\u3068\u304b\u3055\u3093\u306e Manifest Generator -manifest.json\u3092\u7c21\u5358\u306b\u4f5c\u6210\u30fb\u7de8\u96c6-",
url:"https://toka7290.github.io/MCAddonSetupManager/"};navigator.share&&navigator.share(a)});$("#input-file").on("change",function(){m()});$("#show_help").on("click",function(){$("#page-help").fadeIn("fast");q()});$("#page-help").on("click",function(){q()});$(document).on("dragenter dragover",function(a){a.stopPropagation();a.preventDefault();$(".file-drop-zone").removeClass("hide")});$(".file-drop-zone,.file-drop-zone-textarea").on("dragleave",function(a){a.stopPropagation();a.preventDefault();$(".file-drop-zone").addClass("hide")});
$(document).on("drop",function(a){E=!0;$(".file-drop-zone").addClass("hide");var d=a;a.originalEvent&&(d=a.originalEvent);d.stopPropagation();d.preventDefault();$("#input-file").prop("files",d.dataTransfer.files);m()});$("div#show-preview").on("click",function(){var a=$("div#show-preview");$("div.preview").slideToggle();a.hasClass("active")?a.removeClass("active"):a.addClass("active")});$(window).resize(function(){$("div.preview").css("display","");$("div.editor").css("flex-basis","");$("div.data-check").css("flex-basis",
"");v=5;q()});$("#open-about").on("click",function(){$("div.page-about").removeClass("about-hide")});$("#close-about-btn").on("click",function(){$("div.page-about").addClass("about-hide")});$("#control_copy").on("click",function(){var a=$("textarea#code-buffer");a.select();document.execCommand("copy");$("p#control_copy_text").text("Copied");a.blur();setTimeout(function(){$("p#control_copy_text").text("Copy")},1E3)});$("#control_download").on("click",function(){var a=$("textarea#code-buffer").val();
$("<a></a>",{href:window.URL.createObjectURL(new Blob([a])),download:"manifest.json",target:"_blank"})[0].click()});$("#issue-control").on("click",function(){var a=$("div.issue-status-label svg");a.hasClass("close")?a.attr("class","open"):a.attr("class","close");$("div.issue_content").slideToggle()});$("#format_version").on("change",function(){x=Number($("#format_version").val())});$(document).on("click",'input[type="button"].generate_uuid',function(){$(this).parents("div.type-uuid").find('input[type="text"]').val(n);
t()});$(document).on("click",".tab-children:not(.selected)>input",function(){var a=$(this).attr("class");if("modules"==a||r&&"dependencies"==a||u&&"subpacks"==a){var d=$(this).parent(),b=d.index();$("."+a+".tab-children").removeClass("selected");d.addClass("selected");$("."+a+".tab-content-list>div").removeClass("selected-tab-content").eq(b).addClass("selected-tab-content")}});$("#modules-delete,#dependencies-delete,#subpacks-delete").on("click",function(a){var d="."+$(this).attr("class"),b=$(d+".tab-children");
if(1<b.length&&($(this).hasClass("modules")||u&&$(this).hasClass("subpacks")||r&&$(this).hasClass("dependencies"))){$(d+".tabChildren.selected").remove();$(d+".tab-content-list>.selected-tab-content").remove();b=$(d+".tabChildren");d=$(d+".tab-content-list>div");for(var c=0,e=0;e<b.length;e++){var k=b.eq(e),p=d.eq(e);0==e&&(k.addClass("selected"),p.addClass("selected-tab-content"));k.children("div.tab-number").text(c);c++}}t();a.stopPropagation()});$("#modules_add,#dependencies_add,#subpacks_add").on("click",
function(){($(this).hasClass("modules")||u&&$(this).hasClass("subpacks")||r&&$(this).hasClass("dependencies"))&&f($(this).attr("class"));t()});$("#author-add").on("click",function(){g();t()});$("#author-delete").on("click",function(){$("div.authors-list>.author-name:last-child").remove();t()})});
